(function(){"use strict";var e={153:function(e,t,i){var a=i(7485),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("be-player-info",{attrs:{player:e.player}}),t("be-enemy-info",{attrs:{enemys:e.enemys}}),t("div",{staticClass:"button-group"},[t("div",{staticClass:"fl button-group-left"},[t("button",{on:{click:e.showKnapsack}},[e._v("背包")]),t("button",{on:{click:e.showPlayerAttr}},[e._v("属性")]),t("button",{on:{click:e.showSkill}},[e._v("技能")]),t("button",{on:{click:e.changeAutoFight}},[e._v(" "+e._s(e.autoFightFlag?"关闭自动":"自动战斗")+" ")]),t("button",{on:{click:e.initGame}},[e._v("重新开始")]),"development"===e.env?t("button",{on:{click:e.simulationFight}},[e._v(" 模拟战斗 ")]):e._e(),t("button",{on:{click:e.showStatistics}},[e._v("统计")]),t("button",{on:{click:e.showSetting}},[e._v("设置")])]),t("div",{staticClass:"fr button-group-right"},[e._v(" 怪物等级："+e._s(e.enemyLv)),t("br"),e._v(" 怪物进度："+e._s(e.enemyNum)+" / "+e._s(e.enemyNumMax)+" ")])]),t("be-fight-info",{attrs:{msgList:e.msgList}}),t("be-knapsack",{attrs:{player:e.player,visible:e.knapsackVisible},on:{"update:visible":function(t){e.knapsackVisible=t}}}),t("be-player-attr",{attrs:{player:e.player,visible:e.playerAttrVisible},on:{"update:visible":function(t){e.playerAttrVisible=t}}}),t("be-setting",{attrs:{visible:e.settingVisible,saleEquipRule:e.saleEquipRule},on:{"update:visible":function(t){e.settingVisible=t},"update:saleEquipRule":function(t){e.saleEquipRule=t},"update:sale-equip-rule":function(t){e.saleEquipRule=t}}}),t("be-statistics",{attrs:{visible:e.statisticsVisible,"kill-enemy-suffix-num":e.killEnemySuffixNum,"kill-enemy-type-num":e.killEnemyTypeNum,"equip-quality-fall-down-num":e.equipQualityFallDownNum,"equip-type-fall-down-num":e.equipTypeFallDownNum},on:{"update:visible":function(t){e.statisticsVisible=t}}}),t("be-skill-info",{attrs:{player:e.player,visible:e.skillVisible},on:{"update:visible":function(t){e.skillVisible=t}}}),"development"===e.env?[t("be-simulation-fight",{attrs:{visible:e.simulationVisible},on:{"update:visible":function(t){e.simulationVisible=t}}})]:e._e()],2)},l=[];i(7658);const n={Gray:"#bbb",Black:"#000",Green:"#7FFF00",Blue:"#15A5F3",Violet:"#B828F4",Yellow:"#FFD700",Red:"#FF0000",DarkGold:"#D2691E"},o={Puniness:{color:n.Gray,name:"弱小",addLv:-2},Normal:{color:n.Black,name:"普通",addLv:0},Variation:{color:n.Green,name:"变异",addLv:1},Elites:{color:n.Blue,name:"精英",addLv:2},Head:{color:n.Violet,name:"头目",addLv:4},Boss:{color:n.Yellow,name:"首领",addLv:8},VariationBoss:{color:n.Red,name:"变异首领",addLv:12},ElitesBoss:{color:n.DarkGold,name:"精英首领",addLv:16}},r={1:725,2:250,3:20,4:4,5:1},u={1:980,2:10,3:5,4:4,5:1},h={Puniness:1e3,Normal:7844,Variation:1e3,Elites:100,Head:50,Boss:3,VariationBoss:2,ElitesBoss:1},c={Puniness:0,Normal:0,Variation:3e3,Elites:6740,Head:200,Boss:30,VariationBoss:20,ElitesBoss:10},p=e=>{let t=[];return Object.keys(e).forEach((i=>{t.push({key:i,value:e[i]})})),t},m={Helmet:{name:"头盔",code:"Helmet"},Clothes:{name:"衣服",code:"Clothes"},Belt:{name:"腰带",code:"Belt"},Glove:{name:"手套",code:"Glove"},Shoes:{name:"鞋子",code:"Shoes"},Weapon:{name:"武器",code:"Weapon"},Necklace:{name:"项链",code:"Necklace"},Ring:{name:"戒指",code:"Ring"},Trousers:{name:"裤子",code:"Trousers"}},d={Inferior:{name:"劣质",color:n.Gray,additionalAttrNum:0,code:"Inferior",attrAddition:.8},Normal:{name:"普通",color:n.Black,additionalAttrNum:0,code:"Normal",attrAddition:1},Excellent:{name:"优秀",color:n.Green,additionalAttrNum:1,code:"Excellent",attrAddition:1.1},Polish:{name:"精良",color:n.Blue,additionalAttrNum:2,code:"Polish",attrAddition:1.2},Rare:{name:"稀有",color:n.Violet,additionalAttrNum:3,code:"Rare",attrAddition:1.3},Epic:{name:"史诗",color:n.Yellow,additionalAttrNum:4,code:"Epic",attrAddition:1.5},Legend:{name:"传说",color:n.Red,additionalAttrNum:5,code:"Legend",attrAddition:1.7},Myth:{name:"神话",color:n.DarkGold,additionalAttrNum:6,code:"Myth",attrAddition:2}},g={Puniness:{Inferior:7e3,Normal:2900,Excellent:100},Normal:{Inferior:1900,Normal:7e3,Excellent:1e3,Polish:100},Variation:{Inferior:500,Normal:6e3,Excellent:2400,Polish:1e3,Rare:100},Elites:{Inferior:100,Normal:5e3,Excellent:3e3,Polish:1e3,Rare:800,Epic:100},Head:{Inferior:100,Normal:4e3,Excellent:3400,Polish:1300,Rare:1e3,Epic:199,Legend:1},Boss:{Inferior:1,Normal:4e3,Excellent:3400,Polish:1300,Rare:1038,Epic:250,Legend:10,Myth:1},VariationBoss:{Inferior:1,Normal:3e3,Excellent:4384,Polish:1300,Rare:1e3,Epic:260,Legend:50,Myth:5},ElitesBoss:{Inferior:1,Normal:3e3,Excellent:4089,Polish:1500,Rare:1e3,Epic:300,Legend:100,Myth:10}},f={MinAtk:{name:"最小攻击",suffix:"",code:"minAtk"},MaxAtk:{name:"最大攻击",suffix:"",code:"maxAtk"},MagicAtk:{name:"法强",suffix:"",code:"magicAtk"},Hp:{name:"生命",suffix:"",code:"hp"},Def:{name:"物抗",suffix:"",code:"def"},MagicDef:{name:"魔抗",suffix:"",code:"magicDef"},BaseMinAtk:{name:"基础最小攻击",suffix:"",code:"baseMinAtk"},BaseMaxAtk:{name:"基础最大攻击",suffix:"",code:"baseMaxAtk"},BaseMagicAtk:{name:"基础法强",suffix:"",code:"baseMagicAtk"},BaseHp:{name:"基础生命",suffix:"",code:"baseHp"},BaseDef:{name:"基础物抗",suffix:"",code:"baseDef"},BaseMagicDef:{name:"基础魔抗",suffix:"",code:"baseMagicDef"},Speed:{name:"攻击速度",suffix:"%",code:"speed"},Hit:{name:"命中",suffix:"%",code:"hit"},Dodge:{name:"闪避",suffix:"%",code:"dodge"},Crt:{name:"暴击率",suffix:"%",code:"crt"},CrtDamage:{name:"暴击伤害",suffix:"%",code:"crtDamage"},ExtraAtk:{name:"额外攻击",suffix:"%",code:"extraAtk"},ExtraHp:{name:"额外生命",suffix:"%",code:"extraHp"},ExtraDef:{name:"额外物抗",suffix:"%",code:"extraDef"},ExtraMagicDef:{name:"额外魔抗",suffix:"%",code:"extraMagicDef"},ExtraMagicAtk:{name:"额外法强",suffix:"%",code:"extraMagicAtk"}},y=[{type:f.Hit,value:[1,10]},{type:f.Dodge,value:[1,10]},{type:f.CrtDamage,value:[1,50]},{type:f.Crt,value:[1,5]},{type:f.Speed,value:[1,20]},{type:f.ExtraHp,value:[1,5]},{type:f.ExtraDef,value:[1,5]},{type:f.ExtraAtk,value:[1,5]},{type:f.ExtraMagicAtk,value:[1,5]},{type:f.ExtraMagicDef,value:[1,5]}],v={[f.BaseMaxAtk.code]:3,[f.BaseMinAtk.code]:1,[f.BaseHp.code]:30,[f.BaseDef.code]:2},k={Base:10,LevelIncrease:10},b={Physical:0,Magic:1},q={[b.Physical]:"物理伤害",[b.Magic]:"魔法伤害"};class D{constructor({name:e="你",hp:t=100,lv:i=1,minAtk:a=1,maxAtk:s=5,magicAtk:l=3,def:n=1,magicDef:o=1,speed:r=0,hit:u=70,dodge:h=0,crt:c=0,crtDamage:p=150,baseSkill:m=null,skills:d=[]}={}){this.name=e,this.hp=t,this.currHp=t,this.lv=i,this.minAtk=a,this.maxAtk=s,this.magicAtk=l,this.def=n,this.magicDef=o,this.speed=r,this.intervalBase=1,this.interval=Math.floor(100*this.intervalBase-this.speed)/100,this.hit=u,this.dodge=h,this.crt=c,this.crtDamage=p,this.baseSkill=m,this.skills=d}getDamageRemission(e){return this.def/(this.def+100*e.lv)}getMagicDamageRemission(e){return this.magicDef/(this.magicDef+100*e.lv)}getDamageRemissionByCombatPower(){return this.def/(this.def+100*this.lv)}getMagicDamageRemissionByCombatPower(){return this.magicDef/(this.magicDef+100*this.lv)}attack(e){let t={};if(100*Math.random()<this.hit&&100*Math.random()>=e.dodge){let i=1,a="物理伤害",s="普通攻击";this.baseSkill?(i=this.baseSkill.damageType===b.Physical?this.baseSkill.getDamage(Math.random()*(this.maxAtk-this.minAtk)+this.minAtk)*(1-e.getDamageRemission(this)):this.baseSkill.getDamage(this.magicAtk)*(1-e.getMagicDamageRemission(this)),a=q[this.baseSkill.damageType],s=this.baseSkill.name):i=(Math.random()*(this.maxAtk-this.minAtk)+this.minAtk)*(1-e.getDamageRemission(this));let l=!1;100*Math.random()<this.crt&&(i*=this.crtDamage/100,l=!0),this.hit>100&&100*Math.random()<this.hit-100&&(i*=2),i=i>1?Math.floor(i):1,e.currHp>i?e.currHp-=i:e.currHp=0,t.msg=`<span style='color: ${this.color||"#F67712"};'>${this.name}</span> 使用 ${s} 对 <span style='color: ${e.color||"#F67712"};'>${e.name}</span> 造成 <span style='color: #F32020;${l?"font-size: 1.4em;":""}'>${i}</span> ${a}`}else t.msg=`<span style='color: ${e.color||"#F67712"};'>${e.name}</span> 闪避了 <span style='color: ${this.color||"#F67712"};'>${this.name}</span> 的攻击`;return t.currHp=e.currHp,t}toString(){return`hp: ${this.hp}, lv: ${this.lv}`}getCombatPower(){return Math.floor(((this.maxAtk+this.minAtk)/2+this.magicAtk)/2/this.interval*(this.crt+100)*this.crtDamage/1e4*this.hit/100*this.hp/(2-this.getDamageRemissionByCombatPower()-this.getMagicDamageRemissionByCombatPower())*2/(100-this.dodge)*30)}getOnHookDamage(e){let t=1;return t=this.baseSkill&&this.baseSkill.damageType!==b.Physical?Math.floor(this.magicAtk*(1-e.getMagicDamageRemission(this))*this.hit/100*(100-e.dodge)/100*(1+this.crt*this.crtDamage/1e4)):Math.floor((this.maxAtk+this.minAtk)/2*(1-e.getDamageRemission(this))*this.hit/100*(100-e.dodge)/100*(1+this.crt*this.crtDamage/1e4)),t>1?t:1}}const x={Slime:{name:"史莱姆",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:70,dodge:20,crt:10,crtDamage:200,exp:1,hpI:80,minAtkI:4,maxAtkI:5,defI:16,expI:1,equips:["ID1","ID2","ID3","ID4","ID5","ID6","ID7","ID8","ID9","ID10","ID11","ID12","ID13","ID14","ID15","ID16"]},Viper:{name:"毒蛇",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:99,dodge:20,crt:10,crtDamage:200,exp:1,hpI:80,minAtkI:3,maxAtkI:4,defI:16,expI:1,equips:["ID2","ID3","ID4","ID5","ID6","ID7","ID8","ID9","ID10"]},Wolf:{name:"魔狼",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:70,dodge:20,crt:30,crtDamage:250,exp:1,hpI:80,minAtkI:3,maxAtkI:4,defI:16,expI:1,equips:["ID3","ID4","ID5","ID6","ID7","ID8","ID9","ID10","ID11"]},WildBoar:{name:"野猪",hp:100,minAtk:2,maxAtk:2,def:1,speed:1,hit:45,dodge:20,crt:10,crtDamage:200,exp:1,hpI:80,minAtkI:5,maxAtkI:6,defI:16,expI:1,equips:["ID4","ID5","ID6","ID7","ID8","ID9","ID10","ID11","ID12"]},Gargoyle:{name:"石像鬼",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:70,dodge:20,crt:10,crtDamage:200,exp:1,hpI:100,minAtkI:2,maxAtkI:3,defI:20,expI:1,equips:["ID5","ID6","ID7","ID8","ID9","ID10","ID11","ID12","ID13"]}};var A=x;const E=e=>{var t=e instanceof Array?[]:{};for(var i in e)"object"===typeof e[i]?t[i]=E(e[i]):t[i]=e[i];return t},S=e=>Math.floor(Math.random()*(e[1]-e[0]))+e[0],_=e=>{if(e=Math.floor(e/1e3),e<60)return e+" 秒";if(e<3600){let t=Math.floor(e/60),i=e%60;return`${t} 分 ${i} 秒`}if(e<86400){let t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),a=e%60;return`${t} 小时 ${i} 分 ${a} 秒`}if(e<31536e3){let t=Math.floor(e/86400),i=Math.floor((e-86400*t)/3600),a=Math.floor((e-3600*i-86400*t)/60),s=e%60;return`${t} 天 ${i} 小时 ${a} 分 ${s} 秒`}{let t=Math.floor(e/86400/365),i=Math.floor((e-86400*t*365)/86400),a=Math.floor((e-86400*i-86400*t*365)/3600),s=Math.floor((e-3600*a-86400*i-86400*t*365)/60),l=e%60;return`${t} 年 ${i} 天 ${a} 小时 ${s} 分 ${l} 秒`}},I={ID1:{type:m.Weapon,lv:1,name:"剑",intervalBase:1,minAtk:[1,5,5,6],maxAtk:[5,10,6,7]},ID2:{type:m.Clothes,lv:1,name:"板甲",hp:[5,20,20,25],def:[2,8,5,6],magicDef:[1,4,3,4]},ID3:{type:m.Helmet,lv:1,name:"头盔",def:[1,5,4,5]},ID4:{type:m.Belt,lv:1,name:"腰带",hp:[5,10,10,15]},ID5:{type:m.Glove,lv:1,name:"手套",minAtk:[0,0,1,1],maxAtk:[1,3,3,4],def:[1,4,3,4],magicDef:[1,4,3,4]},ID6:{type:m.Shoes,lv:1,name:"鞋子",dodge:[1,3],def:[1,3,3,4],magicDef:[1,3,3,4]},ID7:{type:m.Necklace,lv:1,name:"项链",hp:[5,10,10,15],crtDamage:[5,10]},ID8:{type:m.Ring,lv:1,name:"戒指",crt:[1,5],minAtk:[1,3,3,4],maxAtk:[2,4,4,5]},ID9:{type:m.Trousers,lv:1,name:"裤子",hp:[3,10,8,12],def:[1,4,3,4],magicDef:[1,4,3,4]},ID10:{type:m.Weapon,lv:1,name:"匕首",intervalBase:.8,minAtk:[1,3,3,4],maxAtk:[3,7,4,5]},ID11:{type:m.Weapon,lv:1,name:"斧",intervalBase:1.2,minAtk:[2,7,6,7],maxAtk:[7,13,7,8]},ID12:{type:m.Weapon,lv:1,name:"锤",intervalBase:1.5,minAtk:[2,8,8,9],maxAtk:[8,16,9,10]},ID13:{type:m.Weapon,lv:1,name:"法杖",intervalBase:1,magicAtk:[3,7,5,6]},ID14:{type:m.Clothes,lv:1,name:"布甲",hp:[5,20,20,25],def:[1,4,3,4],magicDef:[2,8,5,6]},ID15:{type:m.Clothes,lv:1,name:"皮甲",hp:[5,20,20,25],def:[1,6,4,5],magicDef:[1,6,4,5]},ID16:{type:m.Helmet,lv:1,name:"法师帽",magicDef:[1,5,4,5]}};var w=I;class N{constructor({id:e="ID1",accordingToId:t=!0,quality:i="Normal",lv:a=1,intervalBase:s=0,minAtk:l=0,maxAtk:n=0,hp:o=0,def:r=0,speed:u=0,hit:h=0,dodge:c=0,crt:p=0,crtDamage:m=0,extraAttr:g=[],lockFlag:f=!1,strengthenLv:y=0,equipData:v={},magicAtk:b=0,magicDef:q=0}){if(t){this.id=e,this.lv=a,this.quality=i,this.equipQuality=d[i],this.equipData=E(w[e]);let t=["minAtk","maxAtk","hp","def"];t.forEach((e=>{this.equipData[e]&&(this.equipData[e][0]=this.equipData[e][0]+this.equipData[e][2]*(this.lv-1),this.equipData[e][1]=this.equipData[e][1]+this.equipData[e][3]*(this.lv-1))})),Object.keys(this.equipData).forEach((e=>{this.equipData[e]instanceof Array&&(this.equipData[e][0]=Math.floor(this.equipData[e][0]*this.equipQuality.attrAddition),this.equipData[e][1]=Math.floor(this.equipData[e][1]*this.equipQuality.attrAddition))})),this.equipData.intervalBase&&(this.intervalBase=this.equipData.intervalBase),this.type=this.equipData.type.code,this.equipType=this.equipData.type,this.createBaseAttr(),this.extraAttr=[],this.createExtraAttr()}else this.id=e,this.equipData=E(v),this.type=this.equipData.type.code,this.equipType=this.equipData.type,this.quality=i,this.equipQuality=d[i],this.lv=a,this.intervalBase=s,this.minAtk=l,this.maxAtk=n,this.hp=o,this.def=r,this.speed=u,this.hit=h,this.dodge=c,this.crt=p,this.crtDamage=m,this.extraAttr=g,this.magicAtk=b,this.magicDef=q;this.lockFlag=f,this.price=(k.Base+k.LevelIncrease*(this.lv-1))*this.equipQuality.attrAddition,this.strengthenLv=y}createExtraAttr(){let e,t,i,a=E(y),s=this.equipQuality.additionalAttrNum;while(s>0)e=Math.floor(Math.random()*a.length)+1,e=Math.floor(Math.random()*e),t=a.splice(e,1)[0],i=S(t.value),this.extraAttr.push({type:E(t.type),value:i,values:t.value}),s--}createBaseAttr(){this.minAtk=this.equipData.minAtk?S(this.equipData.minAtk):0,this.maxAtk=this.equipData.maxAtk?S(this.equipData.maxAtk):0,this.magicAtk=this.equipData.magicAtk?S(this.equipData.magicAtk):0,this.hp=this.equipData.hp?S(this.equipData.hp):0,this.def=this.equipData.def?S(this.equipData.def):0,this.magicDef=this.equipData.magicDef?S(this.equipData.magicDef):0,this.speed=this.equipData.speed?S(this.equipData.speed):0,this.hit=this.equipData.hit?S(this.equipData.hit):0,this.dodge=this.equipData.dodge?S(this.equipData.dodge):0,this.crt=this.equipData.crt?S(this.equipData.crt):0,this.crtDamage=this.equipData.crtDamage?S(this.equipData.crtDamage):0}getName(){return this.equipQuality.name+"的"+(this.equipData.name||this.equipType.name)}getColor(){return this.equipQuality.color}lock(){this.lockFlag=!0}unlock(){this.lockFlag=!1}getBurnishPrice(){return Math.floor(100*this.lv*this.equipQuality.attrAddition)}burnish(){this.createBaseAttr()}getStrengthenPrice(){return Math.floor(100*this.lv*(this.strengthenLv+1)*(this.strengthenLv+1)*this.equipQuality.attrAddition)}strengthen(){let e=Math.random()<25/(this.strengthenLv+1)/(this.strengthenLv+1);return e?this.strengthenLv++:this.strengthenLv--,e}getStrengthenAttr(e){let t=Math.floor(.1*e*this.strengthenLv);return t>this.strengthenLv?t:this.strengthenLv}getBaseInfo(){let e=[];return this.intervalBase&&e.push({value:this.intervalBase+"秒 / 次",name:"武器攻速"}),(this.equipData.minAtk||this.equipData.maxAtk)&&e.push({value:this.minAtk+" - "+this.maxAtk,round:[this.equipData.minAtk[0],this.equipData.maxAtk[1]],name:"攻击",strengthenAttr:this.getStrengthenAttr(this.minAtk)+"-"+this.getStrengthenAttr(this.maxAtk)}),this.equipData.magicAtk&&e.push({value:this.magicAtk,round:[this.equipData.magicAtk[0],this.equipData.magicAtk[1]],name:"法强",strengthenAttr:this.getStrengthenAttr(this.magicAtk)}),this.equipData.hp&&e.push({value:this.hp,round:[].concat(this.equipData.hp.slice(0,2)),name:"生命",strengthenAttr:this.getStrengthenAttr(this.hp)}),this.equipData.def&&e.push({value:this.def,round:[].concat(this.equipData.def.slice(0,2)),name:"物抗",strengthenAttr:this.getStrengthenAttr(this.def)}),this.equipData.magicDef&&e.push({value:this.magicDef,round:[].concat(this.equipData.magicDef.slice(0,2)),name:"魔抗",strengthenAttr:this.getStrengthenAttr(this.magicDef)}),this.equipData.speed&&e.push({value:this.speed+"%",round:[].concat(this.equipData.speed.slice(0,2)),name:"攻击速度",strengthenAttr:this.getStrengthenAttr(this.speed)+"%"}),this.equipData.hit&&e.push({value:this.hit+"%",round:[].concat(this.equipData.hit.slice(0,2)),name:"命中",strengthenAttr:this.getStrengthenAttr(this.hit)+"%"}),this.equipData.dodge&&e.push({value:this.dodge+"%",round:[].concat(this.equipData.dodge.slice(0,2)),name:"闪避",strengthenAttr:this.getStrengthenAttr(this.dodge)+"%"}),this.equipData.crt&&e.push({value:this.crt+"%",round:[].concat(this.equipData.crt.slice(0,2)),name:"暴击率",strengthenAttr:this.getStrengthenAttr(this.crt)+"%"}),this.equipData.crtDamage&&e.push({value:this.crtDamage+"%",round:[].concat(this.equipData.crtDamage.slice(0,2)),name:"暴击伤害",strengthenAttr:this.getStrengthenAttr(this.crtDamage)+"%"}),e}getBaseInfoCalculation(){let e=[];return this.intervalBase&&e.push({value:this.intervalBase,code:"intervalBase"}),this.minAtk&&e.push({value:this.minAtk+this.getStrengthenAttr(this.minAtk),code:"baseMinAtk"}),this.maxAtk&&e.push({value:this.maxAtk+this.getStrengthenAttr(this.maxAtk),code:"baseMaxAtk"}),this.magicAtk&&e.push({value:this.magicAtk+this.getStrengthenAttr(this.magicAtk),code:"baseMagicAtk"}),this.hp&&e.push({value:this.hp+this.getStrengthenAttr(this.hp),code:"baseHp"}),this.def&&e.push({value:this.def+this.getStrengthenAttr(this.def),code:"baseDef"}),this.magicDef&&e.push({value:this.magicDef+this.getStrengthenAttr(this.magicDef),code:"baseMagicDef"}),this.speed&&e.push({value:this.speed+this.getStrengthenAttr(this.speed),code:"speed"}),this.hit&&e.push({value:this.hit+this.getStrengthenAttr(this.hit),code:"hit"}),this.dodge&&e.push({value:this.dodge+this.getStrengthenAttr(this.dodge),code:"dodge"}),this.crt&&e.push({value:this.crt+this.getStrengthenAttr(this.crt),code:"crt"}),this.crtDamage&&e.push({value:this.crtDamage+this.getStrengthenAttr(this.crtDamage),code:"crtDamage"}),e}}class M extends D{constructor(e="Slime",t="Normal",i=1){let a=E(A[e]),s=o[t],l=i-1+s.addLv;a?(a.hp=Math.max(a.hp+a.hpI*l,1),a.minAtk=Math.max(a.minAtk+a.minAtkI*l,1),a.maxAtk=Math.max(a.maxAtk+a.maxAtkI*l,1),a.def=Math.max(a.def+a.defI*l,1),a.lv=i):a={name:"敌人",hp:100,atk:1,def:1,speed:1,hit:50,dodge:0,crt:0,crtDamage:150,hpI:20,atkI:1,defI:1,exp:1,lv:i},super(a),this.exp=a.exp+a.expI*l,this.exp=this.exp>0?this.exp:1,this.name=`[${s.name}]${a.name}`,this.enemyType=e,this.color=s.color,this.suffix=t,this.equips=a.equips||[]}fallDownEquipment(){let e=p(g[this.suffix]),t=e.reduce(((e,t)=>("number"===typeof e?e:e.value)+t.value)),i=Math.floor(Math.random()*t),a="Inferior";for(let n=0;n<e.length;n++)if(i-=e[n].value,i<0){a=e[n].key;break}let s=this.lv-Math.floor(5*Math.random());s=s>0?s:1;let l=new N({id:this.equips[Math.floor(Math.random()*this.equips.length)],quality:a,lv:s});return l}}class C extends D{constructor({hp:e=100,lv:t=1,minAtk:i=1,maxAtk:a=5,def:s=1,speed:l=1,hit:n=70,dodge:o=0,crt:r=0,crtDamage:u=150,maxExp:h=100,currExp:c=0,goldCoin:p=0,baseMinAtk:m=1,baseMaxAtk:d=5,baseHp:g=100,baseDef:f=1,baseMagicDef:y=1,baseMagicAtk:v=1,intervalBase:k=1,extraAtk:b=0,extraHp:q=0,extraDef:D=0,extraMagicAtk:x=0,extraMagicDef:A=0,knapsackCapacity:E=100}={}){super({hp:e,lv:t,minAtk:i,maxAtk:a,def:s,speed:l,hit:n,dodge:o,crt:r,crtDamage:u}),this.maxExp=h,this.currExp=c,this.extraAtk=b,this.extraDef=D,this.extraHp=q,this.extraMagicAtk=x,this.extraMagicDef=A,this.baseMinAtk=m,this.baseMaxAtk=d,this.baseDef=f,this.baseHp=g,this.baseMagicDef=y,this.baseMagicAtk=v,this.intervalBase=k,this.calculationBaseAttr(),this.goldCoin=p,this.knapsack=[],this.knapsackCapacity=E,this.equips={Weapon:null,Helmet:null,Necklace:null,Clothes:null,Glove:null,Ring:null,Belt:null,Trousers:null,Shoes:null},this.messageHandles=[],this.totalGoldCoin=+localStorage.getItem("totalGoldCoin")||0}getExp(e){this.currExp+=e;while(this.currExp>=this.maxExp)this.levelUp();this.save()}getGoldCoin(e){this.goldCoin+=e,this.totalGoldCoin+=e,localStorage.setItem("goldCoin",this.goldCoin)}pay(e){this.goldCoin-=e}levelUp(){this.lv++,this.currExp-=this.maxExp,this.maxExp=this.lv*this.lv*100,Object.keys(v).forEach((e=>{this[e]+=v[e]})),this.calculationBaseAttr(),this.sendMsg(`等级提升至 ${this.lv} 级`),this.save()}getEquips(e){console.log();let t=0,i=0,a=this.knapsack.concat(e);return this.knapsack=a.slice(0,this.knapsackCapacity),a.length>this.knapsackCapacity&&(i+=a.length-this.knapsackCapacity,a.slice(this.knapsackCapacity,a.length).forEach((e=>{t+=e.price})),this.getGoldCoin(t)),this.save(),{goldCoin:t,saleNum:i}}calculationBaseAttr(){this.minAtk=Math.floor(this.baseMinAtk*(100+this.extraAtk)/100),this.maxAtk=Math.floor(this.baseMaxAtk*(100+this.extraAtk)/100),this.def=Math.floor(this.baseDef*(100+this.extraDef)/100),this.magicDef=Math.floor(this.baseMagicDef*(100+this.extraMagicDef)/100),this.magicAtk=Math.floor(this.baseMagicAtk*(100+this.extraMagicAtk)/100),this.hp=Math.floor(this.baseHp*(100+this.extraHp)/100),this.interval=Math.floor(100*this.intervalBase-this.speed)/100}equipFn(e,t=!0){if(this.equips[e.type]){let t=this.equips[e.type];this.knapsack.splice(this.knapsack.indexOf(e),1,t),t.getBaseInfoCalculation().forEach((e=>{"intervalBase"===e.code?this.intervalBase=1:this[e.code]-=e.value})),t.extraAttr.forEach((e=>{this[e.type.code]-=e.value}))}else this.knapsack.splice(this.knapsack.indexOf(e),1);e.getBaseInfoCalculation().forEach((e=>{"intervalBase"===e.code?this.intervalBase=e.value:this[e.code]+=e.value})),e.extraAttr.forEach((e=>{this[e.type.code]+=e.value})),this.calculationBaseAttr(),this.currHp>this.hp&&(this.currHp=this.hp),this.equips[e.type]=e,t&&this.save()}unloadEquip(e){this.equips[e]&&(this.knapsack.push(this.equips[e]),this.equips[e].getBaseInfoCalculation().forEach((e=>{"intervalBase"===e.code?this.intervalBase=1:this[e.code]-=e.value})),this.equips[e].extraAttr.forEach((e=>{this[e.type.code]-=e.value})),this.equips[e]=null),this.calculationBaseAttr(),this.currHp>this.hp&&(this.currHp=this.hp),this.save()}saleEquip(e){this.knapsack.splice(this.knapsack.indexOf(e),1),this.save()}autoEquip(e=0){let t=[].concat(this.knapsack);if(t=t.filter((e=>this.getCurrEquipPower(e)>this.getCombatPower())),t.sort(((e,t)=>this.getCurrEquipPower(t)-this.getCurrEquipPower(e))),t.length>0){let i={Weapon:null,Helmet:null,Necklace:null,Clothes:null,Glove:null,Ring:null,Belt:null,Trousers:null,Shoes:null};t.forEach((e=>{i[e.type]||(i[e.type]=e)})),Object.keys(i).forEach((e=>{i[e]&&this.equipFn(i[e])})),e<10&&this.autoEquip(++e)}}equipBaseSkill(e){this.baseSkill=e,this.save()}unloadBaseSkill(){this.baseSkill=null,this.save()}save(){let e=E(this);delete e.knapsack,delete e.equips,localStorage.setItem("player",JSON.stringify(e)),localStorage.setItem("equips",JSON.stringify(this.equips)),localStorage.setItem("knapsack",JSON.stringify(this.knapsack)),localStorage.setItem("baseSkill",JSON.stringify(this.baseSkill))}recoveryHp(e){this.currHp+=e,this.currHp>this.hp&&(this.currHp=this.hp)}autoRcoveryHp(e,t){const i=()=>{this.recoveryHp(Math.floor(e*this.hp/100)),this.currHp<this.hp?setTimeout(i,100):t&&t()};i()}getCurrEquipPower(e){let t=new C(this);if(this.equips[e.type]){let i=this.equips[e.type];i.getBaseInfoCalculation().forEach((e=>{"intervalBase"===e.code?t.intervalBase=1:t[e.code]-=e.value})),i.extraAttr.forEach((e=>{t[e.type.code]-=e.value}))}e.getBaseInfoCalculation().forEach((e=>{"intervalBase"===e.code?t.intervalBase=e.value:t[e.code]+=e.value})),e.extraAttr.forEach((e=>{t[e.type.code]+=e.value})),t.calculationBaseAttr();let i=t.getCombatPower();return t=null,i}getBaseInfo(){let e=[];return e.push({value:this.goldCoin,name:"金币"}),e.push({value:this.minAtk+" - "+this.maxAtk,name:"攻击"}),e.push({value:this.magicAtk,name:"法强"}),e.push({value:this.hp,name:"生命"}),e.push({value:this.def,name:"物抗"}),e.push({value:this.magicDef,name:"魔抗"}),e.push({value:this.speed+"%",name:"攻击速度"}),e.push({value:this.hit+"%",name:"命中"}),e.push({value:this.dodge+"%",name:"闪避"}),e.push({value:this.crt+"%",name:"暴击率"}),e.push({value:this.crtDamage+"%",name:"暴击伤害"}),e}sendMsg(e){this.messageHandles.forEach((t=>{t&&t(e)}))}receiveMsg(e){this.messageHandles.push(e)}}class B{constructor({name:e="",code:t="",damageType:i=b.Physical,baseDamage:a=0,addition:s=100}){this.code=t,this.name=e,this.damageType=i,this.baseDamage=a,this.addition=s}getDamage(e=0){return this.baseDamage+Math.floor(e*this.addition/100)}getDescribe(){return`对单个敌人造成 ${this.addition} % 的 ${q[this.damageType]}`}}var F=function(){var e=this,t=e._self._c;return t("div",{staticClass:"player-info"},[t("dl",[t("span",[e._v("等级："+e._s(e.player.lv))]),t("span",[e._v("金币："+e._s(e.player.goldCoin))])]),t("dl",[t("label",{attrs:{for:""}},[e._v("HP：")]),t("be-hp-bar",{attrs:{curr:e.player.currHp,max:e.player.hp}})],1),t("dl",[t("label",{attrs:{for:""}},[e._v("EXP：")]),t("be-hp-bar",{attrs:{curr:e.player.currExp,max:e.player.maxExp,type:"exp"}})],1)])},T=[],P=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hp-bar",style:e.style},[t("div",{staticClass:"curr-progress",class:{exp:"exp"===e.type},style:e.currStyle}),t("div",{staticClass:"bp-info"},[e._v(e._s(e.curr)+" / "+e._s(e.max))])])},L=[],O={props:{width:{type:String,default:"4rem"},max:{type:Number,default:0},curr:{type:Number,default:0},type:{type:String,default:"hp"}},computed:{style(){return{width:this.width}},currStyle(){return{width:(this.max>0?this.curr/this.max*100:0).toFixed(2)+"%"}}}},R=O,H=i(1001),V=(0,H.Z)(R,P,L,!1,null,"fd0f52e0",null),$=V.exports,j={data(){return{}},props:{player:Object},components:{BeHpBar:$}},Q=j,G=(0,H.Z)(Q,F,T,!1,null,"5dda3bf7",null),J=G.exports,W=function(){var e=this,t=e._self._c;return t("div",{staticClass:"enemy-info"},e._l(e.enemys,(function(i,a){return t("dl",{key:a},[t("label",{style:"color:"+i.color},[e._v(e._s(i.name)+"：")]),t("be-hp-bar",{attrs:{curr:i.currHp,max:i.hp}})],1)})),0)},U=[],Z={props:{enemys:Array},components:{BeHpBar:$}},z=Z,K=(0,H.Z)(z,W,U,!1,null,"9736e71e",null),Y=K.exports,X=function(){var e=this,t=e._self._c;return t("div",{staticClass:"fight-info"},[t("ul",e._l(e.msgList,(function(i,a){return t("li",{key:a,domProps:{innerHTML:e._s(i)}})})),0)])},ee=[],te={props:{msgList:Array}},ie=te,ae=(0,H.Z)(ie,X,ee,!1,null,"21f4d06c",null),se=ae.exports,le=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"knapsack"},[t("div",{staticClass:"container"},[t("div",{staticClass:"already-equipped"},e._l(Object.keys(e.player.equips),(function(i){return t("dl",{key:i},[e.player.equips[i]?[t("span",{style:"color:"+e.player.equips[i].getColor(),on:{click:function(t){return e.showEquipDetail(e.player.equips[i],"unload")}}},[e._v(e._s(e.player.equips[i].getName())+" (lv: "+e._s(e.player.equips[i].lv)+")")]),t("button",{on:{click:function(t){return e.unloadEquip(i)}}},[e._v("卸下")])]:t("span",[e._v("未装备"+e._s(e.EquipType[i].name))])],2)})),0),t("div",{staticClass:"not-equip"},e._l(e.player.knapsack,(function(i,a){return t("dl",{key:a},[t("span",{style:"color:"+i.getColor(),on:{click:function(t){return e.showEquipDetail(i,"equip")}}},[e._v(e._s(i.getName())+" (lv: "+e._s(i.lv)+")")]),e.player.getCurrEquipPower(i)>e.player.getCombatPower()?t("span",{staticClass:"red-text"},[e._v("+"+e._s(e.player.getCurrEquipPower(i)-e.player.getCombatPower()))]):t("span",{staticClass:"green-text"},[e._v(e._s(e.player.getCurrEquipPower(i)-e.player.getCombatPower()))]),t("div",{staticClass:"btn-group"},[t("button",{on:{click:function(t){return e.equipFn(i)}}},[e._v("装备")]),i.lockFlag?t("button",{on:{click:function(e){return i.unlock()}}},[e._v("解锁")]):t("button",{on:{click:function(e){return i.lock()}}},[e._v("锁上")]),t("button",{directives:[{name:"show",rawName:"v-show",value:!i.lockFlag,expression:"!equip.lockFlag"}],on:{click:function(t){return e.sale(i)}}},[e._v("出售")])])])})),0),t("div",{staticClass:"knapsack-bottom clearfix"},[t("div",{staticClass:"fl"},[t("button",{on:{click:e.showMultSale}},[e._v("批量出售")]),t("button",{on:{click:e.autoEquip}},[e._v("一键装备")])]),t("div",{staticClass:"fr"},[t("button",{on:{click:e.close}},[e._v("关闭")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.detailVisible,expression:"detailVisible"}],staticClass:"equip-info",on:{click:e.closeDetail}},[e.currEquip?t("be-equip-detail",{staticClass:"curr-equip",attrs:{btnType:"unload",equip:e.currEquip},on:{unload:function(t){return e.unloadEquip(e.equip.type)},strengthen:e.strengthen,burnish:e.burnish}}):e._e(),t("be-equip-detail",{attrs:{equip:e.equip,btnType:e.btnType,powerUp:e.powerUp},on:{equip:function(t){return e.equipFn(e.equip)},unload:function(t){return e.unloadEquip(e.equip.type)},strengthen:e.strengthen,burnish:e.burnish,sale:e.sale}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.multSaleVisible,expression:"multSaleVisible"}],staticClass:"equip-info",on:{click:e.closeMultSale}},[t("div",{staticClass:"mult-sale-container",on:{click:function(t){return e.stopProp(t)}}},[e._l(e.equipQualityList,(function(i){return[t("dl",{key:i.code},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.value,expression:"equipQuality.value"}],attrs:{type:"checkbox",id:"multSale"+i.code},domProps:{checked:Array.isArray(i.value)?e._i(i.value,null)>-1:i.value},on:{change:function(t){var a=i.value,s=t.target,l=!!s.checked;if(Array.isArray(a)){var n=null,o=e._i(a,n);s.checked?o<0&&e.$set(i,"value",a.concat([n])):o>-1&&e.$set(i,"value",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(i,"value",l)}}}),t("label",{attrs:{for:"multSale"+i.code}},[e._v(e._s(i.name))])])]})),t("div",{staticClass:"sale-btn-group clearfix"},[t("button",{on:{click:e.multSale}},[e._v("批量出售")]),t("button",{on:{click:e.allSale}},[e._v("全部出售")]),t("button",{on:{click:e.intelligenceSale}},[e._v("智能出售")]),t("button",{on:{click:e.closeMultSale}},[e._v("关闭")])])],2)])])])},ne=[],oe=function(){var e=this,t=e._self._c;return e.equip?t("div",{staticClass:"equip-detail"},[t("div",{staticClass:"base-info"},[t("dl",[t("span",{style:"color: "+e.equip.getColor()},[e._v(" "+e._s(e.equip.getName())+" (lv: "+e._s(e.equip.lv)+") ")]),e.equip.strengthenLv>0?t("span",{staticClass:"red-text"},[e._v(" +"+e._s(e.equip.strengthenLv)+" ")]):e._e()]),e.powerUp?t("dl",[e._v(" 战斗力增幅： "),[+e.powerUp>0?t("span",{staticClass:"red-text"},[e._v(e._s(e.powerUp))]):t("span",{staticClass:"green-text"},[e._v(e._s(e.powerUp))])]],2):e._e(),e._l(e.equip.getBaseInfo(),(function(i,a){return t("dl",{key:a},[e._v(" "+e._s(i.name)+"："+e._s(i.value)+" "),i.round?t("span",{staticClass:"round"},[e._v(" ("+e._s(i.round.join(" - "))+") ")]):e._e(),e.equip.strengthenLv>0?t("span",{staticClass:"red-text"},[e._v(" ("+e._s(i.strengthenAttr)+") ")]):e._e()])}))],2),e.equip.extraAttr&&e.equip.extraAttr.length>0?t("div",{staticClass:"extra-info"},e._l(e.equip.extraAttr,(function(i,a){return t("dl",{key:a},[e._v(" "+e._s(i.type.name)+"："+e._s(i.value+i.type.suffix)+" ")])})),0):e._e(),t("button",{on:{click:function(t){return e.strengthen(t)}}},[e._v(" 强化"),t("small",[e._v("("+e._s(e.equip.getStrengthenPrice())+")")])]),t("button",{on:{click:function(t){return e.burnish(t)}}},[e._v(" 打磨"),t("small",[e._v("("+e._s(e.equip.getBurnishPrice())+")")])]),t("button",{directives:[{name:"show",rawName:"v-show",value:"equip"===e.btnType,expression:"btnType === 'equip'"}],on:{click:function(t){return e.equipFn(t)}}},[e._v("装备")]),t("button",{directives:[{name:"show",rawName:"v-show",value:"unload"===e.btnType,expression:"btnType === 'unload'"}],on:{click:function(t){return e.unloadEquip(t)}}},[e._v(" 卸下 ")]),t("button",{directives:[{name:"show",rawName:"v-show",value:"equip"===e.btnType&&!e.equip.lockFlag,expression:"btnType === 'equip' && !equip.lockFlag"}],on:{click:function(t){return e.sale(t)}}},[e._v(" 出售"),t("small",[e._v("("+e._s(e.equip.price)+")")])])]):e._e()},re=[],ue={props:{equip:Object,btnType:{type:String,default:"equip"},powerUp:String},methods:{equipFn(e){e.stopPropagation(),this.$emit("equip")},unloadEquip(e){e.stopPropagation(),this.$emit("unload")},strengthen(e){e.stopPropagation(),this.$emit("strengthen",this.equip)},burnish(e){e.stopPropagation(),this.$emit("burnish",this.equip)},sale(e){e.stopPropagation(),this.$emit("sale",this.equip)}}},he=ue,ce=(0,H.Z)(he,oe,re,!1,null,"56578f67",null),pe=ce.exports,me={data(){return{detailVisible:!1,equip:null,btnType:"equip",currEquip:null,powerUp:"",multSaleVisible:!1,equipQualityList:Object.values(E(d)).map((e=>Object.assign(e,{value:!1}))),EquipType:m}},props:{player:Object,visible:{type:Boolean,default:!1}},inject:["log"],methods:{showEquipDetail(e,t){if("equip"===t){this.currEquip=this.player.equips[e.type];let t=this.player.getCurrEquipPower(e)-this.player.getCombatPower();this.powerUp=t>0?"+"+t:""+t}else this.currEquip=null,this.powerUp="";this.detailVisible=!0,this.equip=e,this.btnType=t},closeDetail(){this.detailVisible=!1},close(){this.$emit("update:visible",!1)},equipFn(e){this.player.equipFn(e),this.detailVisible=!1},unloadEquip(e){this.player.unloadEquip(e),this.detailVisible=!1},sale(e){this.detailVisible=!1,e.lockFlag||(this.player.saleEquip(e),this.player.getGoldCoin(e.price))},closeMultSale(){this.multSaleVisible=!1},showMultSale(){this.multSaleVisible=!0},stopProp(e){e.stopPropagation()},multSale(){let e=this.equipQualityList.filter((e=>e.value)).map((e=>e.code));if(e.length>0){let t=this.player.knapsack.filter((t=>e.indexOf(t.quality)>-1));t.forEach((e=>{this.sale(e)}))}this.closeMultSale()},allSale(){let e=[].concat(this.player.knapsack);e.forEach((e=>{this.sale(e)})),this.closeMultSale()},intelligenceSale(){let e=this.player.knapsack.filter((e=>this.player.getCurrEquipPower(e)<this.player.getCombatPower()));e.forEach((e=>{this.sale(e)})),this.closeMultSale()},strengthen(e){let t=e.getStrengthenPrice();t<=this.player.goldCoin?(this.player.pay(t),this.unloadEquip(e.type),e.strengthen()?(this.log("强化成功"),this.$message({message:"强化成功"})):(this.log("强化失败"),this.$message({message:"强化失败"})),this.equipFn(e)):(this.log("金币不足"),this.$message({message:"金币不足"}))},burnish(e){let t=e.getBurnishPrice();t<=this.player.goldCoin?(this.player.pay(t),this.unloadEquip(e.type),e.burnish(),this.log("打磨成功"),this.$message({message:"打磨成功"}),this.equipFn(e)):(this.log("金币不足"),this.$message({message:"金币不足"}))},autoEquip(){this.player.autoEquip()}},components:{BeEquipDetail:pe}},de=me,ge=(0,H.Z)(de,le,ne,!1,null,"50b3df64",null),fe=ge.exports,ye=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"player-attr"},[t("div",{staticClass:"base-info"},[t("dl",[e._v("等级："+e._s(e.player.lv))]),t("dl",[e._v("战斗力："+e._s(e.player.getCombatPower()))]),e._l(e.player.getBaseInfo(),(function(i,a){return t("dl",{key:a},[e._v(e._s(i.name)+"："+e._s(i.value))])})),t("button",{staticClass:"btn",on:{click:e.close}},[e._v("关闭")])],2)])},ve=[],ke={props:{player:Object,visible:{type:Boolean,default:!1}},methods:{close(){this.$emit("update:visible",!1)}}},be=ke,qe=(0,H.Z)(be,ye,ve,!1,null,"1e64efbc",null),De=qe.exports,xe=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"setting"},[t("div",{staticClass:"container"},[t("div",{staticClass:"main"},[t("div",{staticClass:"sale-rule-container"},[e._l(e.saleEquipRuleList,(function(i){return t("dl",{key:i.code},[t("input",{key:i.code,attrs:{type:"checkbox",id:"saleRule"+i.code,name:"saleEquipRule"},domProps:{checked:i.code===e.saleEquipRuleVal,value:i.code},on:{click:function(t){return e.saleEquipRuleClick(i.code)}}}),t("label",{style:"color: "+i.color,attrs:{for:"saleRule"+i.code}},[e._v(e._s(i.name))])])})),e._m(0)],2)]),t("div",{staticClass:"setting-bottom clearfix"},[t("div",{staticClass:"fr"},[t("button",{on:{click:e.save}},[e._v("保存")]),t("button",{on:{click:e.close}},[e._v("关闭")])])])])])},Ae=[function(){var e=this,t=e._self._c;return t("div",[t("button",[e._v("保存")])])}],Ee={data(){return{saleEquipRuleVal:"",saleEquipRuleList:[{code:"auto",name:"智能",color:n.Black},{code:d.Excellent.code,name:d.Excellent.name+"以下",color:d.Excellent.color},{code:d.Polish.code,name:d.Polish.name+"以下",color:d.Polish.color},{code:d.Rare.code,name:d.Rare.name+"以下",color:d.Rare.color},{code:d.Epic.code,name:d.Epic.name+"以下",color:d.Epic.color},{code:d.Legend.code,name:d.Legend.name+"以下",color:d.Legend.color},{code:d.Myth.code,name:d.Myth.name+"以下",color:d.Myth.color}]}},props:{visible:Boolean,saleEquipRule:String},methods:{save(){this.$emit("update:saleEquipRule",this.saleEquipRuleVal),localStorage.setItem("saleEquipRule",this.saleEquipRuleVal)},close(){this.$emit("update:visible",!1)},saleEquipRuleClick(e){this.saleEquipRuleVal!==e?this.saleEquipRuleVal=e:this.saleEquipRuleVal=""}},watch:{visible(){this.visible&&(this.saleEquipRuleVal=this.saleEquipRule)}},created(){this.saleEquipRuleVal=this.saleEquipRule}},Se=Ee,_e=(0,H.Z)(Se,xe,Ae,!1,null,"711c9b9c",null),Ie=_e.exports,we=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"statistics"},[t("div",{staticClass:"container"},[t("div",{staticClass:"main"},[t("div",{staticClass:"sale-rule-container"},e._l(Object.keys(e.killEnemyTypeNum),(function(i){return t("dl",{key:"killEnemyTypeNum"+i},[t("label",{attrs:{for:"killEnemyTypeNum"+i}},[e._v(e._s(e.enemyData[i]?.name))]),t("span",[e._v(e._s(e.killEnemyTypeNum[i]))])])})),0),t("div",{staticClass:"sale-rule-container"},e._l(Object.keys(e.killEnemySuffixNum),(function(i){return t("dl",{key:"killEnemySuffixNum"+i},[t("label",{style:{color:e.Suffix[i]?.color},attrs:{for:"killEnemySuffixNum"+i}},[e._v(e._s(e.Suffix[i]?.name))]),t("span",[e._v(e._s(e.killEnemySuffixNum[i]))])])})),0),t("div",{staticClass:"sale-rule-container"},e._l(Object.keys(e.equipTypeFallDownNum),(function(i){return t("dl",{key:"equipTypeFallDownNum"+i},[t("label",{attrs:{for:"equipTypeFallDownNum"+i}},[e._v(e._s(e.EquipType[i]?.name))]),t("span",[e._v(e._s(e.equipTypeFallDownNum[i]))])])})),0),t("div",{staticClass:"sale-rule-container"},e._l(Object.keys(e.equipQualityFallDownNum),(function(i){return t("dl",{key:"equipQualityFallDownNum"+i},[t("label",{style:{color:e.EquipQuality[i]?.color},attrs:{for:"equipQualityFallDownNum"+i}},[e._v(e._s(e.EquipQuality[i]?.name))]),t("span",[e._v(e._s(e.equipQualityFallDownNum[i]))])])})),0)]),t("div",{staticClass:"statistics-bottom clearfix"},[t("div",{staticClass:"fr"},[t("button",{on:{click:e.close}},[e._v("关闭")])])])])])},Ne=[],Me={data(){return{Suffix:o,enemyData:A,EquipType:m,EquipQuality:d}},props:{visible:Boolean,killEnemyTypeNum:Object,killEnemySuffixNum:Object,equipTypeFallDownNum:Object,equipQualityFallDownNum:Object},methods:{close(){this.$emit("update:visible",!1)}}},Ce=Me,Be=(0,H.Z)(Ce,we,Ne,!1,null,"2f7dee3a",null),Fe=Be.exports,Te=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"knapsack"},[t("div",{staticClass:"container"},[t("div",{staticClass:"already-equipped"},[t("dl",[e.player.baseSkill?[t("span",{on:{click:function(t){return e.showSkillDetail(e.player.baseSkill)}}},[e._v(e._s(e.player.baseSkill.name))]),t("button",{on:{click:function(t){return e.unloadBaseSkill()}}},[e._v("卸下")])]:t("span",[e._v("未装备技能")])],2)]),t("div",{staticClass:"not-equip"},[e._l(e.baseSkills,(function(i,a){return[e.player.baseSkill&&i.code===e.player.baseSkill.code?e._e():t("dl",{key:a},[t("span",{on:{click:function(t){return e.showSkillDetail(i)}}},[e._v(e._s(i.name))]),t("div",{staticClass:"btn-group"},[t("button",{on:{click:function(t){return e.equipBaseSkill(i)}}},[e._v("装备")])])])]}))],2),t("div",{staticClass:"knapsack-bottom clearfix"},[t("div",{staticClass:"fr"},[t("button",{on:{click:e.close}},[e._v("关闭")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.detailVisible,expression:"detailVisible"}],staticClass:"equip-info",on:{click:e.closeDetail}},[t("div",{staticClass:"skill-detail"},[e._v(" "+e._s(e.skill&&e.skill.getDescribe())+" ")])])])])},Pe=[];const Le={Slamming:{code:"Slamming",name:"猛击",baseDamage:0,addition:100,damageType:b.Physical},ArcaneMissiles:{code:"ArcaneMissiles",name:"奥术飞弹",baseDamage:0,addition:100,damageType:b.Magic}};var Oe={data(){return{detailVisible:!1,skill:null,baseSkills:[]}},props:{player:Object,visible:{type:Boolean,default:!1}},inject:["log"],methods:{showSkillDetail(e){this.detailVisible=!0,this.skill=e},closeDetail(){this.detailVisible=!1},close(){this.$emit("update:visible",!1)},equipBaseSkill(e){this.player.equipBaseSkill(e),this.detailVisible=!1},unloadBaseSkill(){this.player.unloadBaseSkill(),this.detailVisible=!1},stopProp(e){e.stopPropagation()}},created(){this.baseSkills=Object.keys(Le).map((e=>new B(Le[e])))}},Re=Oe,He=(0,H.Z)(Re,Te,Pe,!1,null,"37e2d23d",null),Ve=He.exports;const $e=(e,t,i,a)=>{const s=Object.keys(e).reduce(((s,l)=>(s[l]=e[l]+(t[l]-e[l])*i/(a-1),s)),{});let l=p(s),n=l.reduce(((e,t)=>("number"===typeof e?e:e.value)+t.value)),o=Math.floor(Math.random()*n);for(let r=0;r<l.length;r++)if(o-=l[r].value,o<0)return l[r]},je=(e,t,i)=>{const a=$e(h,c,e,t);let s=Object.keys(A);return a?new M(s[~~(Math.random()*s.length)],a.key,i):null},Qe=(e,t,i)=>{const a=$e(r,u,e,t),s=[];for(let l=0;l<+a.key;l++){const a=je(e,t,i);a&&s.push(a)}return s};let Ge=null;var Je={name:"App",data(){return{player:null,enemys:[],gameSpeed:10,recoverySpeed:2,autoFightFlag:!1,inBattleFlag:!1,knapsackVisible:!1,playerAttrVisible:!1,settingVisible:!1,statisticsVisible:!1,msgList:[],enemyLv:1,enemyNum:0,enemyNumMax:10,enemyStos:[],playerSto:null,onHookEnemyLv:"Puniness",onHookProfitMultipleRate:1,saleEquipRule:"",killEnemySuffixNum:{},killEnemyTypeNum:{},equipTypeFallDownNum:{},equipQualityFallDownNum:{},maxEnemyLv:1,simulationVisible:!1,skillVisible:!1,env:"production"}},methods:{clearSto(){clearTimeout(this.playerSto),this.enemyStos.forEach((e=>{clearTimeout(e)}))},fight(){this.inBattleFlag=!0;let e=0,t=()=>{var i=this.player.attack(this.enemys[e]);i.msg&&this.log(i.msg),0===i.currHp?(e++,e<this.enemys.length?this.playerSto=setTimeout(t,1e3*this.player.interval/this.gameSpeed):(this.clearSto(),this.victory())):this.playerSto=setTimeout(t,1e3*this.player.interval/this.gameSpeed)};this.playerSto=setTimeout(t,1e3*this.player.interval/this.gameSpeed);let i=e=>{var t=this.enemys[e].attack(this.player);t.msg&&this.log(t.msg),0===t.currHp?(this.clearSto(),this.loss()):(clearTimeout(this.enemyStos[e]),this.enemyStos[e]=setTimeout((()=>{i(e)}),1e3*this.enemys[e].interval/this.gameSpeed))};this.enemys.forEach(((e,t)=>{this.enemyStos[t]=setTimeout((()=>{i(t)}),1e3*e.interval/this.gameSpeed)}))},fallDownEquipment(){let e=[];this.enemys.forEach((t=>{e.push(t.fallDownEquipment())})),this.log(`获得 ${e.map((e=>'<span style="color: '+e.equipQuality.color+'">'+e.getName()+"</span>")).join("、")}`),this.autoSaleEquips(e)},getExp(){let e=0;this.enemys.forEach((t=>{e+=t.exp})),this.player.getExp(e)},saveTime(){localStorage.setItem("saveTime",(new Date).getTime())},loss(){this.saveTime(),this.log("战斗失败"),this.enemyNum>0?this.enemyNum--:this.enemyLv>1?(this.enemyLv--,this.enemyNum=this.enemyNumMax-1):(this.enemyLv=1,this.enemyNum=0),localStorage.setItem("enemyLv",this.enemyLv),localStorage.setItem("enemyNum",this.enemyNum),this.player.autoRcoveryHp(this.recoverySpeed,(()=>{this.createEnemys(),this.inBattleFlag=!1}))},victory(){this.saveTime(),this.log("战斗胜利"),this.fallDownEquipment(),this.getExp(),this.enemyNum<this.enemyNumMax-1?this.enemyNum++:(this.enemyLv++,this.enemyNum=0,this.enemyLv>this.maxEnemyLv&&(this.maxEnemyLv=this.enemyLv,localStorage.setItem("maxEnemyLv",this.maxEnemyLv))),this.enemys.forEach((e=>{this.killEnemySuffixNum[e.suffix]++,this.killEnemyTypeNum[e.enemyType]++})),localStorage.setItem("killEnemySuffixNum",JSON.stringify(this.killEnemySuffixNum)),localStorage.setItem("killEnemyTypeNum",JSON.stringify(this.killEnemyTypeNum)),localStorage.setItem("enemyLv",this.enemyLv),localStorage.setItem("enemyNum",this.enemyNum),this.player.autoRcoveryHp(this.recoverySpeed,(()=>{this.createEnemys(),this.inBattleFlag=!1}))},createEnemys(){this.enemys=Qe(this.enemyNum,this.enemyNumMax,this.enemyLv),this.autoFightFlag&&this.fight()},showKnapsack(){this.knapsackVisible=!0},showPlayerAttr(){this.playerAttrVisible=!0},showSkill(){this.skillVisible=!0},changeAutoFight(){this.autoFightFlag=!this.autoFightFlag,this.autoFightFlag&&!this.inBattleFlag&&this.fight(),localStorage.setItem("autoFightFlag",this.autoFightFlag)},log(e){this.msgList.push(e),this.msgList=this.msgList.slice(-1e3)},initGame(){localStorage.clear(),this.clearSto(),this.enemyLv=1,this.enemyNum=0,this.player=new C,this.createEnemys(),this.saleEquipRule="",this.killEnemySuffixNum=(()=>{let e={};return Object.keys(o).forEach((t=>{e[t]=0})),e})(),this.killEnemyTypeNum=(()=>{let e={};return Object.keys(A).forEach((t=>{e[t]=0})),e})(),this.equipQualityFallDownNum=(()=>{let e={};return Object.keys(d).forEach((t=>{e[t]=0})),e})(),this.equipTypeFallDownNum=(()=>{let e={};return Object.keys(m).forEach((t=>{e[t]=0})),e})(),this.maxEnemyLv=1},autoSaleEquips(e){e.forEach((e=>{this.equipTypeFallDownNum[e.type]++,this.equipQualityFallDownNum[e.quality]++})),localStorage.setItem("equipTypeFallDownNum",JSON.stringify(this.equipTypeFallDownNum)),localStorage.setItem("equipQualityFallDownNum",JSON.stringify(this.equipQualityFallDownNum));let t=0,i=0,a=e;if(this.saleEquipRule)if("auto"===this.saleEquipRule)a=e.filter((e=>this.player.getCurrEquipPower(e)>this.player.getCombatPower()||(t+=e.price,i++,!1)));else{let s=Object.keys(d);s=s.slice(s.indexOf(this.saleEquipRule)),a=e.filter((e=>!!s.includes(e.type)||(t+=e.price,i++,!1)))}this.player.getGoldCoin(t);const{goldCoin:s,saleNum:l}=this.player.getEquips(a);l+i>0&&this.log(`出售 ${l+i} 件装备, 共获得 ${s+t} 金币`)},calculationOnHookProfit(){let e=(new Date).getTime(),t=+localStorage.getItem("saveTime")||e;localStorage.setItem("saveTime",e);let i=new M("Slime",this.onHookEnemyLv,this.enemyLv),a=this.player.getOnHookDamage(i),s=i.getOnHookDamage(this.player),l=2e3*Math.floor(i.hp/a)/this.onHookProfitMultipleRate*this.player.interval,n=Math.floor(l/i.interval)/2e3*s,o=Math.floor((n>this.player.hp?100:n/this.player.hp*100)/this.recoverySpeed*1e3),r=Math.floor((e-t)/(l+o)),u=[],h=0;for(let c=0;c<r;c++)u.push(i.fallDownEquipment()),h+=i.exp;this.autoSaleEquips(u),this.player.getExp(h),this.log(`挂机 ${_(e-t)}, 共获得 ${u.length} 件装备, 经验 ${h}`)},showStatistics(){this.statisticsVisible=!0},showSetting(){this.settingVisible=!0},simulationFight(){this.simulationVisible=!0}},provide(){return{log:this.log}},components:{BePlayerInfo:J,BeEnemyInfo:Y,BeFightInfo:se,BeKnapsack:fe,BePlayerAttr:De,BeSetting:Ie,BeSimulationFight:Ge,BeSkillInfo:Ve,BeStatistics:Fe},mounted(){this.calculationOnHookProfit(),this.createEnemys()},created(){var e=function(){var e=(document.body&&document.body.clientWidth||document.getElementsByTagName("html")[0].offsetWidth)/750;e=e>1?1:e<.427?.427:e,document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+100*e+"px !important")};if(e(),window.addEventListener("resize",(function(){e()}),!1),localStorage.getItem("player")?this.player=new C(JSON.parse(localStorage.getItem("player"))):this.player=new C,localStorage.getItem("equips")){let e=JSON.parse(localStorage.getItem("equips"));Object.keys(e).forEach((t=>{if(e[t]){let i=E(e[t]);i.accordingToId=!1,e[t]=new N(i)}})),this.player.equips=e}if(localStorage.getItem("knapsack")){let e=JSON.parse(localStorage.getItem("knapsack")),t=e.map((e=>(e.accordingToId=!1,new N(e))));this.player.knapsack=t}if(localStorage.getItem("baseSkill")&&"null"!==localStorage.getItem("baseSkill")){let e=JSON.parse(localStorage.getItem("baseSkill"));this.player.baseSkill=new B(e)}this.enemyLv=localStorage.getItem("enemyLv")?+localStorage.getItem("enemyLv"):1,this.enemyNum=localStorage.getItem("enemyNum")?+localStorage.getItem("enemyNum"):0,this.player.receiveMsg((e=>{this.log(e)})),this.saleEquipRule=localStorage.getItem("saleEquipRule")||"",this.killEnemySuffixNum=localStorage.getItem("killEnemySuffixNum")?JSON.parse(localStorage.getItem("killEnemySuffixNum")):(()=>{let e={};return Object.keys(o).forEach((t=>{e[t]=0})),e})(),this.killEnemyTypeNum=localStorage.getItem("killEnemyTypeNum")?JSON.parse(localStorage.getItem("killEnemyTypeNum")):(()=>{let e={};return Object.keys(A).forEach((t=>{e[t]=0})),e})(),this.equipQualityFallDownNum=localStorage.getItem("equipQualityFallDownNum")?JSON.parse(localStorage.getItem("equipQualityFallDownNum")):(()=>{let e={};return Object.keys(d).forEach((t=>{e[t]=0})),e})(),this.equipTypeFallDownNum=localStorage.getItem("equipTypeFallDownNum")?JSON.parse(localStorage.getItem("equipTypeFallDownNum")):(()=>{let e={};return Object.keys(m).forEach((t=>{e[t]=0})),e})(),this.maxEnemyLv=localStorage.getItem("maxEnemyLv")?+localStorage.getItem("maxEnemyLv"):1}},We=Je,Ue=(0,H.Z)(We,s,l,!1,null,null,null),Ze=Ue.exports,ze=i(5114),Ke=i.n(ze),Ye=function(){var e=this,t=e._self._c;return t("div",{staticClass:"message"},[e._v(e._s(e.message))])},Xe=[],et={props:{message:String}},tt=et,it=(0,H.Z)(tt,Ye,Xe,!1,null,"2c12c058",null),at=it.exports;function st(e){let t=e.extend(at);e.prototype.$message=e=>{let i=new t({propsData:e});document.body.appendChild(i.$mount().$el),setTimeout((function(){document.body.removeChild(i.$mount().$el),i.$destroy()}),e.time||3e3)}}a["default"].config.productionTip=!1,a["default"].use(Ke()),st(a["default"]),new a["default"]({el:"#app",components:{App:Ze},template:"<App/>"})}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}i.m=e,function(){i.amdO={}}(),function(){var e=[];i.O=function(t,a,s,l){if(!a){var n=1/0;for(h=0;h<e.length;h++){a=e[h][0],s=e[h][1],l=e[h][2];for(var o=!0,r=0;r<a.length;r++)(!1&l||n>=l)&&Object.keys(i.O).every((function(e){return i.O[e](a[r])}))?a.splice(r--,1):(o=!1,l<n&&(n=l));if(o){e.splice(h--,1);var u=s();void 0!==u&&(t=u)}}return t}l=l||0;for(var h=e.length;h>0&&e[h-1][2]>l;h--)e[h]=e[h-1];e[h]=[a,s,l]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,l,n=a[0],o=a[1],r=a[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(r)var h=r(i)}for(t&&t(a);u<n.length;u++)l=n[u],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(h)},a=self["webpackChunkbrush_equip"]=self["webpackChunkbrush_equip"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(153)}));a=i.O(a)})();
//# sourceMappingURL=app.d98dd03b.js.map