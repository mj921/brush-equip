webpackJsonp([1],{"48pL":function(e,t){},"57oG":function(e,t){},"7njf":function(e,t){},BNfu:function(e,t){},FDfl:function(e,t){},JzUl:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s,n=i("IvJb"),l=i("ZLEe"),o=i.n(l),r=i("3cXf"),u=i.n(r),c=i("Yarq"),h=i.n(c),p=i("AA3o"),m=i.n(p),v=i("xSur"),d=i.n(v),f=i("UzKs"),g=i.n(f),y=i("Y7Ml"),k=i.n(y),D=i("a3Yh"),b=i.n(D),q="#bbb",x="#000",A="#7FFF00",E="#15A5F3",_="#B828F4",S="#FFD700",I="#FF0000",M="#D2691E",C={Puniness:{color:q,name:"弱小",addLv:-2},Normal:{color:x,name:"普通",addLv:0},Variation:{color:A,name:"变异",addLv:1},Elites:{color:E,name:"精英",addLv:2},Head:{color:_,name:"头目",addLv:4},Boss:{color:S,name:"首领",addLv:8},VariationBoss:{color:I,name:"变异首领",addLv:12},ElitesBoss:{color:M,name:"精英首领",addLv:16}},w={1:725,2:250,3:20,4:4,5:1},B={1:980,2:10,3:5,4:4,5:1},N={Puniness:1e3,Normal:7844,Variation:1e3,Elites:100,Head:50,Boss:3,VariationBoss:2,ElitesBoss:1},L={Puniness:0,Normal:0,Variation:3e3,Elites:6740,Head:200,Boss:30,VariationBoss:20,ElitesBoss:10},F=function(e){var t=[];return o()(e).forEach(function(i){t.push({key:i,value:e[i]})}),t},P={Helmet:{name:"头盔",code:"Helmet"},Clothes:{name:"衣服",code:"Clothes"},Belt:{name:"腰带",code:"Belt"},Glove:{name:"手套",code:"Glove"},Shoes:{name:"鞋子",code:"Shoes"},Weapon:{name:"武器",code:"Weapon"},Necklace:{name:"项链",code:"Necklace"},Ring:{name:"戒指",code:"Ring"},Trousers:{name:"裤子",code:"Trousers"}},R={Inferior:{name:"劣质",color:q,additionalAttrNum:0,code:"Inferior",attrAddition:.8},Normal:{name:"普通",color:x,additionalAttrNum:0,code:"Normal",attrAddition:1},Excellent:{name:"优秀",color:A,additionalAttrNum:1,code:"Excellent",attrAddition:1.1},Polish:{name:"精良",color:E,additionalAttrNum:2,code:"Polish",attrAddition:1.2},Rare:{name:"稀有",color:_,additionalAttrNum:3,code:"Rare",attrAddition:1.3},Epic:{name:"史诗",color:S,additionalAttrNum:4,code:"Epic",attrAddition:1.5},Legend:{name:"传说",color:I,additionalAttrNum:5,code:"Legend",attrAddition:1.7},Myth:{name:"神话",color:M,additionalAttrNum:6,code:"Myth",attrAddition:2}},T={Puniness:{Inferior:7e3,Normal:2900,Excellent:100},Normal:{Inferior:1900,Normal:7e3,Excellent:1e3,Polish:100},Variation:{Inferior:500,Normal:6e3,Excellent:2400,Polish:1e3,Rare:100},Elites:{Inferior:100,Normal:5e3,Excellent:3e3,Polish:1e3,Rare:800,Epic:100},Head:{Inferior:100,Normal:4e3,Excellent:3400,Polish:1300,Rare:1e3,Epic:199,Legend:1},Boss:{Inferior:1,Normal:4e3,Excellent:3400,Polish:1300,Rare:1038,Epic:250,Legend:10,Myth:1},VariationBoss:{Inferior:1,Normal:3e3,Excellent:4384,Polish:1300,Rare:1e3,Epic:260,Legend:50,Myth:5},ElitesBoss:{Inferior:1,Normal:3e3,Excellent:4089,Polish:1500,Rare:1e3,Epic:300,Legend:100,Myth:10}},H={MinAtk:{name:"最小攻击",suffix:"",code:"minAtk"},MaxAtk:{name:"最大攻击",suffix:"",code:"maxAtk"},MagicAtk:{name:"法强",suffix:"",code:"magicAtk"},Hp:{name:"生命",suffix:"",code:"hp"},Def:{name:"物抗",suffix:"",code:"def"},MagicDef:{name:"魔抗",suffix:"",code:"magicDef"},BaseMinAtk:{name:"基础最小攻击",suffix:"",code:"baseMinAtk"},BaseMaxAtk:{name:"基础最大攻击",suffix:"",code:"baseMaxAtk"},BaseMagicAtk:{name:"基础法强",suffix:"",code:"baseMagicAtk"},BaseHp:{name:"基础生命",suffix:"",code:"baseHp"},BaseDef:{name:"基础物抗",suffix:"",code:"baseDef"},BaseMagicDef:{name:"基础魔抗",suffix:"",code:"baseMagicDef"},Speed:{name:"攻击速度",suffix:"%",code:"speed"},Hit:{name:"命中",suffix:"%",code:"hit"},Dodge:{name:"闪避",suffix:"%",code:"dodge"},Crt:{name:"暴击率",suffix:"%",code:"crt"},CrtDamage:{name:"暴击伤害",suffix:"%",code:"crtDamage"},ExtraAtk:{name:"额外攻击",suffix:"%",code:"extraAtk"},ExtraHp:{name:"额外生命",suffix:"%",code:"extraHp"},ExtraDef:{name:"额外物抗",suffix:"%",code:"extraDef"},ExtraMagicDef:{name:"额外魔抗",suffix:"%",code:"extraMagicDef"},ExtraMagicAtk:{name:"额外法强",suffix:"%",code:"extraMagicAtk"}},V=[{type:H.Hit,value:[1,10]},{type:H.Dodge,value:[1,10]},{type:H.CrtDamage,value:[1,50]},{type:H.Crt,value:[1,5]},{type:H.Speed,value:[1,20]},{type:H.ExtraHp,value:[1,5]},{type:H.ExtraDef,value:[1,5]},{type:H.ExtraAtk,value:[1,5]},{type:H.ExtraMagicAtk,value:[1,5]},{type:H.ExtraMagicDef,value:[1,5]}],$=(a={},b()(a,H.BaseMaxAtk.code,5),b()(a,H.BaseMinAtk.code,1),b()(a,H.BaseHp.code,50),b()(a,H.BaseDef.code,3),a),O={Base:10,LevelIncrease:10},Q={Physical:0,Magic:1},U=(s={},b()(s,Q.Physical,"物理伤害"),b()(s,Q.Magic,"魔法伤害"),s),W=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.name,a=void 0===i?"你":i,s=t.hp,n=void 0===s?100:s,l=t.lv,o=void 0===l?1:l,r=t.minAtk,u=void 0===r?1:r,c=t.maxAtk,h=void 0===c?5:c,p=t.magicAtk,v=void 0===p?3:p,d=t.def,f=void 0===d?1:d,g=t.magicDef,y=void 0===g?1:g,k=t.speed,D=void 0===k?0:k,b=t.hit,q=void 0===b?70:b,x=t.dodge,A=void 0===x?0:x,E=t.crt,_=void 0===E?0:E,S=t.crtDamage,I=void 0===S?150:S,M=t.baseSkill,C=void 0===M?null:M,w=t.skills,B=void 0===w?[]:w;m()(this,e),this.name=a,this.hp=n,this.currHp=n,this.lv=o,this.minAtk=u,this.maxAtk=h,this.magicAtk=v,this.def=f,this.magicDef=y,this.speed=D,this.intervalBase=1,this.interval=Math.floor(100*this.intervalBase-this.speed)/100,this.hit=q,this.dodge=A,this.crt=_,this.crtDamage=I,this.baseSkill=C,this.skills=B}return d()(e,[{key:"getDamageRemission",value:function(e){return this.def/(this.def+100*e.lv)}},{key:"getMagicDamageRemission",value:function(e){return this.magicDef/(this.magicDef+100*e.lv)}},{key:"getDamageRemissionByCombatPower",value:function(){return this.def/(this.def+100*this.lv)}},{key:"getMagicDamageRemissionByCombatPower",value:function(){return this.magicDef/(this.magicDef+100*this.lv)}},{key:"attack",value:function(e){var t={};if(100*Math.random()<this.hit&&100*Math.random()>=e.dodge){var i=1,a="物理伤害",s="普通攻击";this.baseSkill?(i=this.baseSkill.damageType===Q.Physical?this.baseSkill.getDamage(Math.random()*(this.maxAtk-this.minAtk)+this.minAtk)*(1-e.getDamageRemission(this)):this.baseSkill.getDamage(this.magicAtk)*(1-e.getMagicDamageRemission(this)),a=U[this.baseSkill.damageType],s=this.baseSkill.name):i=(Math.random()*(this.maxAtk-this.minAtk)+this.minAtk)*(1-e.getDamageRemission(this));var n=!1;100*Math.random()<this.crt&&(i*=this.crtDamage/100,n=!0),this.hit>100&&100*Math.random()<this.hit-100&&(i*=2),i=i>1?Math.floor(i):1,e.currHp>i?e.currHp-=i:e.currHp=0,t.msg="<span style='color: "+(this.color||"#F67712")+";'>"+this.name+"</span> 使用 "+s+" 对 <span style='color: "+(e.color||"#F67712")+";'>"+e.name+"</span> 造成 <span style='color: #F32020;"+(n?"font-size: 1.4em;":"")+"'>"+i+"</span> "+a}else t.msg="<span style='color: "+(e.color||"#F67712")+";'>"+e.name+"</span> 闪避了 <span style='color: "+(this.color||"#F67712")+";'>"+this.name+"</span> 的攻击";return t.currHp=e.currHp,t}},{key:"toString",value:function(){return"hp: "+this.hp+", lv: "+this.lv}},{key:"getCombatPower",value:function(){return Math.floor(((this.maxAtk+this.minAtk)/2+this.magicAtk)/2/this.interval*this.crt*this.crtDamage/1e4*this.hit/100*this.hp/(2-this.getDamageRemissionByCombatPower()-this.getMagicDamageRemissionByCombatPower())*2/(100-this.dodge)*30)}},{key:"getOnHookDamage",value:function(e){var t=1;return(t=this.baseSkill&&this.baseSkill.damageType!==Q.Physical?Math.floor(magicAtk*(1-e.getMagicDamageRemission(this))*this.hit/100*(100-e.dodge)/100*(1+this.crt*this.crtDamage/1e4)):Math.floor((this.maxAtk+this.minAtk)/2*(1-e.getDamageRemission(this))*this.hit/100*(100-e.dodge)/100*(1+this.crt*this.crtDamage/1e4)))>1?t:1}}]),e}(),G={ID1:{type:P.Weapon,lv:1,name:"剑",intervalBase:1,minAtk:[1,5,5,6],maxAtk:[5,10,6,7]},ID2:{type:P.Clothes,lv:1,name:"板甲",hp:[5,20,20,25],def:[2,8,5,6],magicDef:[1,4,3,4]},ID3:{type:P.Helmet,lv:1,name:"头盔",def:[1,5,4,5]},ID4:{type:P.Belt,lv:1,name:"腰带",hp:[5,10,10,15]},ID5:{type:P.Glove,lv:1,name:"手套",minAtk:[0,0,1,1],maxAtk:[1,3,3,4],def:[1,4,3,4],magicDef:[1,4,3,4]},ID6:{type:P.Shoes,lv:1,name:"鞋子",dodge:[1,3],def:[1,3,3,4],magicDef:[1,3,3,4]},ID7:{type:P.Necklace,lv:1,name:"项链",hp:[5,10,10,15],crtDamage:[5,10]},ID8:{type:P.Ring,lv:1,name:"戒指",crt:[1,5],minAtk:[1,3,3,4],maxAtk:[2,4,4,5]},ID9:{type:P.Trousers,lv:1,name:"裤子",hp:[3,10,8,12],def:[1,4,3,4],magicDef:[1,4,3,4]},ID10:{type:P.Weapon,lv:1,name:"匕首",intervalBase:.8,minAtk:[1,3,3,4],maxAtk:[3,7,4,5]},ID11:{type:P.Weapon,lv:1,name:"斧",intervalBase:1.2,minAtk:[2,7,6,7],maxAtk:[7,13,7,8]},ID12:{type:P.Weapon,lv:1,name:"锤",intervalBase:1.5,minAtk:[2,8,8,9],maxAtk:[8,16,9,10]},ID13:{type:P.Weapon,lv:1,name:"法杖",intervalBase:1,magic:[3,7,5,6]},ID14:{type:P.Clothes,lv:1,name:"布甲",hp:[5,20,20,25],def:[1,4,3,4],magicDef:[2,8,5,6]},ID15:{type:P.Clothes,lv:1,name:"皮甲",hp:[5,20,20,25],def:[1,6,4,5],magicDef:[1,6,4,5]},ID16:{type:P.Helmet,lv:1,name:"法师帽",magicDef:[1,5,4,5]}},j={Slime:{name:"史莱姆",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:70,dodge:20,crt:10,crtDamage:200,exp:1,hpI:80,minAtkI:4,maxAtkI:5,defI:16,expI:1,equips:["ID1","ID2","ID3","ID4","ID5","ID6","ID7","ID8","ID9","ID10","ID11","ID12","ID13","ID14","ID15","ID16"]},Viper:{name:"毒蛇",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:99,dodge:20,crt:10,crtDamage:200,exp:1,hpI:80,minAtkI:3,maxAtkI:4,defI:16,expI:1,equips:["ID2","ID3","ID4","ID5","ID6","ID7","ID8","ID9","ID10"]},Wolf:{name:"魔狼",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:70,dodge:20,crt:30,crtDamage:250,exp:1,hpI:80,minAtkI:3,maxAtkI:4,defI:16,expI:1,equips:["ID3","ID4","ID5","ID6","ID7","ID8","ID9","ID10","ID11"]},WildBoar:{name:"野猪",hp:100,minAtk:2,maxAtk:2,def:1,speed:1,hit:45,dodge:20,crt:10,crtDamage:200,exp:1,hpI:80,minAtkI:5,maxAtkI:6,defI:16,expI:1,equips:["ID4","ID5","ID6","ID7","ID8","ID9","ID10","ID11","ID12"]},Gargoyle:{name:"石像鬼",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:70,dodge:20,crt:10,crtDamage:200,exp:1,hpI:100,minAtkI:2,maxAtkI:3,defI:20,expI:1,equips:["ID5","ID6","ID7","ID8","ID9","ID10","ID11","ID12","ID13"]}},J=i("hRKE"),z=i.n(J),K=function e(t){var i=t instanceof Array?[]:{};for(var a in t)"object"===z()(t[a])?i[a]=e(t[a]):i[a]=t[a];return i},X=function(e){return Math.floor(Math.random()*(e[1]-e[0]))+e[0]},Y=function(){function e(t){var i=this,a=t.id,s=void 0===a?"ID1":a,n=t.accordingToId,l=void 0===n||n,r=t.quality,u=void 0===r?"Normal":r,c=t.lv,h=void 0===c?1:c,p=t.intervalBase,v=void 0===p?0:p,d=t.minAtk,f=void 0===d?0:d,g=t.maxAtk,y=void 0===g?0:g,k=t.hp,D=void 0===k?0:k,b=t.def,q=void 0===b?0:b,x=t.speed,A=void 0===x?0:x,E=t.hit,_=void 0===E?0:E,S=t.dodge,I=void 0===S?0:S,M=t.crt,C=void 0===M?0:M,w=t.crtDamage,B=void 0===w?0:w,N=t.extraAttr,L=void 0===N?[]:N,F=t.lockFlag,P=void 0!==F&&F,T=t.strengthenLv,H=void 0===T?0:T,V=t.equipData,$=void 0===V?{}:V;if(m()(this,e),l){this.id=s,this.lv=h,this.quality=u,this.equipQuality=R[u],this.equipData=K(G[s]);["minAtk","maxAtk","hp","def"].forEach(function(e){i.equipData[e]&&(i.equipData[e][0]=i.equipData[e][0]+i.equipData[e][2]*(i.lv-1),i.equipData[e][1]=i.equipData[e][1]+i.equipData[e][3]*(i.lv-1))}),o()(this.equipData).forEach(function(e){i.equipData[e]instanceof Array&&(i.equipData[e][0]=Math.floor(i.equipData[e][0]*i.equipQuality.attrAddition),i.equipData[e][1]=Math.floor(i.equipData[e][1]*i.equipQuality.attrAddition))}),this.equipData.intervalBase&&(this.intervalBase=this.equipData.intervalBase),this.type=this.equipData.type.code,this.equipType=this.equipData.type,this.createBaseAttr(),this.extraAttr=[],this.createExtraAttr()}else this.id=s,this.equipData=K($),this.type=this.equipData.type.code,this.equipType=this.equipData.type,this.quality=u,this.equipQuality=R[u],this.lv=h,this.intervalBase=v,this.minAtk=f,this.maxAtk=y,this.hp=D,this.def=q,this.speed=A,this.hit=_,this.dodge=I,this.crt=C,this.crtDamage=B,this.extraAttr=L;this.lockFlag=P,this.price=(O.Base+O.LevelIncrease*(this.lv-1))*this.equipQuality.attrAddition,this.strengthenLv=H}return d()(e,[{key:"createExtraAttr",value:function(){for(var e=K(V),t=this.equipQuality.additionalAttrNum,i=void 0,a=void 0,s=void 0;t>0;)i=Math.floor(Math.random()*e.length)+1,i=Math.floor(Math.random()*i),a=e.splice(i,1)[0],s=X(a.value),this.extraAttr.push({type:K(a.type),value:s,values:a.value}),t--}},{key:"createBaseAttr",value:function(){this.minAtk=this.equipData.minAtk?X(this.equipData.minAtk):0,this.maxAtk=this.equipData.maxAtk?X(this.equipData.maxAtk):0,this.hp=this.equipData.hp?X(this.equipData.hp):0,this.def=this.equipData.def?X(this.equipData.def):0,this.speed=this.equipData.speed?X(this.equipData.speed):0,this.hit=this.equipData.hit?X(this.equipData.hit):0,this.dodge=this.equipData.dodge?X(this.equipData.dodge):0,this.crt=this.equipData.crt?X(this.equipData.crt):0,this.crtDamage=this.equipData.crtDamage?X(this.equipData.crtDamage):0}},{key:"getName",value:function(){return this.equipQuality.name+"的"+(this.equipData.name||this.equipType.name)}},{key:"getColor",value:function(){return this.equipQuality.color}},{key:"lock",value:function(){this.lockFlag=!0}},{key:"unlock",value:function(){this.lockFlag=!1}},{key:"getBurnishPrice",value:function(){return Math.floor(100*this.lv*this.equipQuality.attrAddition)}},{key:"burnish",value:function(){this.createBaseAttr()}},{key:"getStrengthenPrice",value:function(){return Math.floor(100*this.lv*(this.strengthenLv+1)*(this.strengthenLv+1)*this.equipQuality.attrAddition)}},{key:"strengthen",value:function(){var e=Math.random()<25/(this.strengthenLv+1)/(this.strengthenLv+1);return e?this.strengthenLv++:this.strengthenLv--,e}},{key:"getStrengthenAttr",value:function(e){var t=Math.floor(.1*e*this.strengthenLv);return t>this.strengthenLv?t:this.strengthenLv}},{key:"getBaseInfo",value:function(){var e=[];return this.intervalBase&&e.push({value:this.intervalBase+"秒 / 次",name:"武器攻速"}),(this.minAtk||this.maxAtk)&&e.push({value:this.minAtk+" - "+this.maxAtk,round:[this.equipData.minAtk[0],this.equipData.maxAtk[1]],name:"攻击",strengthenAttr:this.getStrengthenAttr(this.minAtk)+"-"+this.getStrengthenAttr(this.maxAtk)}),this.magicAtk&&e.push({value:this.magicAtk,round:[this.equipData.magicAtk[0],this.equipData.magicAtk[1]],name:"法强",strengthenAttr:this.getStrengthenAttr(this.magicAtk)}),this.hp&&e.push({value:this.hp,round:[].concat(this.equipData.hp.slice(0,2)),name:"生命",strengthenAttr:this.getStrengthenAttr(this.hp)}),this.def&&e.push({value:this.def,round:[].concat(this.equipData.def.slice(0,2)),name:"物抗",strengthenAttr:this.getStrengthenAttr(this.def)}),this.magicDef&&e.push({value:this.magicDef,round:[].concat(this.equipData.magicDef.slice(0,2)),name:"魔抗",strengthenAttr:this.getStrengthenAttr(this.magicDef)}),this.speed&&e.push({value:this.speed+"%",round:[].concat(this.equipData.speed.slice(0,2)),name:"攻击速度",strengthenAttr:this.getStrengthenAttr(this.speed)+"%"}),this.hit&&e.push({value:this.hit+"%",round:[].concat(this.equipData.hit.slice(0,2)),name:"命中",strengthenAttr:this.getStrengthenAttr(this.hit)+"%"}),this.dodge&&e.push({value:this.dodge+"%",round:[].concat(this.equipData.dodge.slice(0,2)),name:"闪避",strengthenAttr:this.getStrengthenAttr(this.dodge)+"%"}),this.crt&&e.push({value:this.crt+"%",round:[].concat(this.equipData.crt.slice(0,2)),name:"暴击率",strengthenAttr:this.getStrengthenAttr(this.crt)+"%"}),this.crtDamage&&e.push({value:this.crtDamage+"%",round:[].concat(this.equipData.crtDamage.slice(0,2)),name:"暴击伤害",strengthenAttr:this.getStrengthenAttr(this.crtDamage)+"%"}),e}},{key:"getBaseInfoCalculation",value:function(){var e=[];return this.intervalBase&&e.push({value:this.intervalBase,code:"intervalBase"}),this.minAtk&&e.push({value:this.minAtk+this.getStrengthenAttr(this.minAtk),code:"baseMinAtk"}),this.maxAtk&&e.push({value:this.maxAtk+this.getStrengthenAttr(this.maxAtk),code:"baseMaxAtk"}),this.magicAtk&&e.push({value:this.magicAtk+this.getStrengthenAttr(this.magicAtk),code:"baseMagicAtk"}),this.hp&&e.push({value:this.hp+this.getStrengthenAttr(this.hp),code:"baseHp"}),this.def&&e.push({value:this.def+this.getStrengthenAttr(this.def),code:"baseDef"}),this.magicDef&&e.push({value:this.magicDef+this.getStrengthenAttr(this.magicDef),code:"baseMagicDef"}),this.speed&&e.push({value:this.speed+this.getStrengthenAttr(this.speed),code:"speed"}),this.hit&&e.push({value:this.hit+this.getStrengthenAttr(this.hit),code:"hit"}),this.dodge&&e.push({value:this.dodge+this.getStrengthenAttr(this.dodge),code:"dodge"}),this.crt&&e.push({value:this.crt+this.getStrengthenAttr(this.crt),code:"crt"}),this.crtDamage&&e.push({value:this.crtDamage+this.getStrengthenAttr(this.crtDamage),code:"crtDamage"}),e}}]),e}(),Z=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Slime",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Normal",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;m()(this,t);var s=K(j[e]),n=C[i],l=a-1+n.addLv;l=l>0?l:0,s?(s.hp=s.hp+s.hpI*l,s.minAtk=s.minAtk+s.minAtkI*l,s.maxAtk=s.maxAtk+s.maxAtkI*l,s.def=s.def+s.defI*l,s.lv=a):s={name:"敌人",hp:100,atk:1,def:1,speed:1,hit:50,dodge:0,crt:0,crtDamage:150,hpI:20,atkI:1,defI:1,exp:1,lv:a};var o=g()(this,(t.__proto__||h()(t)).call(this,s));return o.exp=s.exp+s.expI*l,o.exp=o.exp>0?o.exp:1,o.name="["+n.name+"]"+s.name,o.enemyType=e,o.color=n.color,o.suffix=i,o.equips=s.equips||[],o}return k()(t,e),d()(t,[{key:"fallDownEquipment",value:function(){for(var e=F(T[this.suffix]),t=e.reduce(function(e,t){return("number"==typeof e?e:e.value)+t.value}),i=Math.floor(Math.random()*t),a="Inferior",s=0;s<e.length;s++)if((i-=e[s].value)<0){a=e[s].key;break}var n=this.lv-Math.floor(5*Math.random());return n=n>0?n:1,new Y({id:this.equips[Math.floor(Math.random()*this.equips.length)],quality:a,lv:n})}}]),t}(W),ee=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.hp,a=void 0===i?100:i,s=e.lv,n=void 0===s?1:s,l=e.minAtk,r=void 0===l?1:l,u=e.maxAtk,c=void 0===u?5:u,p=e.def,v=void 0===p?1:p,d=e.speed,f=void 0===d?1:d,y=e.hit,k=void 0===y?70:y,D=e.dodge,b=void 0===D?0:D,q=e.crt,x=void 0===q?0:q,A=e.crtDamage,E=void 0===A?150:A,_=e.maxExp,S=void 0===_?100:_,I=e.currExp,M=void 0===I?0:I,C=e.goldCoin,w=void 0===C?0:C,B=e.baseMinAtk,N=void 0===B?1:B,L=e.baseMaxAtk,F=void 0===L?5:L,T=e.baseHp,H=void 0===T?100:T,V=e.baseDef,$=void 0===V?1:V,O=e.baseMagicDef,Q=void 0===O?1:O,U=e.baseMagicAtk,W=void 0===U?1:U,G=e.intervalBase,j=void 0===G?1:G,J=e.extraAtk,z=void 0===J?0:J,K=e.extraHp,X=void 0===K?0:K,Y=e.extraDef,Z=void 0===Y?0:Y,ee=e.extraMagicAtk,te=void 0===ee?0:ee,ie=e.extraMagicDef,ae=void 0===ie?0:ie,se=e.knapsackCapacity,ne=void 0===se?100:se;m()(this,t);var le,oe=g()(this,(t.__proto__||h()(t)).call(this,{hp:a,lv:n,minAtk:r,maxAtk:c,def:v,speed:f,hit:k,dodge:b,crt:x,crtDamage:E}));return oe.maxExp=S,oe.currExp=M,oe.extraAtk=z,oe.extraDef=Z,oe.extraHp=X,oe.extraMagicAtk=te,oe.extraMagicDef=ae,oe.baseMinAtk=N,oe.baseMaxAtk=F,oe.baseDef=$,oe.baseHp=H,oe.baseMagicDef=Q,oe.baseMagicAtk=W,oe.intervalBase=j,oe.calculationBaseAttr(),oe.goldCoin=w,oe.knapsack=[],oe.knapsackCapacity=ne,oe.equips={Weapon:null,Helmet:null,Necklace:null,Clothes:null,Glove:null,Ring:null,Belt:null,Trousers:null,Shoes:null},oe.messageHandles=[],oe.equipTypeFallDownNum=localStorage.getItem("equipTypeFallDownNum")?JSON.parse(localStorage.getItem("equipTypeFallDownNum")):(le={},o()(P).forEach(function(e){le[e]=0}),le),oe.equipQualityFallDownNum=localStorage.getItem("equipQualityFallDownNum")?JSON.parse(localStorage.getItem("equipQualityFallDownNum")):function(){var e={};return o()(R).forEach(function(t){e[t]=0}),e}(),oe.totalGoldCoin=+localStorage.getItem("totalGoldCoin")||0,oe}return k()(t,e),d()(t,[{key:"getExp",value:function(e){for(this.currExp+=e;this.currExp>=this.maxExp;)this.levelUp();this.save()}},{key:"getGoldCoin",value:function(e){this.goldCoin+=e,this.totalGoldCoin+=e,localStorage.setItem("goldCoin",this.goldCoin)}},{key:"pay",value:function(e){this.goldCoin-=e}},{key:"levelUp",value:function(){var e=this;this.lv++,this.currExp-=this.maxExp,this.maxExp=this.lv*this.lv*100,o()($).forEach(function(t){e[t]+=$[t]}),this.calculationBaseAttr(),this.sendMsg("等级提升至 "+this.lv+" 级"),this.save()}},{key:"getEquips",value:function(e,t){var i=this;e.forEach(function(e){i.equipTypeFallDownNum[e.type]++,i.equipQualityFallDownNum[e.quality]++}),localStorage.setItem("equipTypeFallDownNum",u()(this.equipTypeFallDownNum)),localStorage.setItem("equipQualityFallDownNum",u()(this.equipQualityFallDownNum));var a=0,s=0;if(t)if("auto"===t){var n=[];e.forEach(function(e){n.length<i.knapsackCapacity&&i.getCurrEquipPower(e)>i.getCombatPower()?n.push(e):(a+=e.price,s++)}),e=n}else e=e.filter(function(e){return e.type!==t||(a+=e.price,s++,!1)});var l=this.knapsack.concat(e);this.knapsack=l.slice(0,this.knapsackCapacity),l.length>this.knapsackCapacity&&(s+=l.length-this.knapsackCapacity,l.slice(this.knapsackCapacity,l.length).forEach(function(e){a+=e.price}),this.getGoldCoin(a)),s>0&&this.sendMsg("出售 "+s+" 件装备, 共获得 "+a+" 金币"),this.save()}},{key:"calculationBaseAttr",value:function(){this.minAtk=Math.floor(this.baseMinAtk*(100+this.extraAtk)/100),this.maxAtk=Math.floor(this.baseMaxAtk*(100+this.extraAtk)/100),this.def=Math.floor(this.baseDef*(100+this.extraDef)/100),this.magicDef=Math.floor(this.baseMagicDef*(100+this.extraMagicDef)/100),this.magicAtk=Math.floor(this.baseMagicAtk*(100+this.extraMagicAtk)/100),this.hp=Math.floor(this.baseHp*(100+this.extraHp)/100),this.interval=Math.floor(100*this.intervalBase-this.speed)/100}},{key:"equipFn",value:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.equips[e.type]){var a=this.equips[e.type];this.knapsack.splice(this.knapsack.indexOf(e),1,a),a.getBaseInfoCalculation().forEach(function(e){"intervalBase"===e.code?t.intervalBase=1:t[e.code]-=e.value}),a.extraAttr.forEach(function(e){t[e.type.code]-=e.value})}else this.knapsack.splice(this.knapsack.indexOf(e),1);e.getBaseInfoCalculation().forEach(function(e){"intervalBase"===e.code?t.intervalBase=e.value:t[e.code]+=e.value}),e.extraAttr.forEach(function(e){t[e.type.code]+=e.value}),this.calculationBaseAttr(),this.currHp>this.hp&&(this.currHp=this.hp),this.equips[e.type]=e,i&&this.save()}},{key:"unloadEquip",value:function(e){var t=this;this.equips[e]&&(this.knapsack.push(this.equips[e]),this.equips[e].getBaseInfoCalculation().forEach(function(e){"intervalBase"===e.code?t.intervalBase=1:t[e.code]-=e.value}),this.equips[e].extraAttr.forEach(function(e){t[e.type.code]-=e.value}),this.equips[e]=null),this.calculationBaseAttr(),this.currHp>this.hp&&(this.currHp=this.hp),this.save()}},{key:"saleEquip",value:function(e){this.knapsack.splice(this.knapsack.indexOf(e),1),this.save()}},{key:"autoEquip",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=[].concat(this.knapsack);if((i=i.filter(function(t){return e.getCurrEquipPower(t)>e.getCombatPower()})).sort(function(t,i){return e.getCurrEquipPower(i)-e.getCurrEquipPower(t)}),i.length>0){var a={Weapon:null,Helmet:null,Necklace:null,Clothes:null,Glove:null,Ring:null,Belt:null,Trousers:null,Shoes:null};i.forEach(function(e){a[e.type]||(a[e.type]=e)}),o()(a).forEach(function(t){a[t]&&e.equipFn(a[t])}),t<10&&this.autoEquip(++t)}}},{key:"equipBaseSkill",value:function(e){this.baseSkill=e,this.save()}},{key:"unloadBaseSkill",value:function(){this.baseSkill=null,this.save()}},{key:"save",value:function(){var e=K(this);delete e.knapsack,delete e.equips,localStorage.setItem("player",u()(e)),localStorage.setItem("equips",u()(this.equips)),localStorage.setItem("knapsack",u()(this.knapsack)),localStorage.setItem("baseSkill",u()(this.baseSkill))}},{key:"recoveryHp",value:function(e){this.currHp+=e,this.currHp>this.hp&&(this.currHp=this.hp)}},{key:"autoRcoveryHp",value:function(e,t){var i=this;!function a(){i.recoveryHp(Math.floor(e*i.hp/100)),i.currHp<i.hp?setTimeout(a,100):t&&t()}()}},{key:"getCurrEquipPower",value:function(e){var i=new t(this);if(this.equips[e.type]){var a=this.equips[e.type];a.getBaseInfoCalculation().forEach(function(e){"intervalBase"===e.code?i.intervalBase=1:i[e.code]-=e.value}),a.extraAttr.forEach(function(e){i[e.type.code]-=e.value})}e.getBaseInfoCalculation().forEach(function(e){"intervalBase"===e.code?i.intervalBase=e.value:i[e.code]+=e.value}),e.extraAttr.forEach(function(e){i[e.type.code]+=e.value}),i.calculationBaseAttr();var s=i.getCombatPower();return i=null,s}},{key:"getBaseInfo",value:function(){var e=[];return e.push({value:this.goldCoin,name:"金币"}),e.push({value:this.minAtk+" - "+this.maxAtk,name:"攻击"}),e.push({value:this.magicAtk,name:"法强"}),e.push({value:this.hp,name:"生命"}),e.push({value:this.def,name:"物抗"}),e.push({value:this.magicDef,name:"魔抗"}),e.push({value:this.speed+"%",name:"攻击速度"}),e.push({value:this.hit+"%",name:"命中"}),e.push({value:this.dodge+"%",name:"闪避"}),e.push({value:this.crt+"%",name:"暴击率"}),e.push({value:this.crtDamage+"%",name:"暴击伤害"}),e}},{key:"sendMsg",value:function(e){this.messageHandles.forEach(function(t){t&&t(e)})}},{key:"receiveMsg",value:function(e){this.messageHandles.push(e)}}]),t}(W),te=function(){function e(t){var i=t.name,a=void 0===i?"":i,s=t.code,n=void 0===s?"":s,l=t.damageType,o=void 0===l?Q.Physical:l,r=t.baseDamage,u=void 0===r?0:r,c=t.addition,h=void 0===c?100:c;m()(this,e),this.code=n,this.name=a,this.damageType=o,this.baseDamage=u,this.addition=h}return d()(e,[{key:"getDamage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.baseDamage+Math.floor(e*this.addition/100)}},{key:"getDescribe",value:function(){return"对单个敌人造成 "+this.addition+" % 的 "+U[this.damageType]}}]),e}(),ie={props:{width:{type:String,default:"4rem"},max:{type:Number,default:0},curr:{type:Number,default:0},type:{type:String,default:"hp"}},computed:{style:function(){return{width:this.width}},currStyle:function(){return{width:(this.max>0?this.curr/this.max*100:0).toFixed(2)+"%"}}}},ae={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hp-bar",style:e.style},[i("div",{staticClass:"curr-progress",class:{exp:"exp"===e.type},style:e.currStyle}),e._v(" "),i("div",{staticClass:"bp-info"},[e._v(e._s(e.curr)+" / "+e._s(e.max))])])},staticRenderFns:[]};var se=i("C7Lr")(ie,ae,!1,function(e){i("WnY5")},"data-v-55aca540",null).exports,ne={data:function(){return{}},props:{player:Object},components:{BeHpBar:se}},le={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"player-info"},[i("dl",[i("span",[e._v("等级："+e._s(e.player.lv))]),i("span",[e._v("金币："+e._s(e.player.goldCoin))])]),e._v(" "),i("dl",[i("label",{attrs:{for:""}},[e._v("HP：")]),i("be-hp-bar",{attrs:{curr:e.player.currHp,max:e.player.hp}})],1),e._v(" "),i("dl",[i("label",{attrs:{for:""}},[e._v("EXP：")]),i("be-hp-bar",{attrs:{curr:e.player.currExp,max:e.player.maxExp,type:"exp"}})],1)])},staticRenderFns:[]};var oe=i("C7Lr")(ne,le,!1,function(e){i("hUHP")},"data-v-ef3649be",null).exports,re={props:{enemys:Array},components:{BeHpBar:se}},ue={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"enemy-info"},e._l(e.enemys,function(t,a){return i("dl",{key:a},[i("label",{style:"color:"+t.color},[e._v(e._s(t.name)+"：")]),e._v(" "),i("be-hp-bar",{attrs:{curr:t.currHp,max:t.hp}})],1)}))},staticRenderFns:[]};var ce=i("C7Lr")(re,ue,!1,function(e){i("SsJa")},"data-v-75050cc1",null).exports,he={props:{msgList:Array}},pe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fight-info"},[i("ul",e._l(e.msgList,function(t,a){return i("li",{domProps:{innerHTML:e._s(t)}})}))])},staticRenderFns:[]};var me=i("C7Lr")(he,pe,!1,function(e){i("7njf")},"data-v-3cf52952",null).exports,ve=i("aA9S"),de=i.n(ve),fe=i("MgeX"),ge=i.n(fe),ye={props:{equip:Object,btnType:{type:String,default:"equip"},powerUp:String},methods:{equipFn:function(e){e.stopPropagation(),this.$emit("equip")},unloadEquip:function(e){e.stopPropagation(),this.$emit("unload")},strengthen:function(e){e.stopPropagation(),this.$emit("strengthen",this.equip)},burnish:function(e){e.stopPropagation(),this.$emit("burnish",this.equip)},sale:function(e){e.stopPropagation(),this.$emit("sale",this.equip)}}},ke={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"equip-detail"},[e.equip?i("div",{staticClass:"base-info"},[i("dl",[i("span",{style:"color: "+e.equip.getColor()},[e._v(e._s(e.equip.getName())+" (lv: "+e._s(e.equip.lv)+")")]),e._v(" "),e.equip.strengthenLv>0?i("span",{staticClass:"red-text"},[e._v("+"+e._s(e.equip.strengthenLv))]):e._e()]),e._v(" "),e.powerUp?i("dl",[e._v("\n            战斗力增幅：\n            "),[+e.powerUp>0?i("span",{staticClass:"red-text"},[e._v(e._s(e.powerUp))]):i("span",{staticClass:"green-text"},[e._v(e._s(e.powerUp))])]],2):e._e(),e._v(" "),e._l(e.equip.getBaseInfo(),function(t,a){return i("dl",{key:a},[e._v("\n            "+e._s(t.name)+"："+e._s(t.value)+" "),t.round?i("span",{staticClass:"round"},[e._v("("+e._s(t.round.join(" - "))+")")]):e._e(),e._v(" "),e.equip.strengthenLv>0?i("span",{staticClass:"red-text"},[e._v("("+e._s(t.strengthenAttr)+")")]):e._e()])})],2):e._e(),e._v(" "),e.equip&&e.equip.extraAttr&&e.equip.extraAttr.length>0?i("div",{staticClass:"extra-info"},e._l(e.equip.extraAttr,function(t,a){return i("dl",{key:a},[e._v(e._s(t.type.name)+"："+e._s(t.value+t.type.suffix))])})):e._e(),e._v(" "),i("button",{on:{click:function(t){e.strengthen(t)}}},[e._v("强化")]),e._v(" "),i("button",{on:{click:function(t){e.burnish(t)}}},[e._v("打磨")]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:"equip"===e.btnType,expression:"btnType === 'equip'"}],on:{click:function(t){e.equipFn(t)}}},[e._v("装备")]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:"unload"===e.btnType,expression:"btnType === 'unload'"}],on:{click:function(t){e.unloadEquip(t)}}},[e._v("卸下")]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.equip&&"equip"===e.btnType&&!e.equip.lockFlag,expression:"equip && btnType === 'equip' && !equip.lockFlag"}],on:{click:function(t){e.sale(t)}}},[e._v("出售")])])},staticRenderFns:[]};var De=i("C7Lr")(ye,ke,!1,function(e){i("57oG")},"data-v-c0d4c054",null).exports,be={data:function(){return{detailVisible:!1,equip:null,btnType:"equip",currEquip:null,powerUp:"",multSaleVisible:!1,equipQualityList:ge()(K(R)).map(function(e){return de()(e,{value:!1})}),EquipType:P}},props:{player:Object,visible:{type:Boolean,default:!1}},inject:["log"],methods:{showEquipDetail:function(e,t){if("equip"===t){this.currEquip=this.player.equips[e.type];var i=this.player.getCurrEquipPower(e)-this.player.getCombatPower();this.powerUp=i>0?"+"+i:""+i}else this.currEquip=null,this.powerUp="";this.detailVisible=!0,this.equip=e,this.btnType=t},closeDetail:function(){this.detailVisible=!1},close:function(){this.$emit("update:visible",!1)},equipFn:function(e){this.player.equipFn(e),this.detailVisible=!1},unloadEquip:function(e){this.player.unloadEquip(e),this.detailVisible=!1},sale:function(e){this.detailVisible=!1,e.lockFlag||(this.player.saleEquip(e),this.player.getGoldCoin(e.price))},closeMultSale:function(){this.multSaleVisible=!1},showMultSale:function(){this.multSaleVisible=!0},stopProp:function(e){e.stopPropagation()},multSale:function(){var e=this,t=this.equipQualityList.filter(function(e){return e.value}).map(function(e){return e.code});t.length>0&&this.player.knapsack.filter(function(e){return t.indexOf(e.quality)>-1}).forEach(function(t){e.sale(t)});this.closeMultSale()},allSale:function(){var e=this;[].concat(this.player.knapsack).forEach(function(t){e.sale(t)}),this.closeMultSale()},intelligenceSale:function(){var e=this;this.player.knapsack.filter(function(t){return e.player.getCurrEquipPower(t)<e.player.getCombatPower()}).forEach(function(t){e.sale(t)}),this.closeMultSale()},strengthen:function(e){var t=e.getStrengthenPrice();t<=this.player.goldCoin?(this.player.pay(t),this.unloadEquip(e.type),e.strengthen()?(this.log("强化成功"),this.$message({message:"强化成功"})):(this.log("强化失败"),this.$message({message:"强化失败"})),this.equipFn(e)):(this.log("金币不足"),this.$message({message:"金币不足"}))},burnish:function(e){var t=e.getStrengthenPrice();t<=this.player.goldCoin?(this.player.pay(t),this.unloadEquip(e.type),e.burnish(),this.log("打磨成功"),this.$message({message:"打磨成功"}),this.equipFn(e)):(this.log("金币不足"),this.$message({message:"金币不足"}))},autoEquip:function(){this.player.autoEquip()}},components:{BeEquipDetail:De}},qe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"knapsack"},[i("div",{staticClass:"container"},[i("div",{staticClass:"already-equipped"},e._l(Object.keys(e.player.equips),function(t){return i("dl",{key:t},[e.player.equips[t]?[i("span",{style:"color:"+e.player.equips[t].getColor(),on:{click:function(i){e.showEquipDetail(e.player.equips[t],"unload")}}},[e._v(e._s(e.player.equips[t].getName())+" (lv: "+e._s(e.player.equips[t].lv)+")")]),e._v(" "),i("button",{on:{click:function(i){e.unloadEquip(t)}}},[e._v("卸下")])]:i("span",[e._v("未装备"+e._s(e.EquipType[t].name))])],2)})),e._v(" "),i("div",{staticClass:"not-equip"},e._l(e.player.knapsack,function(t,a){return i("dl",{key:a},[i("span",{style:"color:"+t.getColor(),on:{click:function(i){e.showEquipDetail(t,"equip")}}},[e._v(e._s(t.getName())+" (lv: "+e._s(t.lv)+")")]),e._v(" "),e.player.getCurrEquipPower(t)>e.player.getCombatPower()?i("span",{staticClass:"red-text"},[e._v("+"+e._s(e.player.getCurrEquipPower(t)-e.player.getCombatPower()))]):i("span",{staticClass:"green-text"},[e._v(e._s(e.player.getCurrEquipPower(t)-e.player.getCombatPower()))]),e._v(" "),i("div",{staticClass:"btn-group"},[i("button",{on:{click:function(i){e.equipFn(t)}}},[e._v("装备")]),e._v(" "),t.lockFlag?i("button",{on:{click:function(e){t.unlock()}}},[e._v("解锁")]):i("button",{on:{click:function(e){t.lock()}}},[e._v("锁上")]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:!t.lockFlag,expression:"!equip.lockFlag"}],on:{click:function(i){e.sale(t)}}},[e._v("出售")])])])})),e._v(" "),i("div",{staticClass:"knapsack-bottom clearfix"},[i("div",{staticClass:"fl"},[i("button",{on:{click:e.showMultSale}},[e._v("批量出售")]),e._v(" "),i("button",{on:{click:e.autoEquip}},[e._v("一键装备")])]),e._v(" "),i("div",{staticClass:"fr"},[i("button",{on:{click:e.close}},[e._v("关闭")])])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.detailVisible,expression:"detailVisible"}],staticClass:"equip-info",on:{click:e.closeDetail}},[e.currEquip?i("be-equip-detail",{staticClass:"curr-equip",attrs:{btnType:"unload",equip:e.currEquip},on:{unload:function(t){e.unloadEquip(e.equip.type)},strengthen:e.strengthen,burnish:e.burnish}}):e._e(),e._v(" "),i("be-equip-detail",{attrs:{equip:e.equip,btnType:e.btnType,powerUp:e.powerUp},on:{equip:function(t){e.equipFn(e.equip)},unload:function(t){e.unloadEquip(e.equip.type)},strengthen:e.strengthen,burnish:e.burnish,sale:e.sale}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.multSaleVisible,expression:"multSaleVisible"}],staticClass:"equip-info",on:{click:e.closeMultSale}},[i("div",{staticClass:"mult-sale-container",on:{click:function(t){e.stopProp(t)}}},[e._l(e.equipQualityList,function(t){return[i("dl",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"equipQuality.value"}],key:t.code,attrs:{type:"checkbox",id:"multSale"+t.code},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{change:function(i){var a=t.value,s=i.target,n=!!s.checked;if(Array.isArray(a)){var l=e._i(a,null);s.checked?l<0&&e.$set(t,"value",a.concat([null])):l>-1&&e.$set(t,"value",a.slice(0,l).concat(a.slice(l+1)))}else e.$set(t,"value",n)}}}),i("label",{attrs:{for:"multSale"+t.code}},[e._v(e._s(t.name))])])]}),e._v(" "),i("div",{staticClass:"sale-btn-group clearfix"},[i("button",{on:{click:e.multSale}},[e._v("批量出售")]),e._v(" "),i("button",{on:{click:e.allSale}},[e._v("全部出售")]),e._v(" "),i("button",{on:{click:e.intelligenceSale}},[e._v("智能出售")]),e._v(" "),i("button",{on:{click:e.closeMultSale}},[e._v("关闭")])])],2)])])])},staticRenderFns:[]};var xe=i("C7Lr")(be,qe,!1,function(e){i("aTWX")},"data-v-5aadec76",null).exports,Ae={props:{player:Object,visible:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("update:visible",!1)}}},Ee={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"player-attr"},[i("div",{staticClass:"base-info"},[i("dl",[e._v("等级："+e._s(e.player.lv))]),e._v(" "),i("dl",[e._v("战斗力："+e._s(e.player.getCombatPower()))]),e._v(" "),e._l(e.player.getBaseInfo(),function(t,a){return i("dl",{key:a},[e._v(e._s(t.name)+"："+e._s(t.value))])}),e._v(" "),i("button",{staticClass:"btn",on:{click:e.close}},[e._v("关闭")])],2)])},staticRenderFns:[]};var _e=i("C7Lr")(Ae,Ee,!1,function(e){i("JzUl")},"data-v-b413428c",null).exports,Se={data:function(){return{saleEquipRuleVal:"",saleEquipRuleList:[{code:"auto",name:"智能",color:x},{code:R.Excellent.code,name:R.Excellent.name+"以下",color:R.Excellent.color},{code:R.Polish.code,name:R.Polish.name+"以下",color:R.Polish.color},{code:R.Rare.code,name:R.Rare.name+"以下",color:R.Rare.color},{code:R.Epic.code,name:R.Epic.name+"以下",color:R.Epic.color},{code:R.Legend.code,name:R.Legend.name+"以下",color:R.Legend.color},{code:R.Myth.code,name:R.Myth.name+"以下",color:R.Myth.color}]}},props:{visible:Boolean,saleEquipRule:String},methods:{save:function(){this.$emit("update:saleEquipRule",this.saleEquipRuleVal),localStorage.setItem("saleEquipRule",this.saleEquipRuleVal)},close:function(){this.$emit("update:visible",!1)},saleEquipRuleClick:function(e){this.saleEquipRuleVal!==e?this.saleEquipRuleVal=e:this.saleEquipRuleVal=""}},watch:{visible:function(){this.visible&&(this.saleEquipRuleVal=this.saleEquipRule)}},created:function(){this.saleEquipRuleVal=this.saleEquipRule}},Ie={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"setting"},[i("div",{staticClass:"container"},[i("div",{staticClass:"main"},[i("div",{staticClass:"sale-rule-container"},[e._l(e.saleEquipRuleList,function(t){return i("dl",[i("input",{key:t.code,attrs:{type:"checkbox",id:"saleRule"+t.code,name:"saleEquipRule"},domProps:{checked:t.code===e.saleEquipRuleVal,value:t.code},on:{click:function(i){e.saleEquipRuleClick(t.code)}}}),e._v(" "),i("label",{style:"color: "+t.color,attrs:{for:"saleRule"+t.code}},[e._v(e._s(t.name))])])}),e._v(" "),e._m(0)],2)]),e._v(" "),i("div",{staticClass:"setting-bottom clearfix"},[i("div",{staticClass:"fr"},[i("button",{on:{click:e.save}},[e._v("保存")]),e._v(" "),i("button",{on:{click:e.close}},[e._v("关闭")])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("button",[this._v("保存")])])}]};var Me=i("C7Lr")(Se,Ie,!1,function(e){i("FDfl")},"data-v-06b7bc5f",null).exports,Ce={Slamming:{code:"Slamming",name:"猛击",baseDamage:0,addition:100,damageType:Q.Physical},ArcaneMissiles:{code:"ArcaneMissiles",name:"奥术飞弹",baseDamage:0,addition:100,damageType:Q.Magic}},we={data:function(){return{detailVisible:!1,skill:null,baseSkills:[]}},props:{player:Object,visible:{type:Boolean,default:!1}},inject:["log"],methods:{showSkillDetail:function(e){this.detailVisible=!0,this.skill=e},closeDetail:function(){this.detailVisible=!1},close:function(){this.$emit("update:visible",!1)},equipBaseSkill:function(e){this.player.equipBaseSkill(e),this.detailVisible=!1},unloadBaseSkill:function(){this.player.unloadBaseSkill(),this.detailVisible=!1},stopProp:function(e){e.stopPropagation()}},components:{BeEquipDetail:De},created:function(){this.baseSkills=o()(Ce).map(function(e){return new te(Ce[e])})}},Be={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"knapsack"},[i("div",{staticClass:"container"},[i("div",{staticClass:"already-equipped"},[i("dl",[e.player.baseSkill?[i("span",{on:{click:function(t){e.showSkillDetail(e.player.baseSkill)}}},[e._v(e._s(e.player.baseSkill.name))]),e._v(" "),i("button",{on:{click:function(t){e.unloadBaseSkill()}}},[e._v("卸下")])]:i("span",[e._v("未装备技能")])],2)]),e._v(" "),i("div",{staticClass:"not-equip"},[e._l(e.baseSkills,function(t,a){return[e.player.baseSkill&&t.code===e.player.baseSkill.code?e._e():i("dl",{key:a},[i("span",{on:{click:function(i){e.showSkillDetail(t)}}},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"btn-group"},[i("button",{on:{click:function(i){e.equipBaseSkill(t)}}},[e._v("装备")])])])]})],2),e._v(" "),i("div",{staticClass:"knapsack-bottom clearfix"},[i("div",{staticClass:"fr"},[i("button",{on:{click:e.close}},[e._v("关闭")])])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.detailVisible,expression:"detailVisible"}],staticClass:"equip-info",on:{click:e.closeDetail}},[i("div",{staticClass:"skill-detail"},[e._v("\n               "+e._s(e.skill&&e.skill.getDescribe())+"\n           ")])])])])},staticRenderFns:[]};var Ne=null;var Le={name:"App",data:function(){return{player:null,enemys:[],gameSpeed:10,recoverySpeed:2,autoFightFlag:!1,inBattleFlag:!1,knapsackVisible:!1,playerAttrVisible:!1,settingVisible:!1,msgList:[],enemyLv:1,enemyNum:0,enemyNumMax:10,enemyStos:[],playerSto:null,onHookEnemyLv:"Puniness",onHookProfitMultipleRate:1,saleEquipRule:"",killEnemySuffixNum:{},killEnemyTypeNum:{},maxEnemyLv:1,simulationVisible:!1,skillVisible:!1,env:"production"}},methods:{clearSto:function(){clearTimeout(this.playerSto),this.enemyStos.forEach(function(e){clearTimeout(e)})},fight:function(){var e=this;this.inBattleFlag=!0;var t=0;this.playerSto=setTimeout(function i(){var a=e.player.attack(e.enemys[t]);a.msg&&e.log(a.msg),0===a.currHp?++t<e.enemys.length?e.playerSto=setTimeout(i,1e3*e.player.interval/e.gameSpeed):(e.clearSto(),e.victory()):e.playerSto=setTimeout(i,1e3*e.player.interval/e.gameSpeed)},1e3*this.player.interval/this.gameSpeed);this.enemys.forEach(function(t,i){e.enemyStos[i]=setTimeout(function(){!function t(i){var a=e.enemys[i].attack(e.player);a.msg&&e.log(a.msg),0===a.currHp?(e.clearSto(),e.loss()):(clearTimeout(e.enemyStos[i]),e.enemyStos[i]=setTimeout(function(){t(i)},1e3*e.enemys[i].interval/e.gameSpeed))}(i)},1e3*t.interval/e.gameSpeed)})},fallDownEquipment:function(){var e=[];this.enemys.forEach(function(t){e.push(t.fallDownEquipment())}),this.log("获得 "+e.map(function(e){return'<span style="color: '+e.equipQuality.color+'">'+e.getName()+"</span>"}).join("、")),this.player.getEquips(e,this.saleEquipRule)},getExp:function(){var e=0;this.enemys.forEach(function(t){e+=t.exp}),this.player.getExp(e)},saveTime:function(){localStorage.setItem("saveTime",(new Date).getTime())},loss:function(){var e=this;this.saveTime(),this.log("战斗失败"),this.enemyNum>0?this.enemyNum--:this.enemyLv>1?(this.enemyLv--,this.enemyNum=this.enemyNumMax-1):(this.enemyLv=1,this.enemyNum=0),localStorage.setItem("enemyLv",this.enemyLv),localStorage.setItem("enemyNum",this.enemyNum),this.player.autoRcoveryHp(this.recoverySpeed,function(){e.createEnemys(),e.inBattleFlag=!1})},victory:function(){var e=this;this.saveTime(),this.log("战斗胜利"),this.fallDownEquipment(),this.getExp(),this.enemyNum<this.enemyNumMax-1?this.enemyNum++:(this.enemyLv++,this.enemyNum=0,this.enemyLv>this.maxEnemyLv&&(this.maxEnemyLv=this.enemyLv,localStorage.setItem("maxEnemyLv",this.maxEnemyLv))),this.enemys.forEach(function(t){e.killEnemySuffixNum[t.suffix]++,e.killEnemyTypeNum[t.suffix]++}),localStorage.setItem("killEnemySuffixNum",u()(this.killEnemySuffixNum)),localStorage.setItem("killEnemyTypeNum",u()(this.killEnemyTypeNum)),localStorage.setItem("enemyLv",this.enemyLv),localStorage.setItem("enemyNum",this.enemyNum),this.player.autoRcoveryHp(this.recoverySpeed,function(){e.createEnemys(),e.inBattleFlag=!1})},createEnemys:function(){this.enemys=[];for(var e=F(this.enemyNum===this.enemyNumMax-1?B:w),t=e.reduce(function(e,t){return("number"==typeof e?e:e.value)+t.value}),i=Math.floor(Math.random()*t),a=1,s=0;s<e.length;s++)if((i-=e[s].value)<0){a=+e[s].key;break}for(var n=0;n<a;n++)this.createEnemy();this.autoFightFlag&&this.fight()},createEnemy:function(){for(var e=F(this.enemyNum===this.enemyNumMax-1?L:N),t=e.reduce(function(e,t){return("number"==typeof e?e:e.value)+t.value}),i=Math.floor(Math.random()*t),a=o()(j),s=0;s<e.length;s++)if((i-=e[s].value)<0){this.enemys.push(new Z(a[~~(Math.random()*a.length)],e[s].key,this.enemyLv));break}},showKnapsack:function(){this.knapsackVisible=!0},showPlayerAttr:function(){this.playerAttrVisible=!0},showSkill:function(){this.skillVisible=!0},changeAutoFight:function(){this.autoFightFlag=!this.autoFightFlag,this.autoFightFlag&&!this.inBattleFlag&&this.fight(),localStorage.setItem("autoFightFlag",this.autoFightFlag)},log:function(e){this.msgList.push(e)},initGame:function(){var e;localStorage.clear(),this.clearSto(),this.enemyLv=1,this.enemyNum=0,this.player=new ee,this.createEnemys(),this.saleEquipRule="",this.killEnemySuffixNum=(e={},o()(C).forEach(function(t){e[t]=0}),e),this.killEnemyTypeNum=function(){var e={};return o()(EquipData).forEach(function(t){e[t]=0}),e},this.maxEnemyLv=1},calculationOnHookProfit:function(){var e=(new Date).getTime(),t=+localStorage.getItem("saveTime")||e;localStorage.setItem("saveTime",e);for(var i=new Z("Slime",this.onHookEnemyLv,this.enemyLv),a=this.player.getOnHookDamage(i),s=i.getOnHookDamage(this.player),n=2e3*Math.floor(i.hp/a)/this.onHookProfitMultipleRate*this.player.interval,l=Math.floor(n/i.interval)/2e3*s,o=Math.floor((l>this.player.hp?100:l/this.player.hp*100)/this.recoverySpeed*1e3),r=Math.floor((e-t)/(n+o)),u=[],c=0,h=0;h<r;h++)u.push(i.fallDownEquipment()),c+=i.exp;this.player.getEquips(u,this.saleEquipRule),this.player.getExp(c),this.log("挂机 "+function(e){if((e=Math.floor(e/1e3))<60)return e+" 秒";if(e<3600)return Math.floor(e/60)+" 分 "+e%60+" 秒";if(e<86400){var t=Math.floor(e/3600);return t+" 小时 "+Math.floor((e-3600*t)/60)+" 分 "+e%60+" 秒"}if(e<86400){var i=Math.floor(e/3600);return i+" 小时 "+Math.floor((e-3600*i)/60)+" 分 "+e%60+" 秒"}if(e<31536e3){var a=Math.floor(e/86400),s=Math.floor((e-86400*a)/3600);return a+" 天 "+s+" 小时 "+Math.floor((e-3600*s-86400*a)/60)+" 分 "+e%60+" 秒"}var n=Math.floor(e/86400/365),l=Math.floor((e-86400*n*365)/86400),o=Math.floor((e-86400*l-86400*n*365)/3600);return n+" 年 "+l+" 天 "+o+" 小时 "+Math.floor((e-3600*o-86400*l-86400*n*365)/60)+" 分 "+e%60+" 秒"}(e-t)+", 共获得 "+u.length+" 件装备, 经验 "+c)},showSetting:function(){this.settingVisible=!0},simulationFight:function(){this.simulationVisible=!0}},provide:function(){return{log:this.log}},components:{BePlayerInfo:oe,BeEnemyInfo:ce,BeFightInfo:me,BeKnapsack:xe,BePlayerAttr:_e,BeSetting:Me,BeSimulationFight:Ne,BeSkillInfo:i("C7Lr")(we,Be,!1,function(e){i("gNqD")},"data-v-0d4d4872",null).exports},mounted:function(){this.calculationOnHookProfit(),this.createEnemys()},created:function(){var e,t=this,i=function(){var e=(document.body&&document.body.clientWidth||document.getElementsByTagName("html")[0].offsetWidth)/750;e=e>1?1:e<.427?.427:e,document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+100*e+"px !important")};if(i(),window.addEventListener("resize",function(){i()},!1),localStorage.getItem("player")?this.player=new ee(JSON.parse(localStorage.getItem("player"))):this.player=new ee,localStorage.getItem("equips")){var a=JSON.parse(localStorage.getItem("equips"));o()(a).forEach(function(e){if(a[e]){var t=K(a[e]);t.accordingToId=!1,a[e]=new Y(t)}}),this.player.equips=a}if(localStorage.getItem("knapsack")){var s=JSON.parse(localStorage.getItem("knapsack")).map(function(e){return e.accordingToId=!1,new Y(e)});this.player.knapsack=s}if(localStorage.getItem("baseSkill")&&"null"!==localStorage.getItem("baseSkill")){var n=JSON.parse(localStorage.getItem("baseSkill"));this.player.baseSkill=new te(n)}this.enemyLv=localStorage.getItem("enemyLv")?+localStorage.getItem("enemyLv"):1,this.enemyNum=localStorage.getItem("enemyNum")?+localStorage.getItem("enemyNum"):0,this.player.receiveMsg(function(e){t.log(e)}),this.saleEquipRule=localStorage.getItem("saleEquipRule")||"",this.killEnemySuffixNum=localStorage.getItem("killEnemySuffixNum")?JSON.parse(localStorage.getItem("killEnemySuffixNum")):(e={},o()(C).forEach(function(t){e[t]=0}),e),this.killEnemyTypeNum=localStorage.getItem("killEnemyTypeNum")?JSON.parse(localStorage.getItem("killEnemyTypeNum")):function(){var e={};return o()(j).forEach(function(t){e[t]=0}),e}(),this.maxEnemyLv=localStorage.getItem("maxEnemyLv")?+localStorage.getItem("maxEnemyLv"):1}},Fe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("be-player-info",{attrs:{player:e.player}}),e._v(" "),i("be-enemy-info",{attrs:{enemys:e.enemys}}),e._v(" "),i("div",{staticClass:"button-group"},[i("div",{staticClass:"fl button-group-left"},[i("button",{on:{click:e.showKnapsack}},[e._v("背包")]),e._v(" "),i("button",{on:{click:e.showPlayerAttr}},[e._v("属性")]),e._v(" "),i("button",{on:{click:e.showSkill}},[e._v("技能")]),e._v(" "),i("button",{on:{click:e.changeAutoFight}},[e._v(e._s(e.autoFightFlag?"关闭自动":"自动战斗"))]),e._v(" "),i("button",{on:{click:e.initGame}},[e._v("重新开始")]),e._v(" "),"development"===e.env?i("button",{on:{click:e.simulationFight}},[e._v("模拟战斗")]):e._e(),e._v(" "),i("button",{on:{click:e.showSetting}},[e._v("设置")])]),e._v(" "),i("div",{staticClass:"fr button-group-right"},[e._v("\n            怪物等级："+e._s(e.enemyLv)),i("br"),e._v("\n            怪物进度："+e._s(e.enemyNum)+" / "+e._s(e.enemyNumMax)+"\n        ")])]),e._v(" "),i("be-fight-info",{attrs:{msgList:e.msgList}}),e._v(" "),i("be-knapsack",{attrs:{player:e.player,visible:e.knapsackVisible},on:{"update:visible":function(t){e.knapsackVisible=t}}}),e._v(" "),i("be-player-attr",{attrs:{player:e.player,visible:e.playerAttrVisible},on:{"update:visible":function(t){e.playerAttrVisible=t}}}),e._v(" "),i("be-setting",{attrs:{visible:e.settingVisible,saleEquipRule:e.saleEquipRule},on:{"update:visible":function(t){e.settingVisible=t},"update:saleEquipRule":function(t){e.saleEquipRule=t}}}),e._v(" "),i("be-skill-info",{attrs:{player:e.player,visible:e.skillVisible},on:{"update:visible":function(t){e.skillVisible=t}}}),e._v(" "),"development"===e.env?[i("be-simulation-fight",{attrs:{visible:e.simulationVisible},on:{"update:visible":function(t){e.simulationVisible=t}}})]:e._e()],2)},staticRenderFns:[]};var Pe=i("C7Lr")(Le,Fe,!1,function(e){i("48pL")},null,null).exports,Re=i("t+b9"),Te=i.n(Re),He={props:{message:String}},Ve={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"message"},[this._v(this._s(this.message))])},staticRenderFns:[]};var $e,Oe,Qe=i("C7Lr")(He,Ve,!1,function(e){i("BNfu")},"data-v-dc495edc",null).exports;n.default.config.productionTip=!1,n.default.use(Te.a),$e=n.default,Oe=$e.extend(Qe),$e.prototype.$message=function(e){var t=new Oe({propsData:e});document.body.appendChild(t.$mount().$el),setTimeout(function(){document.body.removeChild(t.$mount().$el),t.$destroy()},e.time||3e3)},new n.default({el:"#app",components:{App:Pe},template:"<App/>"})},SsJa:function(e,t){},WnY5:function(e,t){},aTWX:function(e,t){},gNqD:function(e,t){},hUHP:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f31bd30009ed17b32d7b.js.map