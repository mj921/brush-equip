webpackJsonp([1],{"7njf":function(t,e){},IQxh:function(t,e){},JzUl:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=i("IvJb"),s=i("ZLEe"),r=i.n(s),o=i("Yarq"),l=i.n(o),u=i("AA3o"),c=i.n(u),h=i("xSur"),p=i.n(h),d=i("UzKs"),v=i.n(d),m=i("Y7Ml"),f=i.n(m),g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.name,a=void 0===i?"你":i,n=e.hp,s=void 0===n?100:n,r=e.lv,o=void 0===r?1:r,l=e.minAtk,u=void 0===l?1:l,h=e.maxAtk,p=void 0===h?5:h,d=e.def,v=void 0===d?1:d,m=e.speed,f=void 0===m?0:m,g=e.hit,y=void 0===g?50:g,k=e.dodge,q=void 0===k?0:k,x=e.crt,A=void 0===x?0:x,_=e.crtDamage,b=void 0===_?150:_;c()(this,t),this.name=a,this.hp=s,this.currHp=s,this.lv=o,this.minAtk=u,this.maxAtk=p,this.def=v,this.speed=f,this.intervalBase=1,this.interval=Math.floor(100*this.intervalBase-this.speed)/100,this.hit=y,this.dodge=q,this.crt=A,this.crtDamage=b}return p()(t,[{key:"getDamageRemission",value:function(){return this.def/(this.def+100*this.lv)}},{key:"attack",value:function(t){var e={};if(100*Math.random()<this.hit&&100*Math.random()>=t.dodge){var i=(Math.random()*(this.maxAtk-this.minAtk)+this.minAtk)*(1-t.getDamageRemission()),a=!1;100*Math.random()<this.crt&&(i*=this.crtDamage/100,a=!0),i=i>1?Math.floor(i):1,t.currHp>i?t.currHp-=i:t.currHp=0,e.msg="<span style='color: "+(this.color||"#F67712")+";'>"+this.name+"</span> 对 <span style='color: "+(t.color||"#F67712")+";'>"+t.name+"</span> 造成 <span style='color: #F32020;"+(a?"font-size: 1.4em;":"")+"'>"+i+"</span> 伤害"}return e.currHp=t.currHp,e}},{key:"toString",value:function(){return"hp: "+this.hp+", lv: "+this.lv}},{key:"getCombatPower",value:function(){return Math.floor((this.maxAtk+this.minAtk)/2/this.interval*(1+this.crt*this.crtDamage/1e4)*this.hit/100*10+this.hp/(1-this.getDamageRemission())/(100-this.dodge)*5*10)}}]),t}(),y=i("a3Yh"),k=i.n(y),q="#bbb",x="#000",A="#72E729",_="#15A5F3",b="#B828F4",E="#F8FA20",D="#F32020",S="#F67712",I={Puniness:{color:q,num:0,name:"弱小",addLv:-2},Normal:{color:x,num:1,name:"普通",addLv:0},Variation:{color:A,num:2,name:"变异",addLv:1},Elites:{color:_,num:3,name:"精英",addLv:2},Head:{color:b,num:4,name:"头目",addLv:4},Boss:{color:E,num:5,name:"首领",addLv:8},VariationBoss:{color:D,num:6,name:"变异首领",addLv:12},ElitesBoss:{color:S,num:7,name:"精英首领",addLv:16}},C={1:725,2:250,3:20,4:4,5:1},w={Puniness:1e3,Normal:7844,Variation:1e3,Elites:100,Head:50,Boss:3,VariationBoss:2,ElitesBoss:1},N=function(t){var e=[];return r()(t).forEach(function(i){e.push({key:i,value:t[i]})}),e},M={Helmet:{name:"头盔",code:"Helmet"},Clothes:{name:"衣服",code:"Clothes"},Belt:{name:"腰带",code:"Belt"},Glove:{name:"手套",code:"Glove"},Shoes:{name:"鞋子",code:"Shoes"},Weapon:{name:"武器",code:"Weapon"},Necklace:{name:"项链",code:"Necklace"},Ring:{name:"戒指",code:"Ring"},Trousers:{name:"裤子",code:"Trousers"}},L={Inferior:{name:"劣质",color:q,additionalAttrNum:0,code:"Inferior",attrAddition:.8},Normal:{name:"普通",color:x,additionalAttrNum:0,code:"Normal",attrAddition:1},Excellent:{name:"优秀",color:A,additionalAttrNum:1,code:"Excellent",attrAddition:1.1},Polish:{name:"精良",color:_,additionalAttrNum:2,code:"Polish",attrAddition:1.2},Rare:{name:"稀有",color:b,additionalAttrNum:3,code:"Rare",attrAddition:1.3},Epic:{name:"史诗",color:E,additionalAttrNum:4,code:"Epic",attrAddition:1.5},Legend:{name:"传说",color:D,additionalAttrNum:5,code:"Legend",attrAddition:1.7},Myth:{name:"神话",color:S,additionalAttrNum:6,code:"Myth",attrAddition:2}},F={Puniness:{Inferior:7e3,Normal:2900,Excellent:100},Normal:{Inferior:1900,Normal:7e3,Excellent:1e3,Polish:100},Variation:{Inferior:500,Normal:6e3,Excellent:2400,Polish:1e3,Rare:100},Elites:{Inferior:100,Normal:5e3,Excellent:3e3,Polish:1e3,Rare:800,Epic:100},Head:{Inferior:100,Normal:4e3,Excellent:3400,Polish:1300,Rare:1e3,Epic:199,Legend:1},Boss:{Inferior:1,Normal:4e3,Excellent:3400,Polish:1300,Rare:1038,Epic:250,Legend:10,Myth:1},VariationBoss:{Inferior:1,Normal:3e3,Excellent:4384,Polish:1300,Rare:1e3,Epic:260,Legend:50,Myth:5},ElitesBoss:{Inferior:1,Normal:3e3,Excellent:4089,Polish:1500,Rare:1e3,Epic:300,Legend:100,Myth:10}},B={MinAtk:{name:"最小攻击",suffix:"",code:"minAtk"},MaxAtk:{name:"最大攻击",suffix:"",code:"maxAtk"},Hp:{name:"生命",suffix:"",code:"hp"},Def:{name:"防御",suffix:"",code:"def"},BaseMinAtk:{name:"基础最小攻击",suffix:"",code:"baseMinAtk"},BaseMaxAtk:{name:"基础最大攻击",suffix:"",code:"baseMaxAtk"},BaseHp:{name:"基础生命",suffix:"",code:"baseHp"},BaseDef:{name:"基础防御",suffix:"",code:"baseDef"},Speed:{name:"攻击速度",suffix:"%",code:"speed"},Hit:{name:"命中",suffix:"%",code:"hit"},Dodge:{name:"闪避",suffix:"%",code:"dodge"},Crt:{name:"暴击率",suffix:"%",code:"crt"},CrtDamage:{name:"暴击伤害",suffix:"%",code:"crtDamage"},ExtraAtk:{name:"额外攻击",suffix:"%",code:"extraAtk"},ExtraHp:{name:"额外生命",suffix:"%",code:"extraHp"},ExtraDef:{name:"额外防御",suffix:"%",code:"extraDef"}},H=[{type:B.Hit,value:[1,10]},{type:B.Dodge,value:[1,10]},{type:B.CrtDamage,value:[1,50]},{type:B.Crt,value:[1,5]},{type:B.Speed,value:[1,20]},{type:B.ExtraHp,value:[1,5]},{type:B.ExtraDef,value:[1,5]},{type:B.ExtraAtk,value:[1,5]}],P=(a={},k()(a,B.BaseMaxAtk.code,5),k()(a,B.BaseMinAtk.code,1),k()(a,B.BaseHp.code,50),k()(a,B.BaseDef.code,3),a),T={Base:10,LevelIncrease:10},R={ID1:{type:M.Weapon,lv:1,minAtk:[1,5,5,6],maxAtk:[5,10,6,7]},ID2:{type:M.Clothes,lv:1,hp:[5,20,20,25],def:[2,8,5,6]},ID3:{type:M.Helmet,lv:1,def:[1,5,4,5]},ID4:{type:M.Belt,lv:1,hp:[5,10,10,15]},ID5:{type:M.Glove,lv:1,minAtk:[0,0,1,1],maxAtk:[1,3,3,4],def:[1,5,4,5]},ID6:{type:M.Shoes,lv:1,dodge:[1,3],def:[1,3,3,4]},ID7:{type:M.Necklace,lv:1,hp:[5,10,10,15],crtDamage:[5,10]},ID8:{type:M.Ring,lv:1,crt:[1,5],minAtk:[1,3,3,4],maxAtk:[2,4,4,5]},ID9:{type:M.Trousers,lv:1,hp:[3,10,8,12],def:[2,6,5,6]}},V={Slime:{name:"史莱姆",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:70,dodge:20,crt:10,crtDamage:200,exp:1,hpI:80,minAtkI:4,maxAtkI:5,defI:16,expI:1,equips:["ID1","ID2","ID3","ID4","ID5","ID6","ID7","ID8","ID9"]}},U=i("hRKE"),$=i.n(U),Q=function t(e){var i=e instanceof Array?[]:{};for(var a in e)"object"===$()(e[a])?i[a]=t(e[a]):i[a]=e[a];return i},O=function(t){return Math.floor(Math.random()*(t[1]-t[0]))+t[0]},j=function(){function t(e){var i=this,a=e.id,n=void 0===a?"ID1":a,s=e.accordingToId,o=void 0===s||s,l=e.quality,u=void 0===l?"Normal":l,h=e.lv,p=void 0===h?1:h,d=e.minAtk,v=void 0===d?0:d,m=e.maxAtk,f=void 0===m?0:m,g=e.hp,y=void 0===g?0:g,k=e.def,q=void 0===k?0:k,x=e.speed,A=void 0===x?0:x,_=e.hit,b=void 0===_?0:_,E=e.dodge,D=void 0===E?0:E,S=e.crt,I=void 0===S?0:S,C=e.crtDamage,w=void 0===C?0:C,N=e.extraAttr,M=void 0===N?[]:N,F=e.lockFlag,B=void 0!==F&&F,H=e.strengthenLv,P=void 0===H?0:H;if(c()(this,t),o){this.id=n,this.lv=p,this.quality=u,this.equipQuality=L[u],this.equipData=Q(R[n]);["minAtk","maxAtk","hp","def"].forEach(function(t){i.equipData[t]&&(i.equipData[t][0]=i.equipData[t][0]+i.equipData[t][2]*(i.lv-1),i.equipData[t][1]=i.equipData[t][1]+i.equipData[t][3]*(i.lv-1))}),r()(this.equipData).forEach(function(t){i.equipData[t]instanceof Array&&(i.equipData[t][0]=Math.floor(i.equipData[t][0]*i.equipQuality.attrAddition),i.equipData[t][1]=Math.floor(i.equipData[t][1]*i.equipQuality.attrAddition))}),this.type=this.equipData.type.code,this.equipType=this.equipData.type,this.minAtk=this.equipData.minAtk?O(this.equipData.minAtk):0,this.maxAtk=this.equipData.maxAtk?O(this.equipData.maxAtk):0,this.hp=this.equipData.hp?O(this.equipData.hp):0,this.def=this.equipData.def?O(this.equipData.def):0,this.speed=this.equipData.speed?O(this.equipData.speed):0,this.hit=this.equipData.hit?O(this.equipData.hit):0,this.dodge=this.equipData.dodge?O(this.equipData.dodge):0,this.crt=this.equipData.crt?O(this.equipData.crt):0,this.crtDamage=this.equipData.crtDamage?O(this.equipData.crtDamage):0,this.extraAttr=[],this.createExtraAttr()}else this.id=n,this.equipData=R[n],this.type=this.equipData.type.code,this.equipType=this.equipData.type,this.quality=u,this.equipQuality=L[u],this.lv=p,this.minAtk=v,this.maxAtk=f,this.hp=y,this.def=q,this.speed=A,this.hit=b,this.dodge=D,this.crt=I,this.crtDamage=w,this.extraAttr=M;this.lockFlag=B,this.price=(T.Base+T.LevelIncrease*(this.lv-1))*this.equipQuality.attrAddition,this.strengthenLv=P}return p()(t,[{key:"createExtraAttr",value:function(){for(var t=Q(H),e=this.equipQuality.additionalAttrNum,i=void 0,a=void 0,n=void 0;e>0;)i=Math.floor(Math.random()*t.length)+1,i=Math.floor(Math.random()*i),a=t.splice(i,1)[0],n=O(a.value),this.extraAttr.push({type:Q(a.type),value:n,values:a.value}),e--}},{key:"getName",value:function(){return this.equipQuality.name+"的"+this.equipType.name}},{key:"getColor",value:function(){return this.equipQuality.color}},{key:"lock",value:function(){this.lockFlag=!0}},{key:"unlock",value:function(){this.lockFlag=!1}},{key:"getStrengthenPrice",value:function(){return Math.floor(100*this.lv*(this.strengthenLv+1)*(this.strengthenLv+1)*(1+this.equipQuality.attrAddition))}},{key:"strengthen",value:function(){var t=Math.random()<25/(this.strengthenLv+1)/(this.strengthenLv+1);return t?this.strengthenLv++:this.strengthenLv--,t}},{key:"getStrengthenAttr",value:function(t){var e=Math.floor(.1*t*this.strengthenLv);return e>this.strengthenLv?e:this.strengthenLv}},{key:"getBaseInfo",value:function(){var t=[];return(this.minAtk||this.maxAtk)&&t.push({value:this.minAtk+" - "+this.maxAtk,round:[this.equipData.minAtk[0],this.equipData.maxAtk[1]],name:"攻击",strengthenAttr:this.getStrengthenAttr(this.minAtk)+"-"+this.getStrengthenAttr(this.maxAtk)}),this.hp&&t.push({value:this.hp,round:[].concat(this.equipData.hp.slice(0,2)),name:"生命",strengthenAttr:this.getStrengthenAttr(this.hp)}),this.def&&t.push({value:this.def,round:[].concat(this.equipData.def.slice(0,2)),name:"防御",strengthenAttr:this.getStrengthenAttr(this.def)}),this.speed&&t.push({value:this.speed+"%",round:[].concat(this.equipData.speed.slice(0,2)),name:"攻击速度",strengthenAttr:this.getStrengthenAttr(this.speed)+"%"}),this.hit&&t.push({value:this.hit+"%",round:[].concat(this.equipData.hit.slice(0,2)),name:"命中",strengthenAttr:this.getStrengthenAttr(this.hit)+"%"}),this.dodge&&t.push({value:this.dodge+"%",round:[].concat(this.equipData.dodge.slice(0,2)),name:"闪避",strengthenAttr:this.getStrengthenAttr(this.dodge)+"%"}),this.crt&&t.push({value:this.crt+"%",round:[].concat(this.equipData.crt.slice(0,2)),name:"暴击率",strengthenAttr:this.getStrengthenAttr(this.crt)+"%"}),this.crtDamage&&t.push({value:this.crtDamage+"%",round:[].concat(this.equipData.crtDamage.slice(0,2)),name:"暴击伤害",strengthenAttr:this.getStrengthenAttr(this.crtDamage)+"%"}),t}},{key:"getBaseInfoCalculation",value:function(){var t=[];return this.minAtk&&t.push({value:this.minAtk+this.getStrengthenAttr(this.minAtk),code:"baseMinAtk"}),this.maxAtk&&t.push({value:this.maxAtk+this.getStrengthenAttr(this.maxAtk),code:"baseMaxAtk"}),this.hp&&t.push({value:this.hp+this.getStrengthenAttr(this.hp),code:"baseHp"}),this.def&&t.push({value:this.def+this.getStrengthenAttr(this.def),code:"baseDef"}),this.speed&&t.push({value:this.speed+this.getStrengthenAttr(this.speed),code:"speed"}),this.hit&&t.push({value:this.hit+this.getStrengthenAttr(this.hit),code:"hit"}),this.dodge&&t.push({value:this.dodge+this.getStrengthenAttr(this.dodge),code:"dodge"}),this.crt&&t.push({value:this.crt+this.getStrengthenAttr(this.crt),code:"crt"}),this.crtDamage&&t.push({value:this.crtDamage+this.getStrengthenAttr(this.crtDamage),code:"crtDamage"}),t}}]),t}(),J=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Slime",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Normal",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;c()(this,e);var n=Q(V[t]),s=I[i],r=a-1+s.addLv;r=r>0?r:0,n?(n.hp=n.hp+n.hpI*r,n.minAtk=n.minAtk+n.minAtkI*r,n.maxAtk=n.maxAtk+n.maxAtkI*r,n.def=n.def+n.defI*r,n.lv=a):n={name:"敌人",hp:100,atk:1,def:1,speed:1,hit:50,dodge:0,crt:0,crtDamage:150,hpI:20,atkI:1,defI:1,exp:1,lv:a};var o=v()(this,(e.__proto__||l()(e)).call(this,n));return o.exp=n.exp+n.expI*r,o.exp=o.exp>0?o.exp:1,o.name="["+s.name+"]"+n.name,o.enemyType=t,o.color=s.color,o.suffix=i,o.equips=n.equips||[],o}return f()(e,t),p()(e,[{key:"fallDownEquipment",value:function(){for(var t=N(F[this.suffix]),e=t.reduce(function(t,e){return("number"==typeof t?t:t.value)+e.value}),i=Math.floor(Math.random()*e),a="Inferior",n=0;n<t.length;n++)if((i-=t[n].value)<0){a=t[n].key;break}var s=this.lv-Math.floor(5*Math.random());s=s>0?s:1;var r=new j({id:this.equips[Math.floor(Math.random()*this.equips.length)],quality:a,lv:s});return console.log(r),r}}]),e}(g),G=i("3cXf"),W=i.n(G),z=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.hp,a=void 0===i?100:i,n=t.lv,s=void 0===n?1:n,r=t.minAtk,o=void 0===r?1:r,u=t.maxAtk,h=void 0===u?5:u,p=t.def,d=void 0===p?1:p,m=t.speed,f=void 0===m?1:m,g=t.hit,y=void 0===g?50:g,k=t.dodge,q=void 0===k?0:k,x=t.crt,A=void 0===x?0:x,_=t.crtDamage,b=void 0===_?150:_,E=t.maxExp,D=void 0===E?100:E,S=t.currExp,I=void 0===S?0:S,C=t.goldCoin,w=void 0===C?0:C,N=t.baseMinAtk,M=void 0===N?1:N,L=t.baseMaxAtk,F=void 0===L?5:L,B=t.baseHp,H=void 0===B?100:B,P=t.baseDef,T=void 0===P?1:P,R=t.extraAtk,V=void 0===R?0:R,U=t.extraHp,$=void 0===U?0:U,Q=t.extraDef,O=void 0===Q?0:Q;c()(this,e);var j=v()(this,(e.__proto__||l()(e)).call(this,{hp:a,lv:s,minAtk:o,maxAtk:h,def:d,speed:f,hit:y,dodge:q,crt:A,crtDamage:b}));return j.maxExp=D,j.currExp=I,j.extraAtk=V,j.extraDef=O,j.extraHp=$,j.baseMinAtk=M,j.baseMaxAtk=F,j.baseDef=T,j.baseHp=H,j.calculationBaseAttr(),j.goldCoin=w,j.knapsack=[],j.equips={Weapon:null,Helmet:null,Clothes:null,Belt:null,Glove:null,Shoes:null,Necklace:null,Ring:null,Trousers:null},j}return f()(e,t),p()(e,[{key:"getExp",value:function(t){this.currExp+=t,this.currExp>=this.maxExp&&this.levelUp(),this.save()}},{key:"getGoldCoin",value:function(t){this.goldCoin+=t}},{key:"pay",value:function(t){console.log(t),this.goldCoin-=t}},{key:"levelUp",value:function(){var t=this;this.lv++,this.currExp-=this.maxExp,this.maxExp=this.lv*this.lv*100,r()(P).forEach(function(e){t[e]+=P[e]}),this.calculationBaseAttr(),this.save()}},{key:"getEquips",value:function(t){this.knapsack=this.knapsack.concat(t),this.save()}},{key:"calculationBaseAttr",value:function(){this.minAtk=Math.floor(this.baseMinAtk*(100+this.extraAtk)/100),this.maxAtk=Math.floor(this.baseMaxAtk*(100+this.extraAtk)/100),this.def=Math.floor(this.baseDef*(100+this.extraDef)/100),this.hp=Math.floor(this.baseHp*(100+this.extraHp)/100)}},{key:"equipFn",value:function(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.equips[t.type]){var a=this.equips[t.type];this.knapsack.splice(this.knapsack.indexOf(t),1,a),a.getBaseInfoCalculation().forEach(function(t){e[t.code]-=t.value}),a.extraAttr.forEach(function(t){e[t.type.code]-=t.value})}else this.knapsack.splice(this.knapsack.indexOf(t),1);t.getBaseInfoCalculation().forEach(function(t){e[t.code]+=t.value}),t.extraAttr.forEach(function(t){e[t.type.code]+=t.value}),this.calculationBaseAttr(),this.currHp>this.hp&&(this.currHp=this.hp),this.equips[t.type]=t,i&&this.save()}},{key:"unloadEquip",value:function(t){var e=this;this.equips[t]&&(this.knapsack.push(this.equips[t]),this.equips[t].getBaseInfoCalculation().forEach(function(t){e[t.code]-=t.value}),this.equips[t].extraAttr.forEach(function(t){e[t.type.code]-=t.value}),this.equips[t]=null),this.calculationBaseAttr(),this.currHp>this.hp&&(this.currHp=this.hp),this.save()}},{key:"saleEquip",value:function(t){this.knapsack.splice(this.knapsack.indexOf(t),1),this.save()}},{key:"save",value:function(){var t=Q(this);delete t.knapsack,delete t.equips,localStorage.setItem("player",W()(t)),localStorage.setItem("equips",W()(this.equips)),localStorage.setItem("knapsack",W()(this.knapsack))}},{key:"recoveryHp",value:function(t){this.currHp+=t,this.currHp>this.hp&&(this.currHp=this.hp)}},{key:"autoRcoveryHp",value:function(t,e){var i=this;!function a(){i.recoveryHp(Math.floor(t*i.hp/100)),i.currHp<i.hp?setTimeout(a,100):e&&e()}()}},{key:"getCurrEquipPower",value:function(t){var i=new e(this);if(this.equips[t.type]){var a=this.equips[t.type];a.getBaseInfoCalculation().forEach(function(t){i[t.code]-=t.value}),a.extraAttr.forEach(function(t){i[t.type.code]-=t.value})}t.getBaseInfoCalculation().forEach(function(t){i[t.code]+=t.value}),t.extraAttr.forEach(function(t){i[t.type.code]+=t.value}),i.calculationBaseAttr();var n=i.getCombatPower();return i=null,n}},{key:"getBaseInfo",value:function(){var t=[];return t.push({value:this.goldCoin,name:"金币"}),t.push({value:this.minAtk+" - "+this.maxAtk,name:"攻击"}),t.push({value:this.hp,name:"生命"}),t.push({value:this.def,name:"防御"}),t.push({value:this.speed+"%",name:"攻击速度"}),t.push({value:this.hit+"%",name:"命中"}),t.push({value:this.dodge+"%",name:"闪避"}),t.push({value:this.crt+"%",name:"暴击率"}),t.push({value:this.crtDamage+"%",name:"暴击伤害"}),t}}]),e}(g),K={props:{width:{type:String,default:"4rem"},max:{type:Number,default:0},curr:{type:Number,default:0},type:{type:String,default:"hp"}},computed:{style:function(){return{width:this.width}},currStyle:function(){return{width:(this.max>0?this.curr/this.max*100:0).toFixed(2)+"%"}}}},Y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hp-bar",style:t.style},[i("div",{staticClass:"curr-progress",class:{exp:"exp"===t.type},style:t.currStyle}),t._v(" "),i("div",{staticClass:"bp-info"},[t._v(t._s(t.curr)+" / "+t._s(t.max))])])},staticRenderFns:[]};var X=i("C7Lr")(K,Y,!1,function(t){i("WnY5")},"data-v-55aca540",null).exports,Z={data:function(){return{}},props:{player:Object},components:{BeHpBar:X}},tt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"player-info"},[i("dl",[i("span",[t._v("等级："+t._s(t.player.lv))]),i("span",[t._v("金币："+t._s(t.player.goldCoin))])]),t._v(" "),i("dl",[i("label",{attrs:{for:""}},[t._v("HP：")]),i("be-hp-bar",{attrs:{curr:t.player.currHp,max:t.player.hp}})],1),t._v(" "),i("dl",[i("label",{attrs:{for:""}},[t._v("EXP：")]),i("be-hp-bar",{attrs:{curr:t.player.currExp,max:t.player.maxExp,type:"exp"}})],1)])},staticRenderFns:[]};var et=i("C7Lr")(Z,tt,!1,function(t){i("hUHP")},"data-v-ef3649be",null).exports,it={props:{enemys:Array},components:{BeHpBar:X}},at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"enemy-info"},t._l(t.enemys,function(e,a){return i("dl",{key:a},[i("label",{style:"color:"+e.color},[t._v(t._s(e.name)+"：")]),t._v(" "),i("be-hp-bar",{attrs:{curr:e.currHp,max:e.hp}})],1)}))},staticRenderFns:[]};var nt=i("C7Lr")(it,at,!1,function(t){i("SsJa")},"data-v-75050cc1",null).exports,st={props:{msgList:Array}},rt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fight-info"},[i("ul",t._l(t.msgList,function(e,a){return i("li",{domProps:{innerHTML:t._s(e)}})}))])},staticRenderFns:[]};var ot=i("C7Lr")(st,rt,!1,function(t){i("7njf")},"data-v-3cf52952",null).exports,lt=i("aA9S"),ut=i.n(lt),ct=i("MgeX"),ht=i.n(ct),pt={props:{equip:Object,btnType:{type:String,default:"equip"},powerUp:String},methods:{equipFn:function(t){t.stopPropagation(),this.$emit("equip")},unloadEquip:function(t){t.stopPropagation(),this.$emit("unload")},strengthen:function(t){t.stopPropagation(),this.$emit("strengthen",this.equip)},sale:function(t){t.stopPropagation(),this.$emit("sale",this.equip)}}},dt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"equip-detail"},[t.equip?i("div",{staticClass:"base-info"},[i("dl",[i("span",{style:"color: "+t.equip.getColor()},[t._v(t._s(t.equip.getName())+" (lv: "+t._s(t.equip.lv)+")")]),t._v(" "),t.equip.strengthenLv>0?i("span",{staticClass:"red-text"},[t._v("+"+t._s(t.equip.strengthenLv))]):t._e()]),t._v(" "),i("dl",[t._v("\n            战斗力增幅：\n            "),t.powerUp?[+t.powerUp>0?i("span",{staticClass:"red-text"},[t._v(t._s(t.powerUp))]):i("span",{staticClass:"green-text"},[t._v(t._s(t.powerUp))])]:t._e()],2),t._v(" "),t._l(t.equip.getBaseInfo(),function(e,a){return i("dl",{key:a},[t._v("\n            "+t._s(e.name)+"："+t._s(e.value)+" "),i("span",{staticClass:"round"},[t._v("("+t._s(e.round.join(" - "))+")")]),t._v(" "),t.equip.strengthenLv>0?i("span",{staticClass:"red-text"},[t._v("("+t._s(e.strengthenAttr)+")")]):t._e()])})],2):t._e(),t._v(" "),t.equip&&t.equip.extraAttr&&t.equip.extraAttr.length>0?i("div",{staticClass:"extra-info"},t._l(t.equip.extraAttr,function(e,a){return i("dl",{key:a},[t._v(t._s(e.type.name)+"："+t._s(e.value+e.type.suffix))])})):t._e(),t._v(" "),i("button",{on:{click:function(e){t.strengthen(e)}}},[t._v("强化")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:"equip"===t.btnType,expression:"btnType === 'equip'"}],on:{click:function(e){t.equipFn(e)}}},[t._v("装备")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:"unload"===t.btnType,expression:"btnType === 'unload'"}],on:{click:function(e){t.unloadEquip(e)}}},[t._v("卸下")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:t.equip&&"equip"===t.btnType&&!t.equip.lockFlag,expression:"equip && btnType === 'equip' && !equip.lockFlag"}],on:{click:function(e){t.sale(e)}}},[t._v("出售")])])},staticRenderFns:[]};var vt=i("C7Lr")(pt,dt,!1,function(t){i("Riut")},"data-v-7f39adc8",null).exports,mt={data:function(){return{detailVisible:!1,equip:null,btnType:"equip",currEquip:null,powerUp:"",multSaleVisible:!1,equipQualityList:ht()(Q(L)).map(function(t){return ut()(t,{value:!1})})}},props:{player:Object,visible:{type:Boolean,default:!1}},inject:["log"],methods:{showEquipDetail:function(t,e){if("equip"===e){this.currEquip=this.player.equips[t.type];var i=this.player.getCurrEquipPower(t)-this.player.getCombatPower();this.powerUp=i>0?"+"+i:""+i}else this.currEquip=null,this.powerUp="";this.detailVisible=!0,this.equip=t,this.btnType=e},closeDetail:function(){this.detailVisible=!1},close:function(){this.$emit("update:visible",!1)},equipFn:function(t){this.player.equipFn(t),this.detailVisible=!1},unloadEquip:function(t){this.player.unloadEquip(t),this.detailVisible=!1},sale:function(t){this.detailVisible=!1,t.lockFlag||(this.player.saleEquip(t),this.player.getGoldCoin(t.price))},closeMultSale:function(){this.multSaleVisible=!1},showMultSale:function(){this.multSaleVisible=!0},stopProp:function(t){t.stopPropagation()},multSale:function(){var t=this,e=this.equipQualityList.filter(function(t){return t.value}).map(function(t){return t.code});e.length>0&&this.player.knapsack.filter(function(t){return e.indexOf(t.quality)>-1}).forEach(function(e){t.sale(e)})},allSale:function(){var t=this;[].concat(this.player.knapsack).forEach(function(e){t.sale(e)})},intelligenceSale:function(){var t=this;this.player.knapsack.filter(function(e){return t.player.getCurrEquipPower(e)<t.player.getCombatPower()}).forEach(function(e){t.sale(e)})},strengthen:function(t){var e=t.getStrengthenPrice();e<=this.player.goldCoin&&(this.player.pay(e),t.strengthen()?this.log("强化成功"):this.log("强化失败"))}},components:{BeEquipDetail:vt}},ft={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"knapsack"},[i("div",{staticClass:"container"},[i("div",{staticClass:"already-equipped"},t._l(Object.keys(t.player.equips),function(e){return i("dl",{key:e},[t.player.equips[e]?[i("span",{style:"color:"+t.player.equips[e].getColor(),on:{click:function(i){t.showEquipDetail(t.player.equips[e],"unload")}}},[t._v(t._s(t.player.equips[e].getName())+" (lv: "+t._s(t.player.equips[e].lv)+")")]),t._v(" "),i("button",{on:{click:function(i){t.unloadEquip(e)}}},[t._v("卸下")])]:i("span",[t._v("未装备")])],2)})),t._v(" "),i("div",{staticClass:"not-equip"},t._l(t.player.knapsack,function(e,a){return i("dl",{key:a},[i("span",{style:"color:"+e.getColor(),on:{click:function(i){t.showEquipDetail(e,"equip")}}},[t._v(t._s(e.getName())+" (lv: "+t._s(e.lv)+")")]),t._v(" "),t.player.getCurrEquipPower(e)>t.player.getCombatPower()?i("span",{staticClass:"red-text"},[t._v("+"+t._s(t.player.getCurrEquipPower(e)-t.player.getCombatPower()))]):i("span",{staticClass:"green-text"},[t._v(t._s(t.player.getCurrEquipPower(e)-t.player.getCombatPower()))]),t._v(" "),i("div",{staticClass:"btn-group"},[i("button",{on:{click:function(i){t.equipFn(e)}}},[t._v("装备")]),t._v(" "),e.lockFlag?i("button",{on:{click:function(t){e.unlock()}}},[t._v("解锁")]):i("button",{on:{click:function(t){e.lock()}}},[t._v("锁上")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:!e.lockFlag,expression:"!equip.lockFlag"}],on:{click:function(i){t.sale(e)}}},[t._v("出售")])])])})),t._v(" "),i("div",{staticClass:"knapsack-bottom clearfix"},[i("div",{staticClass:"fl"},[i("button",{on:{click:t.showMultSale}},[t._v("批量出售")])]),t._v(" "),i("div",{staticClass:"fr"},[i("button",{on:{click:t.close}},[t._v("关闭")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.detailVisible,expression:"detailVisible"}],staticClass:"equip-info",on:{click:t.closeDetail}},[t.currEquip?i("be-equip-detail",{staticClass:"curr-equip",attrs:{btnType:"unload",equip:t.currEquip},on:{unload:function(e){t.unloadEquip(t.equip.type)},strengthen:t.strengthen}}):t._e(),t._v(" "),i("be-equip-detail",{attrs:{equip:t.equip,btnType:t.btnType,powerUp:t.powerUp},on:{equip:function(e){t.equipFn(t.equip)},unload:function(e){t.unloadEquip(t.equip.type)},strengthen:t.strengthen,sale:t.sale}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.multSaleVisible,expression:"multSaleVisible"}],staticClass:"equip-info",on:{click:t.closeMultSale}},[i("div",{staticClass:"mult-sale-container",on:{click:function(e){t.stopProp(e)}}},[t._l(t.equipQualityList,function(e){return[i("dl",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"equipQuality.value"}],key:e.code,attrs:{type:"checkbox",id:"multSale"+e.code},domProps:{checked:Array.isArray(e.value)?t._i(e.value,null)>-1:e.value},on:{change:function(i){var a=e.value,n=i.target,s=!!n.checked;if(Array.isArray(a)){var r=t._i(a,null);n.checked?r<0&&t.$set(e,"value",a.concat([null])):r>-1&&t.$set(e,"value",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(e,"value",s)}}}),i("label",{attrs:{for:"multSale"+e.code}},[t._v(t._s(e.name))])])]}),t._v(" "),i("div",{staticClass:"sale-btn-group clearfix"},[i("button",{on:{click:t.multSale}},[t._v("批量出售")]),t._v(" "),i("button",{on:{click:t.allSale}},[t._v("全部出售")]),t._v(" "),i("button",{on:{click:t.intelligenceSale}},[t._v("智能出售")]),t._v(" "),i("button",{on:{click:t.closeMultSale}},[t._v("关闭")])])],2)])])])},staticRenderFns:[]};var gt=i("C7Lr")(mt,ft,!1,function(t){i("iDIP")},"data-v-4187ce99",null).exports,yt={props:{player:Object,visible:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("update:visible",!1)}}},kt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"player-attr"},[i("div",{staticClass:"base-info"},[i("dl",[t._v("等级："+t._s(t.player.lv))]),t._v(" "),i("dl",[t._v("战斗力："+t._s(t.player.getCombatPower()))]),t._v(" "),t._l(t.player.getBaseInfo(),function(e,a){return i("dl",{key:a},[t._v(t._s(e.name)+"："+t._s(e.value))])}),t._v(" "),i("button",{staticClass:"btn",on:{click:t.close}},[t._v("关闭")])],2)])},staticRenderFns:[]};var qt={name:"App",data:function(){return{player:null,enemys:[],gameSpeed:10,recoverySpeed:2,autoFightFlag:!1,inBattleFlag:!1,knapsackVisible:!1,playerAttrVisible:!1,fightInfo:[],msgList:[],enemyLv:1,enemyNum:0,enemyNumMax:10,enemyStos:[],playerSto:null}},methods:{clearSto:function(){clearTimeout(this.playerSto),this.enemyStos.forEach(function(t){clearTimeout(t)})},fight:function(){var t=this;this.inBattleFlag=!0;var e=0;this.playerSto=setTimeout(function i(){var a=t.player.attack(t.enemys[e]);a.msg&&t.log(a.msg),0===a.currHp?++e<t.enemys.length?t.playerSto=setTimeout(i,1e3*t.player.interval/t.gameSpeed):(t.clearSto(),t.victory()):t.playerSto=setTimeout(i,1e3*t.player.interval/t.gameSpeed)},1e3*this.player.interval/this.gameSpeed);this.enemys.forEach(function(e,i){t.enemyStos[i]=setTimeout(function(){!function e(i){var a=t.enemys[i].attack(t.player);a.msg&&t.log(a.msg),0===a.currHp?(t.clearSto(),t.loss()):(clearTimeout(t.enemyStos[i]),t.enemyStos[i]=setTimeout(function(){e(i)},1e3*t.enemys[i].interval/t.gameSpeed))}(i)},1e3*e.interval/t.gameSpeed)})},fallDownEquipment:function(){var t=[];this.enemys.forEach(function(e){t.push(e.fallDownEquipment())}),this.log("获得 "+t.map(function(t){return'<span style="color: '+t.equipQuality.color+'">'+t.getName()+"</span>"}).join("、")),this.player.getEquips(t)},getExp:function(){var t=0;this.enemys.forEach(function(e){t+=e.exp}),this.player.getExp(t)},loss:function(){var t=this;this.log("战斗失败"),this.enemyNum>0?this.enemyNum--:this.enemyLv>1?(this.enemyLv--,this.enemyNum=this.enemyNumMax-1):(this.enemyLv=1,this.enemyNum=0),localStorage.setItem("enemyLv",this.enemyLv),localStorage.setItem("enemyNum",this.enemyNum),this.player.autoRcoveryHp(this.recoverySpeed,function(){t.createEnemys(),t.inBattleFlag=!1})},victory:function(){var t=this;this.log("战斗胜利"),this.fallDownEquipment(),this.getExp(),this.enemyNum<this.enemyNumMax-1?this.enemyNum++:(this.enemyLv++,this.enemyNum=0),localStorage.setItem("enemyLv",this.enemyLv),localStorage.setItem("enemyNum",this.enemyNum),this.player.autoRcoveryHp(this.recoverySpeed,function(){t.createEnemys(),t.inBattleFlag=!1})},createEnemys:function(){this.enemys=[];for(var t=N(C),e=t.reduce(function(t,e){return("number"==typeof t?t:t.value)+e.value}),i=Math.floor(Math.random()*e),a=1,n=0;n<t.length;n++)if((i-=t[n].value)<0){a=+t[n].key;break}for(var s=0;s<a;s++)this.createEnemy();this.autoFightFlag&&this.fight()},createEnemy:function(){for(var t=N(w),e=t.reduce(function(t,e){return("number"==typeof t?t:t.value)+e.value}),i=Math.floor(Math.random()*e),a=0;a<t.length;a++)if((i-=t[a].value)<0){this.enemys.push(new J("Slime",t[a].key,this.enemyLv));break}},showKnapsack:function(){this.knapsackVisible=!0},showPlayerAttr:function(){this.playerAttrVisible=!0},changeAutoFight:function(){this.autoFightFlag=!this.autoFightFlag,this.autoFightFlag&&!this.inBattleFlag&&this.fight(),localStorage.setItem("autoFightFlag",this.autoFightFlag)},log:function(t){this.msgList.push(t)},initGame:function(){localStorage.clear(),this.clearSto(),this.enemyLv=1,this.enemyNum=0,this.player=new z,this.createEnemys()}},provide:function(){return{log:this.log}},components:{BePlayerInfo:et,BeEnemyInfo:nt,BeFightInfo:ot,BeKnapsack:gt,BePlayerAttr:i("C7Lr")(yt,kt,!1,function(t){i("JzUl")},"data-v-b413428c",null).exports},created:function(){var t=function(){var t=(document.body&&document.body.clientWidth||document.getElementsByTagName("html")[0].offsetWidth)/750;t=t>1?1:t<.427?.427:t,document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+100*t+"px !important")};if(t(),window.addEventListener("resize",function(){t()},!1),localStorage.getItem("player")?this.player=new z(JSON.parse(localStorage.getItem("player"))):this.player=new z,localStorage.getItem("equips")){var e=JSON.parse(localStorage.getItem("equips"));r()(e).forEach(function(t){if(e[t]){var i=Q(e[t]);i.accordingToId=!1,e[t]=new j(i)}}),this.player.equips=e}if(localStorage.getItem("knapsack")){var i=JSON.parse(localStorage.getItem("knapsack")).map(function(t){return t.accordingToId=!1,new j(t)});this.player.knapsack=i}this.autoFightFlag=localStorage.getItem("autoFightFlag")&&"false"!==localStorage.getItem("autoFightFlag")||!1,this.enemyLv=localStorage.getItem("enemyLv")?+localStorage.getItem("enemyLv"):1,this.enemyNum=localStorage.getItem("enemyNum")?+localStorage.getItem("enemyNum"):1,this.createEnemys()}},xt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("be-player-info",{attrs:{player:t.player}}),t._v(" "),i("be-enemy-info",{attrs:{enemys:t.enemys}}),t._v(" "),i("div",{staticClass:"button-group"},[i("div",{staticClass:"fl button-group-left"},[i("button",{on:{click:t.showKnapsack}},[t._v("背包")]),t._v(" "),i("button",{on:{click:t.showPlayerAttr}},[t._v("属性")]),t._v(" "),i("button",{on:{click:t.changeAutoFight}},[t._v(t._s(t.autoFightFlag?"关闭自动":"自动战斗"))]),t._v(" "),i("button",{on:{click:t.initGame}},[t._v("重新开始")])]),t._v(" "),i("div",{staticClass:"fr button-group-right"},[t._v("\n            怪物等级："+t._s(t.enemyLv)),i("br"),t._v("\n            怪物进度："+t._s(t.enemyNum)+" / "+t._s(t.enemyNumMax)+"\n        ")])]),t._v(" "),i("be-fight-info",{attrs:{msgList:t.msgList}}),t._v(" "),i("be-knapsack",{attrs:{player:t.player,visible:t.knapsackVisible},on:{"update:visible":function(e){t.knapsackVisible=e}}}),t._v(" "),i("be-player-attr",{attrs:{player:t.player,visible:t.playerAttrVisible},on:{"update:visible":function(e){t.playerAttrVisible=e}}})],1)},staticRenderFns:[]};var At=i("C7Lr")(qt,xt,!1,function(t){i("IQxh")},null,null).exports,_t=i("t+b9"),bt=i.n(_t);n.default.config.productionTip=!1,n.default.use(bt.a),new n.default({el:"#app",components:{App:At},template:"<App/>"})},Riut:function(t,e){},SsJa:function(t,e){},WnY5:function(t,e){},hUHP:function(t,e){},iDIP:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6fc4c3298c558c946a15.js.map