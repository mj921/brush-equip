webpackJsonp([1],{"+JBM":function(t,e){},"+eg2":function(t,e){},AUqt:function(t,e){},CRlj:function(t,e){},FyJy:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),n=i("fZjL"),s=i.n(n),o=i("Zx67"),r=i.n(o),l=i("Zrlr"),u=i.n(l),h=i("wxAW"),c=i.n(h),p=i("zwoO"),d=i.n(p),v=i("Pf15"),f=i.n(v),m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.hp,a=void 0===i?100:i,n=e.lv,s=void 0===n?1:n,o=e.minAtk,r=void 0===o?1:o,l=e.maxAtk,h=void 0===l?5:l,c=e.def,p=void 0===c?1:c,d=e.speed,v=void 0===d?0:d,f=e.hit,m=void 0===f?50:f,y=e.dodge,g=void 0===y?0:y,k=e.crt,x=void 0===k?0:k,q=e.crtDamage,b=void 0===q?150:q;u()(this,t),this.hp=a,this.currHp=a,this.lv=s,this.minAtk=r,this.maxAtk=h,this.def=p,this.speed=v,this.intervalBase=1,this.interval=Math.floor(100*this.intervalBase-this.speed)/100,this.hit=m,this.dodge=g,this.crt=x,this.crtDamage=b}return c()(t,[{key:"getDamageRemission",value:function(){return this.def/(this.def+100*this.lv)}},{key:"attack",value:function(t){var e={};if(100*Math.random()<this.hit&&100*Math.random()>=t.dodge){var i=(Math.random()*(this.maxAtk-this.minAtk)+this.minAtk)*(1-t.getDamageRemission());100*Math.random()<this.crt&&(i*=this.crtDamage/100),i=i>1?Math.floor(i):1,t.currHp>i?t.currHp-=i:t.currHp=0}return e.currHp=t.currHp,e}},{key:"toString",value:function(){return"hp: "+this.hp+", lv: "+this.lv}},{key:"getCombatPower",value:function(){return Math.floor((this.maxAtk+this.minAtk)/2/this.interval*(1+this.crt*this.crtDamage/100)*this.hit/100+this.hp/(1-this.getDamageRemission())/(100-this.dodge)/100)}}]),t}(),y="#bbb",g="#000",k="#72E729",x="#15A5F3",q="#B828F4",b="#F8FA20",A="#F32020",E="#F67712",_={Puniness:{color:y,num:0,name:"弱小",addLv:-2},Normal:{color:g,num:1,name:"普通",addLv:0},Variation:{color:k,num:2,name:"变异",addLv:2},Elites:{color:x,num:3,name:"精英",addLv:4},Head:{color:q,num:4,name:"头目",addLv:6},Boss:{color:b,num:5,name:"首领",addLv:8},VariationBoss:{color:A,num:6,name:"变异首领",addLv:10},ElitesBoss:{color:E,num:7,name:"精英首领",addLv:12}},D={1:725,2:250,3:20,4:4,5:1},F={Puniness:1e3,Normal:7844,Variation:1e3,Elites:100,Head:50,Boss:3,VariationBoss:2,ElitesBoss:1},I=function(t){var e=[];return s()(t).forEach(function(i){e.push({key:i,value:t[i]})}),e},M={Inferior:{name:"劣质",color:y,additionalAttrNum:0},Normal:{name:"普通",color:g,additionalAttrNum:0},Excellent:{name:"优秀",color:k,additionalAttrNum:1},Polish:{name:"精良",color:x,additionalAttrNum:2},Rare:{name:"稀有",color:q,additionalAttrNum:3},Epic:{name:"史诗",color:b,additionalAttrNum:4},Legend:{name:"传说",color:A,additionalAttrNum:5},Myth:{name:"神话",color:E,additionalAttrNum:6}},w={Puniness:{Inferior:7e3,Normal:2900,Excellent:100},Normal:{Inferior:1900,Normal:7e3,Excellent:1e3,Polish:100},Variation:{Inferior:500,Normal:6e3,Excellent:2400,Polish:1e3,Rare:100},Elites:{Inferior:100,Normal:5e3,Excellent:3e3,Polish:1e3,Rare:800,Epic:100},Head:{Inferior:100,Normal:4e3,Excellent:3400,Polish:1300,Rare:1e3,Epic:199,Legend:1},Boss:{Inferior:1,Normal:4e3,Excellent:3400,Polish:1300,Rare:1038,Epic:250,Legend:10,Myth:1},VariationBoss:{Inferior:1,Normal:3e3,Excellent:4384,Polish:1300,Rare:1e3,Epic:260,Legend:50,Myth:5},ElitesBoss:{Inferior:1,Normal:3e3,Excellent:4089,Polish:1500,Rare:1e3,Epic:300,Legend:100,Myth:10}},H={MinAtk:{name:"最小攻击",suffix:"",code:"minAtk"},MaxAtk:{name:"最大攻击",suffix:"",code:"maxAtk"},Hp:{name:"生命",suffix:"",code:"hp"},Def:{name:"防御",suffix:"",code:"def"},Speed:{name:"攻击速度",suffix:"%",code:"speed"},Hit:{name:"命中",suffix:"%",code:"hit"},Dodge:{name:"闪避",suffix:"%",code:"dodge"},Crt:{name:"暴击率",suffix:"%",code:"crt"},CrtDamage:{name:"暴击伤害",suffix:"%",code:"crtDamage"},ExtraAtk:{name:"额外攻击",suffix:"%",code:"extraAtk"},ExtraHp:{name:"额外生命",suffix:"%",code:"extraHp"},ExtraDef:{name:"额外防御",suffix:"%",code:"extraDef"}},B=[{type:H.Hit,value:[1,10]},{type:H.Dodge,value:[1,10]},{type:H.CrtDamage,value:[1,50]},{type:H.Crt,value:[1,5]},{type:H.Speed,value:[1,20]},{type:H.ExtraHp,value:[1,5]},{type:H.ExtraDef,value:[1,5]},{type:H.ExtraAtk,value:[1,5]}],N={ID1:{type:{name:"武器",code:"Weapon"},lv:1,minAtk:[1,5],maxAtk:[5,10]}},C={Slime:{name:"史莱姆",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:50,dodge:0,crt:0,crtDamage:150,exp:1,hpI:20,atkI:1,defI:1,expI:1,equips:[N.ID1]}},S=i("pFYg"),V=i.n(S),T=function t(e){var i=e instanceof Array?[]:{};for(var a in e)"object"===V()(e[a])?i[a]=t(e[a]):i[a]=e[a];return i},R=function(t){return Math.floor(Math.random()*(t[1]-t[0]))+t[0]},P=function(){function t(e){var i=this,a=e.id,n=void 0===a?"ID1":a,o=e.accordingToId,r=void 0===o||o,l=e.quality,h=void 0===l?"Normal":l,c=e.lv,p=void 0===c?1:c,d=e.minAtk,v=void 0===d?0:d,f=e.maxAtk,m=void 0===f?0:f,y=e.hp,g=void 0===y?0:y,k=e.def,x=void 0===k?0:k,q=e.speed,b=void 0===q?0:q,A=e.hit,E=void 0===A?0:A,_=e.dodge,D=void 0===_?0:_,F=e.crt,I=void 0===F?0:F,w=e.crtDamage,H=void 0===w?0:w,B=e.extraAttr,C=void 0===B?[]:B;u()(this,t),r?(this.id=n,this.equipData=T(N[n]),"Inferior"===h&&s()(this.equipData).forEach(function(t){i.equipData[t]instanceof Array&&(i.equipData[t][0]=Math.floor(.8*i.equipData[t][0]),i.equipData[t][1]=Math.floor(.8*i.equipData[t][1]))}),this.type=this.equipData.type.code,this.equipType=this.equipData.type,this.quality=h,this.equipQuality=M[h],this.lv=p,this.minAtk=this.equipData.minAtk?R(this.equipData.minAtk):0,this.maxAtk=this.equipData.maxAtk?R(this.equipData.maxAtk):0,this.hp=this.equipData.hp?R(this.equipData.hp):0,this.def=this.equipData.def?R(this.equipData.def):0,this.speed=this.equipData.speed?R(this.equipData.speed):0,this.hit=this.equipData.hit?R(this.equipData.hit):0,this.dodge=this.equipData.dodge?R(this.equipData.dodge):0,this.crt=this.equipData.crt?R(this.equipData.crt):0,this.crtDamage=this.equipData.crtDamage?R(this.equipData.crtDamage):0,this.extraAttr=[],this.createExtraAttr()):(this.id=n,this.equipData=N[n],this.type=this.equipData.type.code,this.equipType=this.equipData.type,this.quality=h,this.equipQuality=M[h],this.lv=p,this.minAtk=v,this.maxAtk=m,this.hp=g,this.def=x,this.speed=b,this.hit=E,this.dodge=D,this.crt=I,this.crtDamage=H,this.extraAttr=C)}return c()(t,[{key:"createExtraAttr",value:function(){for(var t=T(B),e=this.equipQuality.additionalAttrNum,i=void 0,a=void 0,n=void 0;e>0;)i=Math.floor(Math.random()*t.length)+1,i=Math.floor(Math.random()*i),a=t.splice(i,1)[0],n=R(a.value),this.extraAttr.push({type:T(a.type),value:n,values:a.value}),e--}},{key:"getName",value:function(){return this.equipQuality.name+"的"+this.equipType.name}},{key:"getColor",value:function(){return this.equipQuality.color}},{key:"getBaseInfo",value:function(){var t=[];return(this.minAtk||this.maxAtk)&&t.push({value:this.minAtk+" - "+this.maxAtk,round:[this.equipData.minAtk[0],this.equipData.maxAtk[1]],name:"攻击"}),this.hp&&t.push({value:this.hp,round:[].concat(this.equipData.hp),name:"生命"}),this.def&&t.push({value:this.def,round:[].concat(this.equipData.def),name:"防御"}),this.speed&&t.push({value:this.speed+"%",round:[].concat(this.equipData.speed),name:"攻击速度"}),this.hit&&t.push({value:this.hit+"%",round:[].concat(this.equipData.hit),name:"命中"}),this.dodge&&t.push({value:this.dodge+"%",round:[].concat(this.equipData.dodge),name:"闪避"}),this.crt&&t.push({value:this.crt+"%",round:[].concat(this.equipData.crt),name:"暴击率"}),this.crtDamage&&t.push({value:this.crtDamage+"%",round:[].concat(this.equipData.crtDamage),name:"暴击伤害"}),t}},{key:"getBaseInfoCalculation",value:function(){var t=[];return this.minAtk&&t.push({value:this.minAtk,code:"baseMinAtk"}),this.maxAtk&&t.push({value:this.maxAtk,code:"baseMaxAtk"}),this.hp&&t.push({value:this.hp,code:"baseHp"}),this.def&&t.push({value:this.def,code:"baseDdef"}),this.speed&&t.push({value:this.speed,code:"speed"}),this.hit&&t.push({value:this.hit,code:"hit"}),this.dodge&&t.push({value:this.dodge,code:"dodge"}),this.crt&&t.push({value:this.crt,code:"crt"}),this.crtDamage&&t.push({value:this.crtDamage,code:"crtDamage"}),t}}]),t}(),L=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Slime",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Normal",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;u()(this,e);var n=T(C[t]),s=_[i];n?(n.hp=n.hp+n.hpI*(a-1+s.addLv),n.atk=n.atk+n.atkI*(a-1+s.addLv),n.def=n.def+n.defI*(a-1+s.addLv),n.lv=a):n={hp:100,atk:1,def:1,speed:1,hit:50,dodge:0,crt:0,crtDamage:150,hpI:20,atkI:1,defI:1,exp:1,lv:a};var o=d()(this,(e.__proto__||r()(e)).call(this,n));return o.exp=n.exp+n.expI*(a-1+s.addLv),o.name="["+s.name+"]"+n.name,o.enemyType=t,o.color=s.color,o.suffix=i,o}return f()(e,t),c()(e,[{key:"fallDownEquipment",value:function(){for(var t=I(w[this.suffix]),e=t.reduce(function(t,e){return("number"==typeof t?t:t.value)+e.value}),i=Math.floor(Math.random()*e),a="Inferior",n=0;n<t.length;n++)if((i-=t[n].value)<0){a=t[n].key;break}var s=new P({id:"ID1",quality:a,lv:this.lv});return console.log(s),s}}]),e}(m),O=i("mvHQ"),U=i.n(O),$=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.hp,a=void 0===i?100:i,n=t.lv,s=void 0===n?1:n,o=t.minAtk,l=void 0===o?1:o,h=t.maxAtk,c=void 0===h?5:h,p=t.def,v=void 0===p?1:p,f=t.speed,m=void 0===f?1:f,y=t.hit,g=void 0===y?50:y,k=t.dodge,x=void 0===k?0:k,q=t.crt,b=void 0===q?0:q,A=t.crtDamage,E=void 0===A?150:A,_=t.maxExp,D=void 0===_?100:_,F=t.currExp,I=void 0===F?0:F,M=t.goldCoin,w=void 0===M?0:M;u()(this,e);var H=d()(this,(e.__proto__||r()(e)).call(this,{hp:a,lv:s,minAtk:l,maxAtk:c,def:v,speed:m,hit:g,dodge:x,crt:b,crtDamage:E}));return H.maxExp=D,H.currExp=I,H.extraAtk=0,H.extraDef=0,H.extraHp=0,H.baseMinAtk=H.minAtk,H.baseMaxAtk=H.maxAtk,H.baseDef=H.def,H.baseHp=H.hp,H.goldCoin=w,H.knapsack=[],H.equips={Weapon:null,Helmet:null,Clothes:null,Belt:null,Glove:null,Shoes:null,Necklace:null,Ring:null,Trousers:null},H}return f()(e,t),c()(e,[{key:"getExp",value:function(t){this.currExp+=t,this.currExp>=this.maxExp&&this.levelUp(),this.save()}},{key:"levelUp",value:function(){this.lv++,this.currExp-=this.maxExp,this.maxExp=this.lv*this.lv*100,this.save()}},{key:"getEquips",value:function(t){this.knapsack=this.knapsack.concat(t),this.save()}},{key:"equipFn",value:function(t){var e=this;if(this.equips[t.type]){var i=this.equips[t.type];this.knapsack.splice(this.knapsack.indexOf(t),1,i),i.getBaseInfoCalculation().forEach(function(t){e[t.code]-=t.value}),i.extraAttr.forEach(function(t){e[t.type.code]-=t.value})}else this.knapsack.splice(this.knapsack.indexOf(t),1);t.getBaseInfoCalculation().forEach(function(t){e[t.code]+=t.value}),t.extraAttr.forEach(function(t){e[t.type.code]+=t.value}),this.minAtk=Math.floor(this.baseMinAtk*(100+this.extraAtk)/100),this.maxAtk=Math.floor(this.baseMaxAtk*(100+this.extraAtk)/100),this.def=Math.floor(this.baseDef*(100+this.extraDef)/100),this.hp=Math.floor(this.baseHp*(100+this.extraHp)/100),this.equips[t.type]=t,this.save()}},{key:"unloadEquip",value:function(t){var e=this;this.equips[t]&&(this.knapsack.push(this.equips[t]),this.equips[t].getBaseInfoCalculation().forEach(function(t){e[t.code]-=t.value}),this.equips[t].extraAttr.forEach(function(t){e[t.type.code]-=t.value}),this.equips[t]=null),this.minAtk=Math.floor(this.baseMinAtk*(100+this.extraAtk)/100),this.maxAtk=Math.floor(this.baseMaxAtk*(100+this.extraAtk)/100),this.def=Math.floor(this.baseDef*(100+this.extraDef)/100),this.hp=Math.floor(this.baseHp*(100+this.extraHp)/100),this.save()}},{key:"sellEquip",value:function(t){this.knapsack.splice(this.knapsack.indexOf(t),1),this.save()}},{key:"save",value:function(){var t=T(this);delete t.knapsack,delete t.equips,localStorage.setItem("player",U()(t)),localStorage.setItem("equips",U()(this.equips)),localStorage.setItem("knapsack",U()(this.knapsack))}},{key:"recoveryHp",value:function(t){this.currHp+=t,this.currHp>this.hp&&(this.currHp=this.hp)}},{key:"autoRcoveryHp",value:function(t,e){var i=this;!function a(){i.recoveryHp(Math.floor(t*i.hp/100)),i.currHp<i.hp?setTimeout(a,100):e&&e()}()}},{key:"getBaseInfo",value:function(){var t=[];return t.push({value:this.goldCoin,name:"金币"}),t.push({value:this.minAtk+" - "+this.maxAtk,name:"攻击"}),t.push({value:this.hp,name:"生命"}),t.push({value:this.def,name:"防御"}),t.push({value:this.speed+"%",name:"攻击速度"}),t.push({value:this.hit+"%",name:"命中"}),t.push({value:this.dodge+"%",name:"闪避"}),t.push({value:this.crt+"%",name:"暴击率"}),t.push({value:this.crtDamage+"%",name:"暴击伤害"}),t}}]),e}(m),j={props:{width:{type:String,default:"4rem"},max:{type:Number,default:0},curr:{type:Number,default:0},type:{type:String,default:"hp"}},computed:{style:function(){return{width:this.width}},currStyle:function(){return{width:(this.max>0?this.curr/this.max*100:0).toFixed(2)+"%"}}}},J={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hp-bar",style:t.style},[i("div",{staticClass:"curr-progress",class:{exp:"exp"===t.type},style:t.currStyle}),t._v(" "),i("div",{staticClass:"bp-info"},[t._v(t._s(t.curr)+" / "+t._s(t.max))])])},staticRenderFns:[]};var W=i("VU/8")(j,J,!1,function(t){i("+eg2")},"data-v-55aca540",null).exports,Q={data:function(){return{}},props:{player:Object},components:{BeHpBar:W}},Z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"player-info"},[e("dl",[e("label",{attrs:{for:""}},[this._v("HP：")]),e("be-hp-bar",{attrs:{curr:this.player.currHp,max:this.player.hp}})],1),this._v(" "),e("dl",[e("label",{attrs:{for:""}},[this._v("EXP：")]),e("be-hp-bar",{attrs:{curr:this.player.currExp,max:this.player.maxExp,type:"exp"}})],1)])},staticRenderFns:[]};var z=i("VU/8")(Q,Z,!1,function(t){i("CRlj")},"data-v-25b5bbc1",null).exports,K={props:{enemys:Array},components:{BeHpBar:W},created:function(){console.log(this.enemys)}},G={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"enemy-info"},t._l(t.enemys,function(e,a){return i("dl",{key:a},[i("label",{style:"color:"+e.color},[t._v(t._s(e.name)+"：")]),i("be-hp-bar",{attrs:{curr:e.currHp,max:e.hp}})],1)}))},staticRenderFns:[]};var X=i("VU/8")(K,G,!1,function(t){i("+JBM")},"data-v-733a3a26",null).exports,Y={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"fight-info"},[this._v("\n    info\n")])},staticRenderFns:[]};var tt=i("VU/8")({},Y,!1,function(t){i("ahL/")},"data-v-1c12a6ac",null).exports,et={props:{equip:Object,btnType:{type:String,default:"equip"}},methods:{equipFn:function(t){t.stopPropagation(),this.$emit("equip")},unloadEquip:function(t){t.stopPropagation(),this.$emit("unload")}}},it={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"equip-detail"},[t.equip?i("div",{staticClass:"base-info"},[i("dl",{style:"color: "+t.equip.getColor()},[t._v(t._s(t.equip.getName()))]),t._v(" "),t._l(t.equip.getBaseInfo(),function(e,a){return i("dl",{key:a},[t._v(t._s(e.name)+"："+t._s(e.value)+" "),i("span",{staticClass:"round"},[t._v("("+t._s(e.round.join(" - "))+")")])])})],2):t._e(),t._v(" "),t.equip&&t.equip.extraAttr&&t.equip.extraAttr.length>0?i("div",{staticClass:"extra-info"},t._l(t.equip.extraAttr,function(e,a){return i("dl",{key:a},[t._v(t._s(e.type.name)+"："+t._s(e.value+e.type.suffix))])})):t._e(),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:"equip"===t.btnType,expression:"btnType === 'equip'"}],on:{click:function(e){t.equipFn(e)}}},[t._v("装备")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:"unload"===t.btnType,expression:"btnType === 'unload'"}],on:{click:function(e){t.unloadEquip(e)}}},[t._v("卸下")])])},staticRenderFns:[]};var at=i("VU/8")(et,it,!1,function(t){i("FyJy")},"data-v-2fca17dc",null).exports,nt={data:function(){return{detailVisible:!1,equip:null,btnType:"equip"}},props:{player:Object,visible:{type:Boolean,default:!1}},methods:{showEquipDetail:function(t,e){this.detailVisible=!0,this.equip=t,this.btnType=e},closeDetail:function(){this.detailVisible=!1},close:function(){this.$emit("update:visible",!1)},equipFn:function(t){this.player.equipFn(t),this.detailVisible=!1},unloadEquip:function(t){this.player.unloadEquip(t),this.detailVisible=!1},sell:function(t){this.player.sellEquip(t)}},components:{BeEquipDetail:at}},st={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"knapsack"},[i("div",{staticClass:"container"},[i("div",{staticClass:"already-equipped"},t._l(Object.keys(t.player.equips),function(e){return i("dl",{key:e},[t.player.equips[e]?[i("span",{style:"color:"+t.player.equips[e].getColor(),on:{click:function(i){t.showEquipDetail(t.player.equips[e],"unload")}}},[t._v(t._s(t.player.equips[e].getName()))]),t._v(" "),i("button",{on:{click:function(i){t.unloadEquip(e)}}},[t._v("卸下")])]:i("span",[t._v("未装备")])],2)})),t._v(" "),i("div",{staticClass:"not-equip"},t._l(t.player.knapsack,function(e,a){return i("dl",{key:a},[i("span",{style:"color:"+e.getColor(),on:{click:function(i){t.showEquipDetail(e,"equip")}}},[t._v(t._s(e.getName()))]),t._v(" "),i("button",{on:{click:function(i){t.equipFn(e)}}},[t._v("装备")]),t._v(" "),i("button",{on:{click:function(i){t.sell(e)}}},[t._v("出售")])])})),t._v(" "),i("div",{staticClass:"knapsack-bottom"},[i("button",{on:{click:t.close}},[t._v("关闭")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.detailVisible,expression:"detailVisible"}],staticClass:"equip-info",on:{click:t.closeDetail}},[i("be-equip-detail",{attrs:{equip:t.equip,btnType:t.btnType},on:{equip:function(e){t.equipFn(t.equip)},unload:function(e){t.unloadEquip(t.equip.type)}}})],1)])])},staticRenderFns:[]};var ot=i("VU/8")(nt,st,!1,function(t){i("gbkW")},"data-v-9ed21a5a",null).exports,rt={props:{player:Object,visible:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("update:visible",!1)}}},lt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"player-attr"},[i("div",{staticClass:"base-info"},[i("dl",[t._v("战斗力："+t._s(t.player.getCombatPower()))]),t._v(" "),t._l(t.player.getBaseInfo(),function(e,a){return i("dl",{key:a},[t._v(t._s(e.name)+"："+t._s(e.value))])}),t._v(" "),i("button",{staticClass:"btn",on:{click:t.close}},[t._v("关闭")])],2)])},staticRenderFns:[]};var ut={name:"App",data:function(){return{player:null,enemys:[],gameSpeed:10,recoverySpeed:2,autoFightFlag:!1,inBattleFlag:!1,knapsackVisible:!1,playerAttrVisible:!1,fightInfo:[]}},methods:{fight:function(){var t=this;this.inBattleFlag=!0;var e=0,i=[],a=void 0,n=function(){clearTimeout(a),i.forEach(function(t){clearTimeout(t)})};a=setTimeout(function i(){0===t.player.attack(t.enemys[e]).currHp?++e<t.enemys.length?a=setTimeout(i,1e3*t.player.interval/t.gameSpeed):(n(),t.victory()):a=setTimeout(i,1e3*t.player.interval/t.gameSpeed)},1e3*this.player.interval/this.gameSpeed);this.enemys.forEach(function(e,a){i[a]=setTimeout(function(){!function e(a){0===t.enemys[a].attack(t.player).currHp?(n(),t.loss()):i[a]=setTimeout(function(){e(a)},1e3*t.enemys[a].interval/t.gameSpeed)}(a)},1e3*e.interval/t.gameSpeed)})},fallDownEquipment:function(){var t=[];this.enemys.forEach(function(e){t.push(e.fallDownEquipment())}),this.player.getEquips(t)},getExp:function(){var t=0;this.enemys.forEach(function(e){t+=e.exp}),this.player.getExp(t)},loss:function(){var t=this;console.log("loss"),this.player.autoRcoveryHp(this.recoverySpeed,function(){t.createEnemys(),t.inBattleFlag=!1})},victory:function(){var t=this;this.fallDownEquipment(),this.getExp(),this.player.autoRcoveryHp(this.recoverySpeed,function(){t.createEnemys(),t.inBattleFlag=!1})},createEnemys:function(){this.enemys=[];for(var t=I(D),e=t.reduce(function(t,e){return("number"==typeof t?t:t.value)+e.value}),i=Math.floor(Math.random()*e),a=1,n=0;n<t.length;n++)if((i-=t[n].value)<0){a=+t[n].key;break}for(var s=0;s<a;s++)this.createEnemy();this.autoFightFlag&&this.fight()},createEnemy:function(){for(var t=I(F),e=t.reduce(function(t,e){return("number"==typeof t?t:t.value)+e.value}),i=Math.floor(Math.random()*e),a=0;a<t.length;a++)if((i-=t[a].value)<0){this.enemys.push(new L("Slime",t[a].key));break}},showKnapsack:function(){this.knapsackVisible=!0},showPlayerAttr:function(){this.playerAttrVisible=!0},changeAutoFight:function(){this.autoFightFlag=!this.autoFightFlag,this.autoFightFlag&&!this.inBattleFlag&&this.fight(),localStorage.setItem("autoFightFlag",this.autoFightFlag)}},provide:function(){return{}},components:{BePlayerInfo:z,BeEnemyInfo:X,BeFightInfo:tt,BeKnapsack:ot,BePlayerAttr:i("VU/8")(rt,lt,!1,function(t){i("iZHO")},"data-v-2ada3ae2",null).exports},created:function(){var t=function(){var t=(document.body&&document.body.clientWidth||document.getElementsByTagName("html")[0].offsetWidth)/750;t=t>1?1:t<.427?.427:t,document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+100*t+"px !important")};if(t(),window.addEventListener("resize",function(){t()},!1),localStorage.getItem("player")?this.player=new $(JSON.parse(localStorage.getItem("player"))):this.player=new $,localStorage.getItem("equips")){var e=JSON.parse(localStorage.getItem("equips"));s()(e).forEach(function(t){if(e[t]){var i=T(e[t]);i.accordingToId=!1,e[t]=new P(i)}}),this.player.equips=e}if(localStorage.getItem("knapsack")){var i=JSON.parse(localStorage.getItem("knapsack")).map(function(t){return t.accordingToId=!1,new P(t)});this.player.knapsack=i}this.autoFightFlag=localStorage.getItem("autoFightFlag")&&"false"!==localStorage.getItem("autoFightFlag")||!1,this.createEnemys()}},ht={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("be-player-info",{attrs:{player:t.player}}),t._v(" "),i("be-enemy-info",{attrs:{enemys:t.enemys}}),t._v(" "),i("div",{staticClass:"button-group"},[i("button",{on:{click:t.showKnapsack}},[t._v("背包")]),t._v(" "),i("button",{on:{click:t.showPlayerAttr}},[t._v("属性")]),t._v(" "),i("button",{on:{click:t.changeAutoFight}},[t._v(t._s(t.autoFightFlag?"关闭自动":"自动战斗"))])]),t._v(" "),i("be-fight-info"),t._v(" "),i("be-knapsack",{attrs:{player:t.player,visible:t.knapsackVisible},on:{"update:visible":function(e){t.knapsackVisible=e}}}),t._v(" "),i("be-player-attr",{attrs:{player:t.player,visible:t.playerAttrVisible},on:{"update:visible":function(e){t.playerAttrVisible=e}}})],1)},staticRenderFns:[]};var ct=i("VU/8")(ut,ht,!1,function(t){i("AUqt")},null,null).exports,pt=i("t+b9"),dt=i.n(pt);a.default.config.productionTip=!1,a.default.use(dt.a),new a.default({el:"#app",components:{App:ct},template:"<App/>"})},"ahL/":function(t,e){},gbkW:function(t,e){},iZHO:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f2589407ed519f704821.js.map