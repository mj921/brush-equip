webpackJsonp([1],{DRgB:function(e,t){},HzdK:function(e,t){},M8v3:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("IvJb"),n=a("ZLEe"),s=a.n(n),o=a("Yarq"),r=a.n(o),l=a("AA3o"),u=a.n(l),c=a("xSur"),p=a.n(c),h=a("UzKs"),d=a.n(h),m=a("Y7Ml"),v=a.n(m),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.name,i=void 0===a?"你":a,n=t.hp,s=void 0===n?100:n,o=t.lv,r=void 0===o?1:o,l=t.minAtk,c=void 0===l?1:l,p=t.maxAtk,h=void 0===p?5:p,d=t.def,m=void 0===d?1:d,v=t.speed,f=void 0===v?0:v,y=t.hit,g=void 0===y?50:y,k=t.dodge,q=void 0===k?0:k,x=t.crt,b=void 0===x?0:x,_=t.crtDamage,A=void 0===_?150:_;u()(this,e),this.name=i,this.hp=s,this.currHp=s,this.lv=r,this.minAtk=c,this.maxAtk=h,this.def=m,this.speed=f,this.intervalBase=1,this.interval=Math.floor(100*this.intervalBase-this.speed)/100,this.hit=g,this.dodge=q,this.crt=b,this.crtDamage=A}return p()(e,[{key:"getDamageRemission",value:function(){return this.def/(this.def+100*this.lv)}},{key:"attack",value:function(e){var t={};if(100*Math.random()<this.hit&&100*Math.random()>=e.dodge){var a=(Math.random()*(this.maxAtk-this.minAtk)+this.minAtk)*(1-e.getDamageRemission()),i=!1;100*Math.random()<this.crt&&(a*=this.crtDamage/100,i=!0),a=a>1?Math.floor(a):1,e.currHp>a?e.currHp-=a:e.currHp=0,t.msg="<span style='color: "+(this.color||"#F67712")+";'>"+this.name+"</span> 对 <span style='color: "+(e.color||"#F67712")+";'>"+e.name+"</span> 造成 <span style='color: #F32020;"+(i?"font-size: 0.32rem;":"")+"'>"+a+"</span> 伤害"}return t.currHp=e.currHp,t}},{key:"toString",value:function(){return"hp: "+this.hp+", lv: "+this.lv}},{key:"getCombatPower",value:function(){return Math.floor((this.maxAtk+this.minAtk)/2/this.interval*(1+this.crt*this.crtDamage/1e4)*this.hit/100*10+this.hp/(1-this.getDamageRemission())/(100-this.dodge)*5*10)}}]),e}(),y="#bbb",g="#000",k="#72E729",q="#15A5F3",x="#B828F4",b="#F8FA20",_="#F32020",A="#F67712",D={Puniness:{color:y,num:0,name:"弱小",addLv:-2},Normal:{color:g,num:1,name:"普通",addLv:0},Variation:{color:k,num:2,name:"变异",addLv:1},Elites:{color:q,num:3,name:"精英",addLv:2},Head:{color:x,num:4,name:"头目",addLv:4},Boss:{color:b,num:5,name:"首领",addLv:8},VariationBoss:{color:_,num:6,name:"变异首领",addLv:12},ElitesBoss:{color:A,num:7,name:"精英首领",addLv:16}},E={1:725,2:250,3:20,4:4,5:1},I={Puniness:1e3,Normal:7844,Variation:1e3,Elites:100,Head:50,Boss:3,VariationBoss:2,ElitesBoss:1},C=function(e){var t=[];return s()(e).forEach(function(a){t.push({key:a,value:e[a]})}),t},N={Helmet:{name:"头盔",code:"Helmet"},Clothes:{name:"衣服",code:"Clothes"},Belt:{name:"腰带",code:"Belt"},Glove:{name:"手套",code:"Glove"},Shoes:{name:"鞋子",code:"Shoes"},Weapon:{name:"武器",code:"Weapon"},Necklace:{name:"项链",code:"Necklace"},Ring:{name:"戒指",code:"Ring"},Trousers:{name:"裤子",code:"Trousers"}},M={Inferior:{name:"劣质",color:y,additionalAttrNum:0,code:"Inferior",attrAddition:.8},Normal:{name:"普通",color:g,additionalAttrNum:0,code:"Normal",attrAddition:1},Excellent:{name:"优秀",color:k,additionalAttrNum:1,code:"Excellent",attrAddition:1.1},Polish:{name:"精良",color:q,additionalAttrNum:2,code:"Polish",attrAddition:1.2},Rare:{name:"稀有",color:x,additionalAttrNum:3,code:"Rare",attrAddition:1.3},Epic:{name:"史诗",color:b,additionalAttrNum:4,code:"Epic",attrAddition:1.5},Legend:{name:"传说",color:_,additionalAttrNum:5,code:"Legend",attrAddition:1.7},Myth:{name:"神话",color:A,additionalAttrNum:6,code:"Myth",attrAddition:2}},S={Puniness:{Inferior:7e3,Normal:2900,Excellent:100},Normal:{Inferior:1900,Normal:7e3,Excellent:1e3,Polish:100},Variation:{Inferior:500,Normal:6e3,Excellent:2400,Polish:1e3,Rare:100},Elites:{Inferior:100,Normal:5e3,Excellent:3e3,Polish:1e3,Rare:800,Epic:100},Head:{Inferior:100,Normal:4e3,Excellent:3400,Polish:1300,Rare:1e3,Epic:199,Legend:1},Boss:{Inferior:1,Normal:4e3,Excellent:3400,Polish:1300,Rare:1038,Epic:250,Legend:10,Myth:1},VariationBoss:{Inferior:1,Normal:3e3,Excellent:4384,Polish:1300,Rare:1e3,Epic:260,Legend:50,Myth:5},ElitesBoss:{Inferior:1,Normal:3e3,Excellent:4089,Polish:1500,Rare:1e3,Epic:300,Legend:100,Myth:10}},w={MinAtk:{name:"最小攻击",suffix:"",code:"minAtk"},MaxAtk:{name:"最大攻击",suffix:"",code:"maxAtk"},Hp:{name:"生命",suffix:"",code:"hp"},Def:{name:"防御",suffix:"",code:"def"},Speed:{name:"攻击速度",suffix:"%",code:"speed"},Hit:{name:"命中",suffix:"%",code:"hit"},Dodge:{name:"闪避",suffix:"%",code:"dodge"},Crt:{name:"暴击率",suffix:"%",code:"crt"},CrtDamage:{name:"暴击伤害",suffix:"%",code:"crtDamage"},ExtraAtk:{name:"额外攻击",suffix:"%",code:"extraAtk"},ExtraHp:{name:"额外生命",suffix:"%",code:"extraHp"},ExtraDef:{name:"额外防御",suffix:"%",code:"extraDef"}},F=[{type:w.Hit,value:[1,10]},{type:w.Dodge,value:[1,10]},{type:w.CrtDamage,value:[1,50]},{type:w.Crt,value:[1,5]},{type:w.Speed,value:[1,20]},{type:w.ExtraHp,value:[1,5]},{type:w.ExtraDef,value:[1,5]},{type:w.ExtraAtk,value:[1,5]}],H={ID1:{type:N.Weapon,lv:1,minAtk:[1,5,5,6],maxAtk:[5,10,6,7]},ID2:{type:N.Clothes,lv:1,hp:[5,20,20,25],def:[2,8,5,6]},ID3:{type:N.Helmet,lv:1,def:[1,5,4,5]},ID4:{type:N.Belt,lv:1,hp:[5,10,10,15]},ID5:{type:N.Glove,lv:1,minAtk:[0,0,1,1],maxAtk:[1,3,3,4],def:[1,5,4,5]},ID6:{type:N.Shoes,lv:1,dodge:[1,3],def:[1,3,3,4]},ID7:{type:N.Necklace,lv:1,hp:[5,10,10,15],crtDamage:[5,10]},ID8:{type:N.Ring,lv:1,crt:[1,5],minAtk:[1,3,3,4],maxAtk:[2,4,4,5]},ID9:{type:N.Trousers,lv:1,hp:[3,10,8,12],def:[2,6,5,6]}},L={Slime:{name:"史莱姆",hp:100,minAtk:1,maxAtk:1,def:1,speed:1,hit:70,dodge:20,crt:10,crtDamage:200,exp:1,hpI:100,atkI:10,defI:20,expI:1,equips:["ID1","ID2","ID3","ID4","ID5","ID6","ID7","ID8","ID9"]}},B=a("hRKE"),P=a.n(B),T=function e(t){var a=t instanceof Array?[]:{};for(var i in t)"object"===P()(t[i])?a[i]=e(t[i]):a[i]=t[i];return a},R=function(e){return Math.floor(Math.random()*(e[1]-e[0]))+e[0]},V=function(){function e(t){var a=this,i=t.id,n=void 0===i?"ID1":i,o=t.accordingToId,r=void 0===o||o,l=t.quality,c=void 0===l?"Normal":l,p=t.lv,h=void 0===p?1:p,d=t.minAtk,m=void 0===d?0:d,v=t.maxAtk,f=void 0===v?0:v,y=t.hp,g=void 0===y?0:y,k=t.def,q=void 0===k?0:k,x=t.speed,b=void 0===x?0:x,_=t.hit,A=void 0===_?0:_,D=t.dodge,E=void 0===D?0:D,I=t.crt,C=void 0===I?0:I,N=t.crtDamage,S=void 0===N?0:N,w=t.extraAttr,F=void 0===w?[]:w;if(u()(this,e),r){this.id=n,this.lv=h,this.quality=c,this.equipQuality=M[c],this.equipData=T(H[n]);["minAtk","maxAtk","hp","def"].forEach(function(e){a.equipData[e]&&(a.equipData[e][0]=a.equipData[e][0]+a.equipData[e][2]*(a.lv-1),a.equipData[e][1]=a.equipData[e][1]+a.equipData[e][3]*(a.lv-1))}),s()(this.equipData).forEach(function(e){a.equipData[e]instanceof Array&&(a.equipData[e][0]=Math.floor(a.equipData[e][0]*a.equipQuality.attrAddition),a.equipData[e][1]=Math.floor(a.equipData[e][1]*a.equipQuality.attrAddition))}),this.type=this.equipData.type.code,this.equipType=this.equipData.type,this.minAtk=this.equipData.minAtk?R(this.equipData.minAtk):0,this.maxAtk=this.equipData.maxAtk?R(this.equipData.maxAtk):0,this.hp=this.equipData.hp?R(this.equipData.hp):0,this.def=this.equipData.def?R(this.equipData.def):0,this.speed=this.equipData.speed?R(this.equipData.speed):0,this.hit=this.equipData.hit?R(this.equipData.hit):0,this.dodge=this.equipData.dodge?R(this.equipData.dodge):0,this.crt=this.equipData.crt?R(this.equipData.crt):0,this.crtDamage=this.equipData.crtDamage?R(this.equipData.crtDamage):0,this.extraAttr=[],this.createExtraAttr()}else this.id=n,this.equipData=H[n],this.type=this.equipData.type.code,this.equipType=this.equipData.type,this.quality=c,this.equipQuality=M[c],this.lv=h,this.minAtk=m,this.maxAtk=f,this.hp=g,this.def=q,this.speed=b,this.hit=A,this.dodge=E,this.crt=C,this.crtDamage=S,this.extraAttr=F}return p()(e,[{key:"createExtraAttr",value:function(){for(var e=T(F),t=this.equipQuality.additionalAttrNum,a=void 0,i=void 0,n=void 0;t>0;)a=Math.floor(Math.random()*e.length)+1,a=Math.floor(Math.random()*a),i=e.splice(a,1)[0],n=R(i.value),this.extraAttr.push({type:T(i.type),value:n,values:i.value}),t--}},{key:"getName",value:function(){return this.equipQuality.name+"的"+this.equipType.name}},{key:"getColor",value:function(){return this.equipQuality.color}},{key:"getBaseInfo",value:function(){var e=[];return(this.minAtk||this.maxAtk)&&e.push({value:this.minAtk+" - "+this.maxAtk,round:[this.equipData.minAtk[0],this.equipData.maxAtk[1]],name:"攻击"}),this.hp&&e.push({value:this.hp,round:[].concat(this.equipData.hp.slice(0,2)),name:"生命"}),this.def&&e.push({value:this.def,round:[].concat(this.equipData.def.slice(0,2)),name:"防御"}),this.speed&&e.push({value:this.speed+"%",round:[].concat(this.equipData.speed.slice(0,2)),name:"攻击速度"}),this.hit&&e.push({value:this.hit+"%",round:[].concat(this.equipData.hit.slice(0,2)),name:"命中"}),this.dodge&&e.push({value:this.dodge+"%",round:[].concat(this.equipData.dodge.slice(0,2)),name:"闪避"}),this.crt&&e.push({value:this.crt+"%",round:[].concat(this.equipData.crt.slice(0,2)),name:"暴击率"}),this.crtDamage&&e.push({value:this.crtDamage+"%",round:[].concat(this.equipData.crtDamage.slice(0,2)),name:"暴击伤害"}),e}},{key:"getBaseInfoCalculation",value:function(){var e=[];return this.minAtk&&e.push({value:this.minAtk,code:"baseMinAtk"}),this.maxAtk&&e.push({value:this.maxAtk,code:"baseMaxAtk"}),this.hp&&e.push({value:this.hp,code:"baseHp"}),this.def&&e.push({value:this.def,code:"baseDef"}),this.speed&&e.push({value:this.speed,code:"speed"}),this.hit&&e.push({value:this.hit,code:"hit"}),this.dodge&&e.push({value:this.dodge,code:"dodge"}),this.crt&&e.push({value:this.crt,code:"crt"}),this.crtDamage&&e.push({value:this.crtDamage,code:"crtDamage"}),e}}]),e}(),$=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Slime",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Normal",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;u()(this,t);var n=T(L[e]),s=D[a];n?(n.hp=n.hp+n.hpI*(i-1+s.addLv),n.atk=n.atk+n.atkI*(i-1+s.addLv),n.def=n.def+n.defI*(i-1+s.addLv),n.lv=i):n={name:"敌人",hp:100,atk:1,def:1,speed:1,hit:50,dodge:0,crt:0,crtDamage:150,hpI:20,atkI:1,defI:1,exp:1,lv:i};var o=d()(this,(t.__proto__||r()(t)).call(this,n));return o.exp=n.exp+n.expI*(i-1+s.addLv),o.exp=o.exp>0?o.exp:1,o.name="["+s.name+"]"+n.name,o.enemyType=e,o.color=s.color,o.suffix=a,o.equips=n.equips||[],o}return v()(t,e),p()(t,[{key:"fallDownEquipment",value:function(){for(var e=C(S[this.suffix]),t=e.reduce(function(e,t){return("number"==typeof e?e:e.value)+t.value}),a=Math.floor(Math.random()*t),i="Inferior",n=0;n<e.length;n++)if((a-=e[n].value)<0){i=e[n].key;break}var s=this.lv-Math.floor(5*Math.random());s=s>0?s:1;var o=new V({id:this.equips[Math.floor(Math.random()*this.equips.length)],quality:i,lv:s});return console.log(o),o}}]),t}(f),Q=a("3cXf"),O=a.n(Q),j=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.hp,i=void 0===a?100:a,n=e.lv,s=void 0===n?1:n,o=e.minAtk,l=void 0===o?1:o,c=e.maxAtk,p=void 0===c?5:c,h=e.def,m=void 0===h?1:h,v=e.speed,f=void 0===v?1:v,y=e.hit,g=void 0===y?50:y,k=e.dodge,q=void 0===k?0:k,x=e.crt,b=void 0===x?0:x,_=e.crtDamage,A=void 0===_?150:_,D=e.maxExp,E=void 0===D?100:D,I=e.currExp,C=void 0===I?0:I,N=e.goldCoin,M=void 0===N?0:N;u()(this,t);var S=d()(this,(t.__proto__||r()(t)).call(this,{hp:i,lv:s,minAtk:l,maxAtk:p,def:m,speed:f,hit:g,dodge:q,crt:b,crtDamage:A}));return S.maxExp=E,S.currExp=C,S.extraAtk=0,S.extraDef=0,S.extraHp=0,S.baseMinAtk=S.minAtk,S.baseMaxAtk=S.maxAtk,S.baseDef=S.def,S.baseHp=S.hp,S.goldCoin=M,S.knapsack=[],S.equips={Weapon:null,Helmet:null,Clothes:null,Belt:null,Glove:null,Shoes:null,Necklace:null,Ring:null,Trousers:null},S}return v()(t,e),p()(t,[{key:"getExp",value:function(e){this.currExp+=e,this.currExp>=this.maxExp&&this.levelUp(),this.save()}},{key:"levelUp",value:function(){this.lv++,this.currExp-=this.maxExp,this.maxExp=this.lv*this.lv*100,this.save()}},{key:"getEquips",value:function(e){this.knapsack=this.knapsack.concat(e),this.save()}},{key:"equipFn",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.equips[e.type]){var i=this.equips[e.type];this.knapsack.splice(this.knapsack.indexOf(e),1,i),i.getBaseInfoCalculation().forEach(function(e){t[e.code]-=e.value}),i.extraAttr.forEach(function(e){t[e.type.code]-=e.value})}else this.knapsack.splice(this.knapsack.indexOf(e),1);e.getBaseInfoCalculation().forEach(function(e){t[e.code]+=e.value}),e.extraAttr.forEach(function(e){t[e.type.code]+=e.value}),this.minAtk=Math.floor(this.baseMinAtk*(100+this.extraAtk)/100),this.maxAtk=Math.floor(this.baseMaxAtk*(100+this.extraAtk)/100),this.def=Math.floor(this.baseDef*(100+this.extraDef)/100),this.hp=Math.floor(this.baseHp*(100+this.extraHp)/100),this.currHp>this.hp&&(this.currHp=this.hp),this.equips[e.type]=e,a&&this.save()}},{key:"unloadEquip",value:function(e){var t=this;this.equips[e]&&(this.knapsack.push(this.equips[e]),this.equips[e].getBaseInfoCalculation().forEach(function(e){t[e.code]-=e.value}),this.equips[e].extraAttr.forEach(function(e){t[e.type.code]-=e.value}),this.equips[e]=null),this.minAtk=Math.floor(this.baseMinAtk*(100+this.extraAtk)/100),this.maxAtk=Math.floor(this.baseMaxAtk*(100+this.extraAtk)/100),this.def=Math.floor(this.baseDef*(100+this.extraDef)/100),this.hp=Math.floor(this.baseHp*(100+this.extraHp)/100),this.currHp>this.hp&&(this.currHp=this.hp),this.save()}},{key:"sellEquip",value:function(e){this.knapsack.splice(this.knapsack.indexOf(e),1),this.save()}},{key:"save",value:function(){var e=T(this);delete e.knapsack,delete e.equips,localStorage.setItem("player",O()(e)),localStorage.setItem("equips",O()(this.equips)),localStorage.setItem("knapsack",O()(this.knapsack))}},{key:"recoveryHp",value:function(e){this.currHp+=e,this.currHp>this.hp&&(this.currHp=this.hp)}},{key:"autoRcoveryHp",value:function(e,t){var a=this;!function i(){a.recoveryHp(Math.floor(e*a.hp/100)),a.currHp<a.hp?setTimeout(i,100):t&&t()}()}},{key:"getCurrEquipPower",value:function(e){var a=new t(this);if(this.equips[e.type]){var i=this.equips[e.type];i.getBaseInfoCalculation().forEach(function(e){a[e.code]-=e.value}),i.extraAttr.forEach(function(e){a[e.type.code]-=e.value})}e.getBaseInfoCalculation().forEach(function(e){a[e.code]+=e.value}),e.extraAttr.forEach(function(e){a[e.type.code]+=e.value});var n=a.getCombatPower();return a=null,n}},{key:"getBaseInfo",value:function(){var e=[];return e.push({value:this.goldCoin,name:"金币"}),e.push({value:this.minAtk+" - "+this.maxAtk,name:"攻击"}),e.push({value:this.hp,name:"生命"}),e.push({value:this.def,name:"防御"}),e.push({value:this.speed+"%",name:"攻击速度"}),e.push({value:this.hit+"%",name:"命中"}),e.push({value:this.dodge+"%",name:"闪避"}),e.push({value:this.crt+"%",name:"暴击率"}),e.push({value:this.crtDamage+"%",name:"暴击伤害"}),e}}]),t}(f),W={props:{width:{type:String,default:"4rem"},max:{type:Number,default:0},curr:{type:Number,default:0},type:{type:String,default:"hp"}},computed:{style:function(){return{width:this.width}},currStyle:function(){return{width:(this.max>0?this.curr/this.max*100:0).toFixed(2)+"%"}}}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hp-bar",style:e.style},[a("div",{staticClass:"curr-progress",class:{exp:"exp"===e.type},style:e.currStyle}),e._v(" "),a("div",{staticClass:"bp-info"},[e._v(e._s(e.curr)+" / "+e._s(e.max))])])},staticRenderFns:[]};var z=a("C7Lr")(W,K,!1,function(e){a("WnY5")},"data-v-55aca540",null).exports,G={data:function(){return{}},props:{player:Object},components:{BeHpBar:z}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"player-info"},[a("dl",[a("span",[e._v("等级："+e._s(e.player.lv))]),a("span",[e._v("金币："+e._s(e.player.goldCoin))])]),e._v(" "),a("dl",[a("label",{attrs:{for:""}},[e._v("HP：")]),a("be-hp-bar",{attrs:{curr:e.player.currHp,max:e.player.hp}})],1),e._v(" "),a("dl",[a("label",{attrs:{for:""}},[e._v("EXP：")]),a("be-hp-bar",{attrs:{curr:e.player.currExp,max:e.player.maxExp,type:"exp"}})],1)])},staticRenderFns:[]};var U=a("C7Lr")(G,J,!1,function(e){a("hRgD")},"data-v-7b8c541d",null).exports,Y={props:{enemys:Array},components:{BeHpBar:z},created:function(){console.log(this.enemys)}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"enemy-info"},e._l(e.enemys,function(t,i){return a("dl",{key:i},[a("label",{style:"color:"+t.color},[e._v(e._s(t.name)+"：")]),a("be-hp-bar",{attrs:{curr:t.currHp,max:t.hp}})],1)}))},staticRenderFns:[]};var Z=a("C7Lr")(Y,X,!1,function(e){a("i4NU")},"data-v-733a3a26",null).exports,ee={props:{msgList:Array}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fight-info"},[a("ul",e._l(e.msgList,function(t,i){return a("li",{domProps:{innerHTML:e._s(t)}})}))])},staticRenderFns:[]};var ae=a("C7Lr")(ee,te,!1,function(e){a("QHnD")},"data-v-6209adf8",null).exports,ie=a("aA9S"),ne=a.n(ie),se=a("MgeX"),oe=a.n(se),re={props:{equip:Object,btnType:{type:String,default:"equip"}},methods:{equipFn:function(e){e.stopPropagation(),this.$emit("equip")},unloadEquip:function(e){e.stopPropagation(),this.$emit("unload")}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equip-detail"},[e.equip?a("div",{staticClass:"base-info"},[a("dl",{style:"color: "+e.equip.getColor()},[e._v(e._s(e.equip.getName())+" (lv: "+e._s(e.equip.lv)+")")]),e._v(" "),e._l(e.equip.getBaseInfo(),function(t,i){return a("dl",{key:i},[e._v(e._s(t.name)+"："+e._s(t.value)+" "),a("span",{staticClass:"round"},[e._v("("+e._s(t.round.join(" - "))+")")])])})],2):e._e(),e._v(" "),e.equip&&e.equip.extraAttr&&e.equip.extraAttr.length>0?a("div",{staticClass:"extra-info"},e._l(e.equip.extraAttr,function(t,i){return a("dl",{key:i},[e._v(e._s(t.type.name)+"："+e._s(t.value+t.type.suffix))])})):e._e(),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:"equip"===e.btnType,expression:"btnType === 'equip'"}],on:{click:function(t){e.equipFn(t)}}},[e._v("装备")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:"unload"===e.btnType,expression:"btnType === 'unload'"}],on:{click:function(t){e.unloadEquip(t)}}},[e._v("卸下")])])},staticRenderFns:[]};var ue=a("C7Lr")(re,le,!1,function(e){a("a1so")},"data-v-2d0a3619",null).exports,ce={data:function(){return{detailVisible:!1,equip:null,btnType:"equip",currEquip:null,multSaleVisible:!1,equipQualityList:oe()(T(M)).map(function(e){return ne()(e,{value:!1})})}},props:{player:Object,visible:{type:Boolean,default:!1}},methods:{showEquipDetail:function(e,t){this.currEquip="equip"===t?this.player.equips[e.type]:null,this.detailVisible=!0,this.equip=e,this.btnType=t},closeDetail:function(){this.detailVisible=!1},close:function(){this.$emit("update:visible",!1)},equipFn:function(e){this.player.equipFn(e),this.detailVisible=!1},unloadEquip:function(e){this.player.unloadEquip(e),this.detailVisible=!1},sell:function(e){this.player.sellEquip(e)},closeMultSale:function(){this.multSaleVisible=!1},showMultSale:function(){this.multSaleVisible=!0},stopProp:function(e){e.stopPropagation()},multSale:function(){var e=this,t=this.equipQualityList.filter(function(e){return e.value}).map(function(e){return e.code});t.length>0&&this.player.knapsack.filter(function(e){return t.indexOf(e.quality)>-1}).forEach(function(t){e.sell(t)})}},components:{BeEquipDetail:ue}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"knapsack"},[a("div",{staticClass:"container"},[a("div",{staticClass:"already-equipped"},e._l(Object.keys(e.player.equips),function(t){return a("dl",{key:t},[e.player.equips[t]?[a("span",{style:"color:"+e.player.equips[t].getColor(),on:{click:function(a){e.showEquipDetail(e.player.equips[t],"unload")}}},[e._v(e._s(e.player.equips[t].getName())+" (lv: "+e._s(e.player.equips[t].lv)+")")]),e._v(" "),a("button",{on:{click:function(a){e.unloadEquip(t)}}},[e._v("卸下")])]:a("span",[e._v("未装备")])],2)})),e._v(" "),a("div",{staticClass:"not-equip"},e._l(e.player.knapsack,function(t,i){return a("dl",{key:i,attrs:{"data-aaa":e.player.getCurrEquipPower(t)+","+e.player.getCombatPower()}},[a("span",{style:"color:"+t.getColor(),on:{click:function(a){e.showEquipDetail(t,"equip")}}},[e._v(e._s(t.getName())+" (lv: "+e._s(t.lv)+")")]),e._v(" "),e.player.getCurrEquipPower(t)>e.player.getCombatPower()?a("span",{staticClass:"red-text"},[e._v("+"+e._s(e.player.getCurrEquipPower(t)-e.player.getCombatPower()))]):a("span",{staticClass:"green-text"},[e._v(e._s(e.player.getCurrEquipPower(t)-e.player.getCombatPower()))]),e._v(" "),a("button",{on:{click:function(a){e.equipFn(t)}}},[e._v("装备")]),e._v(" "),a("button",{on:{click:function(a){e.sell(t)}}},[e._v("出售")])])})),e._v(" "),a("div",{staticClass:"knapsack-bottom clearfix"},[a("div",{staticClass:"fl"},[a("button",{on:{click:e.showMultSale}},[e._v("批量出售")])]),e._v(" "),a("div",{staticClass:"fr"},[a("button",{on:{click:e.close}},[e._v("关闭")])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.detailVisible,expression:"detailVisible"}],staticClass:"equip-info",on:{click:e.closeDetail}},[e.currEquip?a("be-equip-detail",{staticClass:"curr-equip",attrs:{equip:e.currEquip,btnType:"unload"},on:{unload:function(t){e.unloadEquip(e.equip.type)}}}):e._e(),e._v(" "),a("be-equip-detail",{attrs:{equip:e.equip,btnType:e.btnType},on:{equip:function(t){e.equipFn(e.equip)},unload:function(t){e.unloadEquip(e.equip.type)}}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.multSaleVisible,expression:"multSaleVisible"}],staticClass:"equip-info",on:{click:e.closeMultSale}},[a("div",{staticClass:"mult-sale-container",on:{click:function(t){e.stopProp(t)}}},[e._l(e.equipQualityList,function(t){return[a("dl",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"equipQuality.value"}],key:t.code,attrs:{type:"checkbox",id:"multSale"+t.code},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{change:function(a){var i=t.value,n=a.target,s=!!n.checked;if(Array.isArray(i)){var o=e._i(i,null);n.checked?o<0&&e.$set(t,"value",i.concat([null])):o>-1&&e.$set(t,"value",i.slice(0,o).concat(i.slice(o+1)))}else e.$set(t,"value",s)}}}),a("label",{attrs:{for:"multSale"+t.code}},[e._v(e._s(t.name))])])]}),e._v(" "),a("div",{staticClass:"knapsack-bottom clearfix"},[a("button",{on:{click:e.multSale}},[e._v("批量出售")]),e._v(" "),a("button",{on:{click:e.closeMultSale}},[e._v("关闭")])])],2)])])])},staticRenderFns:[]};var he=a("C7Lr")(ce,pe,!1,function(e){a("DRgB")},"data-v-9bedda72",null).exports,de={props:{player:Object,visible:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("update:visible",!1)}}},me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"player-attr"},[a("div",{staticClass:"base-info"},[a("dl",[e._v("等级："+e._s(e.player.lv))]),e._v(" "),a("dl",[e._v("战斗力："+e._s(e.player.getCombatPower()))]),e._v(" "),e._l(e.player.getBaseInfo(),function(t,i){return a("dl",{key:i},[e._v(e._s(t.name)+"："+e._s(t.value))])}),e._v(" "),a("button",{staticClass:"btn",on:{click:e.close}},[e._v("关闭")])],2)])},staticRenderFns:[]};var ve={name:"App",data:function(){return{player:null,enemys:[],gameSpeed:10,recoverySpeed:2,autoFightFlag:!1,inBattleFlag:!1,knapsackVisible:!1,playerAttrVisible:!1,fightInfo:[],msgList:[],enemyLv:1,enemyNum:0,enemyNumMax:10}},methods:{fight:function(){var e=this;this.inBattleFlag=!0;var t=0,a=[],i=void 0,n=function(){clearTimeout(i),a.forEach(function(e){clearTimeout(e)})};i=setTimeout(function a(){var s=e.player.attack(e.enemys[t]);s.msg&&e.log(s.msg),0===s.currHp?++t<e.enemys.length?i=setTimeout(a,1e3*e.player.interval/e.gameSpeed):(n(),e.victory()):i=setTimeout(a,1e3*e.player.interval/e.gameSpeed)},1e3*this.player.interval/this.gameSpeed);this.enemys.forEach(function(t,i){a[i]=setTimeout(function(){!function t(i){var s=e.enemys[i].attack(e.player);s.msg&&e.log(s.msg),0===s.currHp?(n(),e.loss()):(clearTimeout(a[i]),a[i]=setTimeout(function(){t(i)},1e3*e.enemys[i].interval/e.gameSpeed))}(i)},1e3*t.interval/e.gameSpeed)})},fallDownEquipment:function(){var e=[];this.enemys.forEach(function(t){e.push(t.fallDownEquipment())}),this.log("获得 "+e.map(function(e){return'<span style="color: '+e.equipQuality.color+'">'+e.getName()+"</span>"}).join("、")),this.player.getEquips(e)},getExp:function(){var e=0;this.enemys.forEach(function(t){e+=t.exp}),this.player.getExp(e)},loss:function(){var e=this;this.log("战斗失败"),this.enemyNum>0?this.enemyNum--:this.enemyLv>1?(this.enemyLv--,this.enemyNum=this.enemyNumMax-1):(this.enemyLv=1,this.enemyNum=0),localStorage.setItem("enemyLv",this.enemyLv),localStorage.setItem("enemyNum",this.enemyNum),this.player.autoRcoveryHp(this.recoverySpeed,function(){e.createEnemys(),e.inBattleFlag=!1})},victory:function(){var e=this;this.log("战斗胜利"),this.fallDownEquipment(),this.getExp(),this.enemyNum<this.enemyNumMax-1?this.enemyNum++:(this.enemyLv++,this.enemyNum=0),localStorage.setItem("enemyLv",this.enemyLv),localStorage.setItem("enemyNum",this.enemyNum),this.player.autoRcoveryHp(this.recoverySpeed,function(){e.createEnemys(),e.inBattleFlag=!1})},createEnemys:function(){this.enemys=[];for(var e=C(E),t=e.reduce(function(e,t){return("number"==typeof e?e:e.value)+t.value}),a=Math.floor(Math.random()*t),i=1,n=0;n<e.length;n++)if((a-=e[n].value)<0){i=+e[n].key;break}for(var s=0;s<i;s++)this.createEnemy();this.autoFightFlag&&this.fight()},createEnemy:function(){for(var e=C(I),t=e.reduce(function(e,t){return("number"==typeof e?e:e.value)+t.value}),a=Math.floor(Math.random()*t),i=0;i<e.length;i++)if((a-=e[i].value)<0){this.enemys.push(new $("Slime",e[i].key,this.enemyLv));break}},showKnapsack:function(){this.knapsackVisible=!0},showPlayerAttr:function(){this.playerAttrVisible=!0},changeAutoFight:function(){this.autoFightFlag=!this.autoFightFlag,this.autoFightFlag&&!this.inBattleFlag&&this.fight(),localStorage.setItem("autoFightFlag",this.autoFightFlag)},log:function(e){this.msgList.push(e)},initGame:function(){localStorage.clear(),this.player=new j}},provide:function(){return{log:this.log}},components:{BePlayerInfo:U,BeEnemyInfo:Z,BeFightInfo:ae,BeKnapsack:he,BePlayerAttr:a("C7Lr")(de,me,!1,function(e){a("HzdK")},"data-v-dffb5078",null).exports},created:function(){var e=function(){var e=(document.body&&document.body.clientWidth||document.getElementsByTagName("html")[0].offsetWidth)/750;e=e>1?1:e<.427?.427:e,document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+100*e+"px !important")};if(e(),window.addEventListener("resize",function(){e()},!1),localStorage.getItem("player")?this.player=new j(JSON.parse(localStorage.getItem("player"))):this.player=new j,localStorage.getItem("equips")){var t=JSON.parse(localStorage.getItem("equips"));s()(t).forEach(function(e){if(t[e]){var a=T(t[e]);a.accordingToId=!1,t[e]=new V(a)}}),this.player.equips=t}if(localStorage.getItem("knapsack")){var a=JSON.parse(localStorage.getItem("knapsack")).map(function(e){return e.accordingToId=!1,new V(e)});this.player.knapsack=a}this.autoFightFlag=localStorage.getItem("autoFightFlag")&&"false"!==localStorage.getItem("autoFightFlag")||!1,this.enemyLv=localStorage.getItem("enemyLv")?+localStorage.getItem("enemyLv"):1,this.enemyNum=localStorage.getItem("enemyNum")?+localStorage.getItem("enemyNum"):1,this.createEnemys()}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("be-player-info",{attrs:{player:e.player}}),e._v(" "),a("be-enemy-info",{attrs:{enemys:e.enemys}}),e._v(" "),a("div",{staticClass:"button-group"},[a("div",{staticClass:"fl button-group-left"},[a("button",{on:{click:e.showKnapsack}},[e._v("背包")]),e._v(" "),a("button",{on:{click:e.showPlayerAttr}},[e._v("属性")]),e._v(" "),a("button",{on:{click:e.changeAutoFight}},[e._v(e._s(e.autoFightFlag?"关闭自动":"自动战斗"))]),e._v(" "),a("button",{on:{click:e.initGame}},[e._v("重新开始")])]),e._v(" "),a("div",{staticClass:"fr button-group-right"},[e._v("\n            怪物等级："+e._s(e.enemyLv)),a("br"),e._v("\n            怪物进度："+e._s(e.enemyNum)+" / "+e._s(e.enemyNumMax)+"\n        ")])]),e._v(" "),a("be-fight-info",{attrs:{msgList:e.msgList}}),e._v(" "),a("be-knapsack",{attrs:{player:e.player,visible:e.knapsackVisible},on:{"update:visible":function(t){e.knapsackVisible=t}}}),e._v(" "),a("be-player-attr",{attrs:{player:e.player,visible:e.playerAttrVisible},on:{"update:visible":function(t){e.playerAttrVisible=t}}})],1)},staticRenderFns:[]};var ye=a("C7Lr")(ve,fe,!1,function(e){a("M8v3")},null,null).exports,ge=a("t+b9"),ke=a.n(ge);i.default.config.productionTip=!1,i.default.use(ke.a),new i.default({el:"#app",components:{App:ye},template:"<App/>"})},QHnD:function(e,t){},WnY5:function(e,t){},a1so:function(e,t){},hRgD:function(e,t){},i4NU:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e15d3a3e8883c2448655.js.map